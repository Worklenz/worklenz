!function(){"use strict";var Af=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},is=function(t){return{eq:t}},zE=is(function(t,e){return t===e}),Tf=function(t){return is(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},Of=function(t){return is(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=zE,c=Tf(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},is(function(m,p){return c.eq(u(m),u(p))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Xl=is(function(t,e){if(t===e)return!0;var n=Af(t);return n===Af(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Tf(Xl).eq(t,e):"object"===n&&Of(Xl).eq(t,e))});const jE=Object.getPrototypeOf,Bf=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},Ql=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Bf(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,Jl=t=>e=>typeof e===t,Pf=t=>e=>t===e,Ha=(t,e)=>we(t)&&Bf(t,e,(n,o)=>jE(n)===o),at=Ql("string"),we=Ql("object"),Df=t=>Ha(t,Object),Jt=Ql("array"),Se=Pf(null),Eo=Jl("boolean"),fe=Pf(void 0),Gt=t=>null==t,q=t=>!Gt(t),Nt=Jl("function"),fn=Jl("number"),pr=(t,e)=>{if(Jt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},vt=()=>{},En=(t,e)=>(...n)=>t(e.apply(null,n)),Lf=(t,e)=>n=>t(e(n)),W=t=>()=>t,Ne=t=>t,Mf=(t,e)=>t===e;function J(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const ls=t=>e=>!t(e),If=t=>()=>{throw new Error(t)},Zl=t=>t(),ds=t=>{t()},zt=W(!1),Kt=W(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return q(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const td=Array.prototype.slice,HE=Array.prototype.indexOf,$E=Array.prototype.push,Ff=(t,e)=>HE.call(t,e),Rt=(t,e)=>Ff(t,e)>-1,$t=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},Et=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},U=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Uf=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},hr=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},gt=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},cs=(t,e,n)=>(Uf(t,(o,r)=>{n=e(n,o,r)}),n),Oe=(t,e,n)=>(U(t,(o,r)=>{n=e(n,o,r)}),n),zf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},Zt=(t,e)=>zf(t,e,zt),us=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},jf=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Jt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);$E.apply(e,t[n])}return e},rn=(t,e)=>jf(Et(t,e)),zn=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},ms=t=>{const e=td.call(t,0);return e.reverse(),e},$a=(t,e)=>gt(t,n=>!Rt(e,n)),ed=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},_o=(t,e)=>{const n=td.call(t,0);return n.sort(e),n},qa=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Be=t=>qa(t,0),ko=t=>qa(t,t.length-1),Ie=Nt(Array.from)?Array.from:t=>td.call(t),br=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},Pe=Object.keys,qE=Object.hasOwnProperty,Bt=(t,e)=>{const n=Pe(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Va=(t,e)=>VE(t,(n,o)=>({k:o,v:e(n,o)})),VE=(t,e)=>{const n={};return Bt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},nd=t=>(e,n)=>{t[n]=e},Hf=(t,e,n,o)=>{Bt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},fs=(t,e)=>{const n={};return Hf(t,e,nd(n),vt),n},Wa=(t,e)=>{const n=[];return Bt(t,(o,r)=>{n.push(e(o,r))}),n},od=t=>Wa(t,Ne),Pt=(t,e)=>ht(t,e)?C.from(t[e]):C.none(),ht=(t,e)=>qE.call(t,e),vr=(t,e)=>ht(t,e)&&null!=t[e],$f=t=>{const e={};return U(t,n=>{e[n]={}}),Pe(e)},qf=t=>void 0!==t.length,rd=Array.isArray,Ka=(t,e,n)=>{if(!t)return!1;if(n=n||t,qf(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(ht(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},sd=(t,e)=>{const n=[];return Ka(t,(o,r)=>{n.push(e(o,r,t))}),n},gs=(t,e)=>{const n=[];return Ka(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Ya=(t,e,n,o)=>{let r=fe(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},Vf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},So=t=>t[t.length-1],No=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Wf=()=>ad(0,0),ad=(t,e)=>({major:t,minor:e}),ps={nu:ad,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Wf():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return ad(a(1),a(2))})(t,n)},unknown:Wf},Kf=(t,e)=>{const n=String(e).toLowerCase();return Zt(t,o=>o.search(n))},Yf=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Gf=(t,e)=>le(t,e)?t.substring(e.length):t,he=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!fe(o)||r+e.length<=o)},le=(t,e)=>Yf(t,e,0),id=(t,e)=>Yf(t,e,t.length-e.length),ld=t=>e=>e.replace(t,""),yr=ld(/^\s+|\s+$/g),WE=ld(/^\s+/g),Xf=ld(/\s+$/g),_n=t=>t.length>0,hs=t=>!_n(t),Ga=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},dd=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,jn=t=>e=>he(e,t),KE=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>he(t,"edge/")&&he(t,"chrome")&&he(t,"safari")&&he(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dd],search:t=>he(t,"chrome")&&!he(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>he(t,"msie")||he(t,"trident")},{name:"Opera",versionRegexes:[dd,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:jn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:jn("firefox")},{name:"Safari",versionRegexes:[dd,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(he(t,"safari")||he(t,"mobile/"))&&he(t,"applewebkit")}],YE=[{name:"Windows",search:jn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>he(t,"iphone")||he(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:jn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:jn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:jn("linux"),versionRegexes:[]},{name:"Solaris",search:jn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:jn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:jn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Qf={browsers:W(KE),oses:W(YE)},Zf="Chromium",eg="Firefox",og=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(Zf),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(eg),isSafari:o("Safari")}},GE=()=>og({current:void 0,version:ps.unknown()}),XE=og,rg=(W("Edge"),W(Zf),W("IE"),W("Opera"),W(eg),W("Safari"),"Windows"),sg="Android",lg="Solaris",dg="FreeBSD",cg="ChromeOS",ug=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(rg),isiOS:o("iOS"),isAndroid:o(sg),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(lg),isFreeBSD:o(dg),isChromeOS:o(cg)}},QE=()=>ug({current:void 0,version:ps.unknown()}),JE=ug,ZE=(W(rg),W("iOS"),W(sg),W("Linux"),W("macOS"),W(lg),W(dg),W(cg),t=>window.matchMedia(t).matches);let t_=No(()=>((t,e,n)=>{const o=Qf.browsers(),r=Qf.oses(),s=e.bind(l=>{return d=o,br(l.brands,u=>{const m=u.brand.toLowerCase();return Zt(d,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:ps.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return Kf(o,d=t).map(c=>{const u=ps.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(GE,XE),a=(l=r,d=t,Kf(l,d).map(c=>{const u=ps.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(QE,JE),i=((l,d,c,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!g&&!v;return{isiPad:W(m),isiPhone:W(p),isTablet:W(g),isPhone:W(b),isTouch:W(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:W(v),isDesktop:W(y)}})(a,s,t,n);var l,d;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),ZE));const kn=()=>t_(),e_=navigator.userAgent,cd=kn(),Sn=cd.browser,Nn=cd.os,Ro=cd.deviceType,n_=-1!==e_.indexOf("Windows Phone"),_t={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Sn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Sn.isIE(),windowsPhone:n_,browser:{current:Sn.current,version:Sn.version,isChromium:Sn.isChromium,isEdge:Sn.isEdge,isFirefox:Sn.isFirefox,isIE:Sn.isIE,isOpera:Sn.isOpera,isSafari:Sn.isSafari},os:{current:Nn.current,version:Nn.version,isAndroid:Nn.isAndroid,isChromeOS:Nn.isChromeOS,isFreeBSD:Nn.isFreeBSD,isiOS:Nn.isiOS,isLinux:Nn.isLinux,isMacOS:Nn.isMacOS,isSolaris:Nn.isSolaris,isWindows:Nn.isWindows},deviceType:{isDesktop:Ro.isDesktop,isiPad:Ro.isiPad,isiPhone:Ro.isiPhone,isPhone:Ro.isPhone,isTablet:Ro.isTablet,isTouch:Ro.isTouch,isWebView:Ro.isWebView}},o_=/^\s*|\s*$/g,mg=t=>Gt(t)?"":(""+t).replace(o_,""),fg=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),Ka(t,(r,s)=>!1!==e.call(o,r,s,n)&&(fg(r,e,n,o),!0)))},H={trim:mg,isArray:rd,is:(t,e)=>e?!("array"!==e||!rd(t))||typeof t===e:void 0!==t,toArray:t=>{if(rd(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=at(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Ka,map:sd,grep:gs,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:ht,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(ht(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:fg,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Jt(t)?t:""===t?[]:sd(t.split(e||","),mg),_addCacheSuffix:t=>{const e=_t.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Cr=(t,e,n=Mf)=>t.exists(o=>n(o,e)),gg=(t,e,n=Mf)=>be(t,e,n).getOr(t.isNone()&&e.isNone()),be=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),wr=(t,e)=>t?C.some(e):C.none(),r_=typeof window<"u"?window:Function("return this;")(),pg=(t,e)=>((n,o)=>{let r=o??r_;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(t.split("."),e),s_=Object.getPrototypeOf,xt=t=>t.dom.nodeName.toLowerCase(),hg=t=>t.dom.nodeType,Xa=t=>e=>hg(e)===t,Qa=t=>Fe(t)&&(t=>{const e=pg("ownerDocument.defaultView",t);return we(t)&&((n=e,((o,r)=>{const s=pg(o,r);if(null==s)throw new Error(o+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(s_(t).constructor.name));var n})(t.dom),Fe=Xa(1),He=Xa(3),i_=Xa(9),l_=Xa(11),Ja=t=>e=>Fe(e)&&xt(e)===t,bg=(t,e,n)=>{if(!(at(n)||Eo(n)||fn(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},de=(t,e,n)=>{bg(t.dom,e,n)},Hn=(t,e)=>{const n=t.dom;Bt(e,(o,r)=>{bg(n,r,o)})},Ue=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},$n=(t,e)=>C.from(Ue(t,e)),bs=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ce=(t,e)=>{t.dom.removeAttribute(e)},vg=t=>Oe(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),ud=(t,e)=>{const n=Ue(t,e);return void 0===n||""===n?[]:n.split(" ")},vs=t=>void 0!==t.dom.classList,yg=t=>ud(t,"class"),Cg=(t,e)=>((n,o,r)=>{const s=ud(n,o).concat([r]);return de(n,o,s.join(" ")),!0})(t,"class",e),wg=(t,e)=>((n,o,r)=>{const s=gt(ud(n,o),a=>a!==r);return s.length>0?de(n,o,s.join(" ")):ce(n,o),!1})(t,"class",e),xr=(t,e)=>{vs(t)?t.dom.classList.add(e):Cg(t,e)},xg=t=>{0===(vs(t)?t.dom.classList:yg(t)).length&&ce(t,"class")},ys=(t,e)=>{vs(t)?t.dom.classList.remove(e):wg(t,e),xg(t)},md=(t,e)=>vs(t)&&t.dom.classList.contains(e),Cs=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ws=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Cs(n.childNodes[0])},oe=(t,e)=>{const n=(e||document).createElement(t);return Cs(n)},Er=(t,e)=>{const n=(e||document).createTextNode(t);return Cs(n)},k=Cs,Eg=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},gn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},_g=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,kt=(t,e)=>t.dom===e.dom,qn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},kg=t=>k(t.dom.ownerDocument),Vn=t=>i_(t)?t:kg(t),xs=t=>k(Vn(t).dom.defaultView),sn=t=>C.from(t.dom.parentNode).map(k),Za=t=>C.from(t.dom.parentElement).map(k),Sg=(t,e)=>{const n=Nt(e)?e:zt;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,a=k(s);if(r.push(a),!0===n(a))break;o=s}return r},Ao=t=>C.from(t.dom.previousSibling).map(k),Es=t=>C.from(t.dom.nextSibling).map(k),Ng=t=>ms(Eg(t,Ao)),Rg=t=>Eg(t,Es),ue=t=>Et(t.dom.childNodes,k),_r=(t,e)=>C.from(t.dom.childNodes[e]).map(k),fd=t=>_r(t,0),gd=t=>_r(t,t.dom.childNodes.length-1),pd=t=>t.dom.childNodes.length,hd=t=>l_(t)&&q(t.dom.host),Ag=Nt(Element.prototype.attachShadow)&&Nt(Node.prototype.getRootNode),c_=W(Ag),ro=Ag?t=>k(t.dom.getRootNode()):Vn,bd=t=>hd(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return k(n)})(Vn(t)),u_=t=>k(t.dom.host),Tg=t=>{if(c_()&&q(t.target)){const e=k(t.target);if(Fe(e)&&m_(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Be(n)}}return C.from(t.target)},m_=t=>q(t.dom.shadowRoot),kr=t=>{const e=He(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=ro(o);return hd(r)?C.some(r):C.none()})(k(e)).fold(()=>n.body.contains(e),Lf(kr,u_))};var Og=(t,e,n,o,r)=>t(n,o)?C.some(n):Nt(r)&&r(n)?C.none():e(n,o,r);const Wn=(t,e,n)=>{let o=t.dom;const r=Nt(n)?n:zt;for(;o.parentNode;){o=o.parentNode;const s=k(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},To=(t,e,n)=>Og((o,r)=>r(o),Wn,t,e,n),Bg=(t,e)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=k(o.childNodes[r]);if(e(s))return C.some(s);const a=n(o.childNodes[r]);if(a.isSome())return a}return C.none()};return n(t.dom)},_s=(t,e,n)=>Wn(t,o=>gn(o,e),n),ks=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return _g(r)?C.none():C.from(r.querySelector(n)).map(k)})(e,t),Oo=(t,e,n)=>Og((o,r)=>gn(o,r),_s,t,e,n),Bo=(t,e=!1)=>{return kr(t)?t.dom.isContentEditable:(n=t,Oo(n,"[contenteditable]")).fold(W(e),o=>"true"===f_(o));var n},f_=t=>t.dom.contentEditable,Ss=t=>void 0!==t.style&&Nt(t.style.getPropertyValue),Pg=(t,e,n)=>{if(!at(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ss(t)&&t.style.setProperty(e,n)},Dg=(t,e,n)=>{Pg(t.dom,e,n)},ti=(t,e)=>{const n=t.dom;Bt(e,(o,r)=>{Pg(n,r,o)})},Rn=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||kr(t)?o:Lg(n,e)},Lg=(t,e)=>Ss(t)?t.style.getPropertyValue(e):"",ei=(t,e)=>{const o=Lg(t.dom,e);return C.from(o).filter(r=>r.length>0)},vd=t=>{const e={},n=t.dom;if(Ss(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},Mg=(t,e)=>{var n,o;o=e,Ss(n=t.dom)&&n.style.removeProperty(o),Cr($n(t,"style").map(yr),"")&&ce(t,"style")},De=(t,e)=>{sn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Kn=(t,e)=>{Es(t).fold(()=>{sn(t).each(n=>{Yt(n,e)})},n=>{De(n,e)})},yd=(t,e)=>{fd(t).fold(()=>{Yt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Yt=(t,e)=>{t.dom.appendChild(e.dom)},Ig=(t,e)=>{De(t,e),Yt(e,t)},Po=(t,e)=>{U(e,n=>{Yt(t,n)})},Sr=t=>{t.dom.textContent="",U(ue(t),e=>{Dt(e)})},Dt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Yn=t=>{const e=ue(t);var n,o;e.length>0&&(n=t,U(o=e,(r,s)=>{Kn(0===s?n:o[s-1],r)})),Dt(t)},Cd=t=>Et(t,k),Fg=t=>t.dom.innerHTML,ni=(t,e)=>{const n=kg(t).dom,o=k(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ue(k(i))})(e,n);Po(o,r),Sr(t),Yt(t,o)},p_=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},Ug=(t,e)=>({left:t,top:e,translate:(n,o)=>Ug(t+n,e+o)}),Nr=Ug,oi=(t,e)=>void 0!==t?t:void 0!==e?e:0,wd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Nr(n.offsetLeft,n.offsetTop):kr(t)?(o=>{const r=o.getBoundingClientRect();return Nr(r.left,r.top)})(e):Nr(0,0)},xd=t=>{const e=void 0!==t?t.dom:document;return Nr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},zg=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},jg=(t,e)=>{kn().browser.isSafari()&&Nt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Hg=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),$g=t=>{const e=void 0===t?window:t,o=xd(k(e.document));return(r=>{const s=void 0===r?window:r;return kn().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Hg(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Hg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},qg=(t,e)=>{let n=[];return U(ue(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(qg(o,e))}),n},ve=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return _g(r)?[]:Et(r.querySelectorAll(n),k)})(e,t),Vg=(t,e,n)=>_s(t,e,n).isSome();class te{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const Do=t=>e=>!!e&&e.nodeType===t,ri=t=>!!t&&!Object.getPrototypeOf(t),Z=Do(1),Gn=t=>Z(t)&&Qa(k(t)),Ns=t=>{const e=t.toLowerCase();return n=>q(n)&&n.nodeName.toLowerCase()===e},pn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Rt(e,o)}return!1}},si=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(Z(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Wg=t=>e=>Z(e)&&e.hasAttribute(t),Lo=t=>Z(t)&&t.hasAttribute("data-mce-bogus"),Xn=t=>Z(t)&&"TABLE"===t.tagName,Kg=t=>e=>!(!Gn(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),Ed=pn(["textarea","input"]),j=Do(3),h_=Do(4),b_=Do(7),so=Do(8),Rs=Do(9),_d=Do(11),Ht=Ns("br"),Yg=Ns("img"),an=Kg("true"),Lt=Kg("false"),ai=pn(["td","th"]),v_=pn(["td","th","caption"]),An=pn(["video","audio","object","embed"]),y_=Ns("li"),kd=Ns("details"),C_=Ns("summary"),re="\xa0",Sd=t=>"\ufeff"===t,Nd=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(He),ii=t=>Nd.get(t),Gg=t=>Nd.getOption(t),Rr=t=>{let e;return n=>(e=e||ed(t,Kt),ht(e,xt(n)))},Mo=t=>Fe(t)&&"br"===xt(t),Xg=Rr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Rd=Rr(["ul","ol","dl"]),Ts=Rr(["li","dd","dt"]),w_=Rr(["thead","tbody","tfoot"]),Os=Rr(["td","th"]),li=Rr(["pre","script","textarea","style"]),Bs=()=>{const t=oe("br");return de(t,"data-mce-bogus","1"),t},ao=t=>{Sr(t),Yt(t,Bs())},se="\ufeff",di=Sd,ze=t=>t.replace(/\uFEFF/g,""),x_=Z,Ar=j,Tr=t=>(Ar(t)&&(t=t.parentNode),x_(t)&&t.hasAttribute("data-mce-caret")),io=t=>Ar(t)&&di(t.data),$e=t=>Tr(t)||io(t),Qg=t=>t.firstChild!==t.lastChild||!Ht(t.firstChild),Ad=t=>{const e=t.container();return!!j(e)&&(e.data.charAt(t.offset())===se||t.isAtStart()&&io(e.previousSibling))},Td=t=>{const e=t.container();return!!j(e)&&(e.data.charAt(t.offset()-1)===se||t.isAtEnd()&&io(e.nextSibling))},ci=t=>Ar(t)&&t.data[0]===se,ui=t=>Ar(t)&&t.data[t.data.length-1]===se,Od=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Lo(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Jg=t=>Tr(t.startContainer),Zg=an,E_=Lt,__=Ht,k_=j,S_=pn(["script","style","textarea"]),tp=pn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),N_=pn(["table"]),R_=$e,ln=t=>!R_(t)&&(k_(t)?!S_(t.parentNode):tp(t)||__(t)||N_(t)||Bd(t)),Bd=t=>{return!(Z(e=t)&&"true"===e.getAttribute("unselectable"))&&E_(t);var e},ep=(t,e)=>ln(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Bd(r))return!1;if(Zg(r))return!0}return!0})(t,e),A_=/^[ \t\r\n]*$/,lo=t=>A_.test(t),T_=t=>{for(const e of t)if(!Sd(e))return!1;return!0},np=t=>"\n"===t||"\r"===t,op=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Oe(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===re?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(c=i.str.length+1)<(d=s).length&&c>=0&&np(d[c])?{pcIsSpace:!1,str:i.str+re}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:np(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},mi=(t,e)=>{return ln(t)&&(o=e,!(j(n=t)&&lo(n.data)&&!((r,s)=>{const a=k(s),i=k(r);return Vg(i,"pre,code",J(kt,a))})(n,o)))||(n=>Z(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||O_(t);var n,o},O_=Wg("data-mce-bookmark"),B_=Wg("data-mce-bogus"),P_=t=>Z(t)&&"all"===t.getAttribute("data-mce-bogus"),D_=t=>Za(k(t)).exists(e=>!Bo(e)),Vt=(t,e=!0)=>((n,o)=>{let r=0;if(mi(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new te(s,n);do{if(o){if(P_(s)){s=a.next(!0);continue}if(B_(s)){s=a.next();continue}}if(an(s)&&D_(s))return!1;if(Ht(s))r++,s=a.next();else{if(mi(s,n))return!1;s=a.next()}}while(s);return r<=1}})(t.dom,e),Io=t=>"svg"===t.toLowerCase(),Pd=t=>Io(t.nodeName),rp=t=>"svg"===t?.nodeName?"svg":"html",L_=["svg"],fi="data-mce-block",Dd=t=>{return Et((e=t,gt(Pe(e),n=>!/[A-Z]/.test(n))),e=>`${e}:`+Et(L_,n=>`not(${n} ${e})`).join(":")).join(",");var e},sp=(t,e)=>q(e.querySelector(t))?(e.setAttribute(fi,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(fi),!1),ap=(t,e)=>{const n=Dd(t.getTransparentElements()),o=Dd(t.getBlockElements());return gt(e.querySelectorAll(n),r=>sp(o,r))},ip=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(Vt(k(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},Ld=(t,e)=>{const n=ap(t,e);var o,r,s;((t,e,n)=>{const o=t.getBlockElements(),r=k(e),s=i=>xt(i)in o,a=i=>kt(i,r);U(Cd(n),i=>{Wn(i,s,a).each(l=>{const d=gt(ue(i),m=>s(m)&&!t.isValidChild(xt(l),xt(m)));if(d.length>0){const c=Za(l);U(d,u=>{Wn(u,s,a).each(m=>{((p,f)=>{const h=document.createRange(),g=p.parentNode;if(g){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();ip(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();ip(v,!1),Vt(k(b))||g.insertBefore(b,p),Vt(k(f))||g.insertBefore(f,p),Vt(k(v))||g.insertBefore(v,p),g.removeChild(p)}})(m.dom,u.dom)})}),c.each(u=>ap(t,u.dom))}})})})(t,e,n),o=t,r=e,s=n,U([...s,...Fo(o,r)?[r]:[]],a=>U(ve(k(a),a.nodeName.toLowerCase()),i=>{F_(o,i.dom)&&Yn(i)}))},I_=(t,e)=>{if(Fd(t,e)){const n=Dd(t.getBlockElements());sp(n,e)}},Md=t=>t.hasAttribute(fi),Id=(t,e)=>ht(t.getTransparentElements(),e),Fd=(t,e)=>Z(e)&&Id(t,e.nodeName),Fo=(t,e)=>Fd(t,e)&&Md(e),F_=(t,e)=>Fd(t,e)&&!Md(e),Ud=(t,e)=>1===e.type&&Id(t,e.name)&&at(e.attr(fi)),U_=kn().browser,lp=t=>Zt(t,Fe),dp=(t,e)=>t.children&&Rt(t.children,e),cp=(t,e={})=>{let n=0;const o={},r=k(t),s=Vn(r),a=u=>{Yt(bd(r),u)},i=u=>{const m=bd(r);ks(m,"#"+u).each(Dt)},l=u=>Pt(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),d=u=>new Promise((m,p)=>{let f;const h=H._addCacheSuffix(u),g=l(h);o[h]=g,g.count++;const b=(w,E)=>{U(w,ds),g.status=E,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},v=()=>b(g.passed,2),y=()=>b(g.failed,3);if(m&&g.passed.push(m),p&&g.failed.push(p),1===g.status)return;if(2===g.status)return void v();if(3===g.status)return void y();g.status=1;const x=oe("link",s.dom);Hn(x,{rel:"stylesheet",type:"text/css",id:g.id}),e.contentCssCors&&de(x,"crossOrigin","anonymous"),e.referrerPolicy&&de(x,"referrerpolicy",e.referrerPolicy),f=x.dom,f.onload=v,f.onerror=y,a(x),de(x,"href",h)}),c=u=>{const m=H._addCacheSuffix(u);Pt(o,m).each(p=>{0==--p.count&&(delete o[m],i(p.id))})};return{load:d,loadRawCss:(u,m)=>{const p=l(u);o[u]=p,p.count++;const f=oe("style",s.dom);Hn(f,{rel:"stylesheet",type:"text/css",id:p.id}),f.dom.innerHTML=m,a(f)},loadAll:u=>Promise.allSettled(Et(u,m=>d(m).then(W(m)))).then(m=>{const p=hr(m,f=>"fulfilled"===f.status);return p.fail.length>0?Promise.reject(Et(p.fail,f=>f.reason)):Et(p.pass,f=>f.value)}),unload:c,unloadRawCss:u=>{Pt(o,u).each(m=>{0==--m.count&&(delete o[u],i(m.id))})},unloadAll:u=>{U(u,m=>{c(m)})},_setReferrerPolicy:u=>{e.referrerPolicy=u},_setContentCssCors:u=>{e.contentCssCors=u}}},up=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=ro(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=cp(o,n);return t.set(o,r),r})}}})(),mp=(t,e,n)=>q(t)&&(mi(t,e)||n.isInline(t.nodeName.toLowerCase())),fp=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),zd=(t,e,n,o)=>{var r;const s=o||e;if(Z(e)&&fp(e))return e;const a=e.childNodes;for(let i=a.length-1;i>=0;i--)zd(t,a[i],n,s);if(Z(e)){const i=e.childNodes;1===i.length&&fp(i[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(i[0],e))}return _d(i=e)||Rs(i)||mi(e,s)||(i=>!!Z(i)&&i.childNodes.length>0)(e)||((i,l,d)=>j(i)&&i.data.length>0&&((c,u,m)=>{const p=new te(c,u).prev(!1),f=new te(c,u).next(!1),h=fe(p)||mp(p,u,m),g=fe(f)||mp(f,u,m);return h&&g})(i,l,d))(e,s,n)||t.remove(e),e;var i},z_=H.makeMap,gi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j_=/[<>&\"\']/g,H_=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,$_={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Uo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},q_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},gp=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Uo[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},jd=gp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),pp=(t,e)=>t.replace(e?gi:pi,n=>Uo[n]||n),hp=(t,e)=>t.replace(e?gi:pi,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Uo[n]||"&#"+n.charCodeAt(0)+";"),Hd=(t,e,n)=>{const o=n||jd;return t.replace(e?gi:pi,r=>Uo[r]||o[r]||r)},zo={encodeRaw:pp,encodeAllRaw:t=>(""+t).replace(j_,e=>Uo[e]||e),encodeNumeric:hp,encodeNamed:Hd,getEncodeFunc:(t,e)=>{const n=gp(e)||jd,o=z_(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?gi:pi,a=>void 0!==Uo[a]?Uo[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>Hd(r,s,n):Hd:o.numeric?hp:pp},decode:t=>t.replace(H_,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):$_[n]||String.fromCharCode(n):q_[e]||jd[e]||(o=>{const r=oe("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},ge=(t,e)=>(t=H.trim(t))?t.split(e||" "):[],bp=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),hi={},Ps=H.makeMap,hn=H.each,$d=H.extend,vp=H.explode,yp=(t,e={})=>{const n=Ps(t," ",Ps(t.toUpperCase()," "));return $d(n,e)},Cp=t=>yp("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),qd=(t,e)=>{if(t){const n={};return at(t)&&(t={"*":t}),hn(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?Ps(o,/[, ]/):vp(o,/[, ]/)}),n}},co=(t={})=>{var e;const n={},o={};let r=[];const s={},a={},i=(tt,bt,Ct)=>{const pt=t[tt];if(pt)return Ps(pt,/[, ]/,Ps(pt.toUpperCase(),/[, ]/));{let wt=hi[tt];return wt||(wt=yp(bt,Ct),hi[tt]=wt),wt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(tt=>{const{globalAttributes:bt,phrasingContent:Ct,flowContent:pt}=(It=>{let Xt,me,ke;Xt="id accesskey class dir lang style tabindex title role",me="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",ke="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==It&&(Xt+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",me+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",ke+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==It&&(Xt+=" xml:lang",ke=[ke,"acronym applet basefont big font strike tt"].join(" "),me=[me,"center dir isindex noframes"].join(" "));const tn=[me,ke].join(" ");return{globalAttributes:Xt,blockContent:me,phrasingContent:ke,flowContent:tn}})(tt),wt={},ne=(It,Xt,me)=>{wt[It]={attributes:ed(Xt,W({})),attributesOrder:Xt,children:ed(me,W({}))}},st=(It,Xt="",me="")=>{const ke=ge(me),tn=ge(It);let pe=tn.length;const en=ge([bt,Xt].join(" "));for(;pe--;)ne(tn[pe],en.slice(),ke)},yt=(It,Xt)=>{const me=ge(It),ke=ge(Xt);let tn=me.length;for(;tn--;){const pe=wt[me[tn]];for(let en=0,Qt=ke.length;en<Qt;en++)pe.attributes[ke[en]]={},pe.attributesOrder.push(ke[en])}};return"html5-strict"!==tt&&(U(ge("acronym applet basefont big font strike tt"),It=>{st(It,"",Ct)}),U(ge("center dir isindex noframes"),It=>{st(It,"",pt)})),st("html","manifest","head body"),st("head","","base command link meta noscript script style title"),st("title hr noscript br"),st("base","href target"),st("link","href rel media hreflang type sizes hreflang"),st("meta","name http-equiv content charset"),st("style","media type scoped"),st("script","src async defer type charset"),st("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",pt),st("dd div","",pt),st("address dt caption","","html4"===tt?Ct:pt),st("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Ct),st("blockquote","cite",pt),st("ol","reversed start type","li"),st("ul","","li"),st("li","value",pt),st("dl","","dt dd"),st("a","href target rel media hreflang type","html4"===tt?Ct:pt),st("q","cite",Ct),st("ins del","cite datetime",pt),st("img","src sizes srcset alt usemap ismap width height"),st("iframe","src name width height",pt),st("embed","src type width height"),st("object","data type typemustmatch name usemap form width height",[pt,"param"].join(" ")),st("param","name value"),st("map","name",[pt,"area"].join(" ")),st("area","alt coords shape href target rel media hreflang type"),st("table","border","caption colgroup thead tfoot tbody tr"+("html4"===tt?" col":"")),st("colgroup","span","col"),st("col","span"),st("tbody thead tfoot","","tr"),st("tr","","td th"),st("td","colspan rowspan headers",pt),st("th","colspan rowspan headers scope abbr",pt),st("form","accept-charset action autocomplete enctype method name novalidate target",pt),st("fieldset","disabled form name",[pt,"legend"].join(" ")),st("label","form for",Ct),st("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),st("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===tt?pt:Ct),st("select","disabled form multiple name required size","option optgroup"),st("optgroup","disabled label","option"),st("option","disabled label selected value"),st("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),st("menu","type label",[pt,"li"].join(" ")),st("noscript","",pt),"html4"!==tt&&(st("wbr"),st("ruby","",[Ct,"rt rp"].join(" ")),st("figcaption","",pt),st("mark rt rp bdi","",Ct),st("summary","",[Ct,"h1 h2 h3 h4 h5 h6"].join(" ")),st("canvas","width height",pt),st("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[pt,"track source"].join(" ")),st("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[pt,"track source"].join(" ")),st("picture","","img source"),st("source","src srcset type media sizes"),st("track","kind src srclang label default"),st("datalist","",[Ct,"option"].join(" ")),st("article section nav aside main header footer","",pt),st("hgroup","","h1 h2 h3 h4 h5 h6"),st("figure","",[pt,"figcaption"].join(" ")),st("time","datetime",Ct),st("dialog","open",pt),st("command","type label icon disabled checked radiogroup command"),st("output","for form name",Ct),st("progress","value max",Ct),st("meter","value min max low high optimum",Ct),st("details","open",[pt,"summary"].join(" ")),st("keygen","autofocus challenge disabled form keytype name"),ne("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==tt&&(yt("script","language xml:space"),yt("style","xml:space"),yt("object","declare classid code codebase codetype archive standby align border hspace vspace"),yt("embed","align name hspace vspace"),yt("param","valuetype type"),yt("a","charset name rev shape coords"),yt("br","clear"),yt("applet","codebase archive code object alt name width height align hspace vspace"),yt("img","name longdesc align border hspace vspace"),yt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),yt("font basefont","size color face"),yt("input","usemap align"),yt("select"),yt("textarea"),yt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),yt("ul","type compact"),yt("li","type"),yt("ol dl menu dir","compact"),yt("pre","width xml:space"),yt("hr","align noshade size width"),yt("isindex","prompt"),yt("table","summary width frame rules cellspacing cellpadding align bgcolor"),yt("col","width align char charoff valign"),yt("colgroup","width align char charoff valign"),yt("thead","align char charoff valign"),yt("tr","align char charoff valign bgcolor"),yt("th","axis align char charoff valign nowrap bgcolor width height"),yt("form","accept"),yt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),yt("tfoot","align char charoff valign"),yt("tbody","align char charoff valign"),yt("area","nohref"),yt("body","background bgcolor text link vlink alink")),"html4"!==tt&&(yt("input button select textarea","autofocus"),yt("input textarea","placeholder"),yt("a","download"),yt("link script img","crossorigin"),yt("img","loading"),yt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==tt&&U([wt.video,wt.audio],It=>{delete It.children.audio,delete It.children.video}),U(ge("a form meter progress dfn"),It=>{wt[It]&&delete wt[It].children[It]}),delete wt.caption.children.table,delete wt.script,wt})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=qd(t.valid_styles),u=qd(t.invalid_styles,"map"),m=qd(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre svg",h),y=i("move_caret_before_on_enter_elements",b+" table",h),x="h1 h2 h3 h4 h5 h6",w=i("text_block_elements",x+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),E=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),N=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),T=i("transparent_elements","a ins del canvas map"),O=i("wrap_block_elements","pre "+x);hn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),tt=>{a[tt]=new RegExp("</"+tt+"[^>]*>","gi")});const P=tt=>{const bt=C.from(n["@"]),Ct=/[*?+]/;U(((pt,wt)=>{const ne=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return rn(ge(wt,","),st=>{const yt=ne.exec(st);if(yt){const It=yt[1],Xt=yt[2],me=yt[3],ke=yt[4],tn=yt[5],pe={attributes:{},attributesOrder:[]};if(pt.each(en=>{return no=pe,Bt((Qt=en).attributes,(nn,mn)=>{no.attributes[mn]=nn}),void no.attributesOrder.push(...Qt.attributesOrder);var Qt,no}),"#"===It?pe.paddEmpty=!0:"-"===It&&(pe.removeEmpty=!0),"!"===ke&&(pe.removeEmptyAttrs=!0),tn&&((en,Qt)=>{const no=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,nn=/[*?+]/,{attributes:mn,attributesOrder:ur}=Qt;U(ge(en,"|"),Ua=>{const mr=no.exec(Ua);if(mr){const on={},Kl=mr[1],Ft=mr[2].replace(/[\\:]:/g,":"),xn=mr[3],fr=mr[4];if("!"===Kl&&(Qt.attributesRequired=Qt.attributesRequired||[],Qt.attributesRequired.push(Ft),on.required=!0),"-"===Kl)return delete mn[Ft],void ur.splice(H.inArray(ur,Ft),1);if(xn&&("="===xn?(Qt.attributesDefault=Qt.attributesDefault||[],Qt.attributesDefault.push({name:Ft,value:fr}),on.defaultValue=fr):"~"===xn?(Qt.attributesForced=Qt.attributesForced||[],Qt.attributesForced.push({name:Ft,value:fr}),on.forcedValue=fr):"<"===xn&&(on.validValues=H.makeMap(fr,"?"))),nn.test(Ft)){const za=on;Qt.attributePatterns=Qt.attributePatterns||[],za.pattern=bp(Ft),Qt.attributePatterns.push(za)}else mn[Ft]||ur.push(Ft),mn[Ft]=on}})})(tn,pe),me&&(pe.outputName=Xt),"@"===Xt){if(!pt.isNone())return[];pt=C.some(pe)}return[me?{name:Xt,element:pe,aliasName:me}:{name:Xt,element:pe}]}return[]})})(bt,tt??""),({name:pt,element:wt,aliasName:ne})=>{if(ne&&(n[ne]=wt),Ct.test(pt)){const st=wt;st.pattern=bp(pt),r.push(st)}else n[pt]=wt})},_=tt=>{r=[],U(Pe(n),bt=>{delete n[bt]}),P(tt)},R=tt=>{delete hi.text_block_elements,delete hi.block_elements,U((bt=>{const Ct=/^(~)?(.+)$/;return rn(ge(bt,","),pt=>{const wt=Ct.exec(pt);if(wt){const ne="~"===wt[1];return[{inline:ne,cloneName:ne?"span":"div",name:wt[2]}]}return[]})})(tt??""),({inline:bt,name:Ct,cloneName:pt})=>{if(o[Ct]=o[pt],s[Ct]=pt,v[Ct.toUpperCase()]={},v[Ct]={},bt||(E[Ct.toUpperCase()]={},E[Ct]={}),!n[Ct]){let wt=n[pt];wt=$d({},wt),delete wt.removeEmptyAttrs,delete wt.removeEmpty,n[Ct]=wt}Bt(o,(wt,ne)=>{wt[pt]&&(o[ne]=wt=$d({},o[ne]),wt[Ct]=wt[pt])})})},B=tt=>{U((bt=>{const Ct=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return rn(ge(bt,","),pt=>{const wt=Ct.exec(pt);if(wt){const ne=wt[1];return[{operation:ne?(yt=ne,"-"===yt?"remove":"add"):"replace",name:wt[2],validChildren:ge(wt[3],"|")}]}var yt;return[]})})(tt??""),({operation:bt,name:Ct,validChildren:pt})=>{const wt="replace"===bt?{"#comment":{}}:o[Ct];U(pt,ne=>{"remove"===bt?delete wt[ne]:wt[ne]={}}),o[Ct]=wt})},M=tt=>{const bt=n[tt];if(bt)return bt;let Ct=r.length;for(;Ct--;){const pt=r[Ct];if(pt.pattern.test(tt))return pt}};t.valid_elements?(_(t.valid_elements),hn(d,(tt,bt)=>{o[bt]=tt.children})):(hn(d,(tt,bt)=>{n[bt]={attributes:tt.attributes,attributesOrder:tt.attributesOrder},o[bt]=tt.children}),hn(ge("strong/b em/i"),tt=>{const bt=ge(tt,"/");n[bt[1]].outputName=bt[0]}),hn(N,(tt,bt)=>{n[bt]&&(t.padd_empty_block_inline_children&&(n[bt].paddInEmptyBlock=!0),n[bt].removeEmpty=!0)}),hn(ge("ol ul blockquote a table tbody"),tt=>{n[tt]&&(n[tt].removeEmpty=!0)}),hn(ge("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),tt=>{n[tt]&&(n[tt].paddEmpty=!0)}),hn(ge("span"),tt=>{n[tt].removeEmptyAttrs=!0})),delete n.svg,R(t.custom_elements),B(t.valid_children),P(t.extended_valid_elements),B("+ol[ul|ol],+ul[ul|ol]"),hn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(tt,bt)=>{n[bt]&&(n[bt].parentsRequired=ge(tt))}),t.invalid_elements&&hn(vp(t.invalid_elements),tt=>{n[tt]&&delete n[tt]}),M("span")||P("span[!data-mce-type|*]");const V=W(c),$=W(u),ot=W(m),et=W(g),lt=W(E),rt=W(w),K=W(N),X=W(Object.seal(h)),mt=W(f),S=W(v),A=W(y),I=W(p),F=W(T),z=W(O),Q=W(Object.seal(a)),it=(tt,bt)=>{const Ct=M(tt);if(Ct){if(!bt)return!0;{if(Ct.attributes[bt])return!0;const pt=Ct.attributePatterns;if(pt){let wt=pt.length;for(;wt--;)if(pt[wt].pattern.test(bt))return!0}}}return!1},ft=tt=>ht(lt(),tt),dt=tt=>!le(tt,"#")&&it(tt)&&!ft(tt),Tt=W(s);return{type:l,children:o,elements:n,getValidStyles:V,getValidClasses:ot,getBlockElements:lt,getInvalidStyles:$,getVoidElements:X,getTextBlockElements:rt,getTextInlineElements:K,getBoolAttrs:et,getElementRule:M,getSelfClosingElements:mt,getNonEmptyElements:S,getMoveCaretBeforeOnEnterElements:A,getWhitespaceElements:I,getTransparentElements:F,getSpecialElements:Q,isValidChild:(tt,bt)=>{const Ct=o[tt.toLowerCase()];return!(!Ct||!Ct[bt.toLowerCase()])},isValid:it,isBlock:ft,isInline:dt,isWrapper:tt=>ht(z(),tt)||dt(tt),getCustomElements:Tt,addValidElements:P,setValidElements:_,addCustomElements:R,addValidChildren:B}},Vd=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},V_=t=>{return{value:(n=Vd(t.red)+Vd(t.green)+Vd(t.blue),Gf(n,"#").toUpperCase())};var n},W_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,K_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,wp=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),xp=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(o);return wp(r,s,a,i)},Ep=t=>{if("transparent"===t)return C.some(wp(0,0,0,0));const e=W_.exec(t);if(null!==e)return C.some(xp(e[1],e[2],e[3],"1"));const n=K_.exec(t);return null!==n?C.some(xp(n[1],n[2],n[3],n[4])):C.none()},Y_=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Ds=t=>Ep(t).map(V_).map(e=>"#"+e.value).getOr(t),Wd=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<d.length;u++)s[d[u]]="\ufeff"+u,s["\ufeff"+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||c,g=(P,_,R)=>{const B=m[P+"-top"+_];if(!B)return;const M=m[P+"-right"+_];if(!M)return;const V=m[P+"-bottom"+_];if(!V)return;const $=m[P+"-left"+_];if(!$)return;const ot=[B,M,V,$];let et=ot.length-1;for(;et--&&ot[et]===ot[et+1];);et>-1&&R||(m[P+_]=-1===et?ot[0]:ot.join(" "),delete m[P+"-top"+_],delete m[P+"-right"+_],delete m[P+"-bottom"+_],delete m[P+"-left"+_])},b=P=>{const _=m[P];if(!_)return;const R=_.indexOf(",")>-1?[_]:_.split(" ");let B=R.length;for(;B--;)if(R[B]!==R[0])return!1;return m[P]=R[0],!0},v=P=>(p=!0,s[P]),y=(P,_)=>(p&&(P=P.replace(/\uFEFF[0-9]/g,R=>s[R])),_||(P=P.replace(/\\([\'\";:])/g,"$1")),P),x=P=>String.fromCharCode(parseInt(P.slice(1),16)),w=P=>P.replace(/\\[0-9a-f]+/gi,x),E=(P,_,R,B,M,V)=>{if(M=M||V)return"'"+(M=y(M)).replace(/\'/g,"\\'")+"'";if(_=y(_||R||B||""),!t.allow_script_urls){const $=_.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test($)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test($))return""}return f&&(_=f.call(h,_,"style")),"url('"+_.replace(/\'/g,"\\'")+"')"};if(u){let P;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,_=>_.replace(/[;:]/g,v));P=o.exec(u);){o.lastIndex=P.index+P[0].length;let _=P[1].replace(r,"").toLowerCase(),R=P[2].replace(r,"");if(_&&R){if(_=w(_),R=w(R),-1!==_.indexOf("\ufeff")||-1!==_.indexOf('"')||!t.allow_script_urls&&("behavior"===_||/expression\s*\(|\/\*|\*\//.test(R)))continue;"font-weight"===_&&"700"===R?R="bold":"color"!==_&&"background-color"!==_||(R=R.toLowerCase()),at(t.force_hex_color)&&"off"!==t.force_hex_color&&Ep(R).each(B=>{"always"!==t.force_hex_color&&1!==B.alpha||(R=Ds(Y_(B)))}),R=R.replace(n,E),m[_]=p?y(R,!0):R}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),T="border-style",O="border-color",b(N="border-width")&&b(T)&&b(O)&&(m.border=m[N]+" "+m[T]+" "+m[O],delete m[N],delete m[T],delete m[O]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var N,T,O;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const x=b[v],w=u[x];w&&(p+=(p.length>0?" ":"")+x+": "+w+";")}};return m&&a?(f("*",a),f(m,a)):Bt(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},G_={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},_p=(t,e)=>{const n=e??{};for(const o in t)ht(G_,o)||(n[o]=t[o]);return q(t.composedPath)&&(n.composedPath=()=>t.composedPath()),q(t.getModifierState)&&(n.getModifierState=o=>t.getModifierState(o)),q(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},Kd=(t,e,n,o)=>{var r;const s=_p(e,o);return s.type=t,Gt(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(Gt((a=e).preventDefault)||(i=a)instanceof Event||Nt(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Kt,Nt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Kt,Nt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Kt,s.stopPropagation()},(a=>a.isDefaultPrevented===Kt||a.isDefaultPrevented===zt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Kt:zt,s.isPropagationStopped=!0===s.cancelBubble?Kt:zt,s.isImmediatePropagationStopped=zt)),s;var a,i},X_=/^(?:mouse|contextmenu)|click/,Yd=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},bi=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Ls=(t,e)=>{const n=Kd(t.type,t,document,e);if(q(o=t)&&X_.test(o.type)&&fe(t.pageX)&&!fe(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},Q_=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{bi(t,"DOMContentLoaded",s),bi(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Yd(t,"DOMContentLoaded",s),n.domLoaded||Yd(t,"load",s)};class jo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a;const i=window,l=m=>{s.executeHandlers(Ls(m||i.event),d)};if(!e||j(e)||so(e))return o;let d;e[s.expando]?d=e[s.expando]:(d=s.count++,e[s.expando]=d,s.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),s.domLoaded&&"ready"===m&&"complete"===e.readyState?o.call(r,Ls({type:m})):(s.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=Ls(g||i.event);b.type="focus"===b.type?"focusin":"focusout",s.executeHandlers(b,d)}),a=s.events[d][m],a?"ready"===m&&s.domLoaded?o(Ls({type:m})):a.push({func:o,scope:r}):(s.events[d][m]=a=[{func:o,scope:r}],a.fakeName=h,a.capture=f,a.nativeHandler=p,"ready"===m?Q_(e,p,s):Yd(e,h||m,p,f)))}return e=a=null,o}unbind(e,n,o){if(!e||j(e)||so(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],d=s[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,s[l]=f}}o&&0!==d.length||(delete s[l],bi(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else Bt(s,(a,i)=>{bi(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(ht(s,a))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||j(e)||so(e))return this;const r=Ls({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||j(e)||so(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}jo.Event=new jo;const Gd=H.each,J_=H.grep,Xd="data-mce-style",Z_=H.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ms=(t,e,n)=>{Gt(n)||""===n?ce(t,e):de(t,e,n)},kp=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Or=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!j(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Sp=(t,e)=>{const n=Ue(e,"style"),o=t.serialize(t.parse(n),xt(e));Ms(e,Xd,o)},Np=(t,e,n)=>{const o=kp(e);var r,s;Gt(n)||""===n?Mg(t,o):Dg(t,o,(s=o,fn(r=n)?ht(Z_,s)?r+"":r+"px":r))},Ot=(t,e={})=>{const n={},o=window,r={};let s=0;const a=up.forElement(k(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:co({}),d=Wd({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope,force_hex_color:e.force_hex_color},e.schema),c=e.ownEvents?new jo:jo.Event,u=l.getBlockElements(),m=S=>S&&t&&at(S)?t.getElementById(S):S,p=S=>{const A=m(S);return q(A)?k(A):null},f=(S,A,I="")=>{let F;const z=p(S);if(q(z)&&Fe(z)){const Q=mt[A];F=Q&&Q.get?Q.get(z.dom,A):Ue(z,A)}return q(F)?F:I},h=S=>{const A=m(S);return Gt(A)?[]:A.attributes},g=(S,A,I)=>{T(S,F=>{if(Z(F)){const z=k(F),Q=""===I?null:I,it=Ue(z,A),ft=mt[A];ft&&ft.set?ft.set(z.dom,Q,A):Ms(z,A,Q),it!==Q&&e.onSetAttrib&&e.onSetAttrib({attrElm:z.dom,attrName:A,attrValue:Q})}})},b=()=>e.root_element||t.body,v=(S,A)=>((I,F,z)=>{let Q=0,it=0;const ft=I.ownerDocument;if(z=z||I,F){if(z===I&&F.getBoundingClientRect&&"static"===Rn(k(I),"position")){const Tt=F.getBoundingClientRect();return Q=Tt.left+(ft.documentElement.scrollLeft||I.scrollLeft)-ft.documentElement.clientLeft,it=Tt.top+(ft.documentElement.scrollTop||I.scrollTop)-ft.documentElement.clientTop,{x:Q,y:it}}let dt=F;for(;dt&&dt!==z&&dt.nodeType&&!dp(dt,z);)Q+=dt.offsetLeft||0,it+=dt.offsetTop||0,dt=dt.offsetParent;for(dt=F.parentNode;dt&&dt!==z&&dt.nodeType&&!dp(dt,z);)Q-=dt.scrollLeft||0,it-=dt.scrollTop||0,dt=dt.parentNode;it+=(Tt=k(F),U_.isFirefox()&&"table"===xt(Tt)?lp(ue(Tt)).filter(tt=>"caption"===xt(tt)).bind(tt=>lp(Rg(tt)).map(bt=>bt.dom.offsetTop<=tt.dom.offsetTop?-tt.dom.offsetHeight:0)).getOr(0):0)}var Tt;return{x:Q,y:it}})(t.body,m(S),A),y=(S,A,I)=>{const F=m(S);var z;if(!Gt(F)&&(Gn(F)||Z(z=F)&&"http://www.w3.org/2000/svg"===z.namespaceURI))return I?Rn(k(F),kp(A)):("float"===(A=A.replace(/-(\D)/g,(Q,it)=>it.toUpperCase()))&&(A="cssFloat"),F.style?F.style[A]:void 0)},x=S=>{const A=m(S);if(!A)return{w:0,h:0};let I=y(A,"width"),F=y(A,"height");return I&&-1!==I.indexOf("px")||(I="0"),F&&-1!==F.indexOf("px")||(F="0"),{w:parseInt(I,10)||A.offsetWidth||A.clientWidth,h:parseInt(F,10)||A.offsetHeight||A.clientHeight}},w=(S,A)=>{if(!S)return!1;const I=Jt(S)?S:[S];return $t(I,F=>gn(k(F),A))},E=(S,A,I,F)=>{const z=[];let Q=m(S);F=void 0===F;const it=I||("BODY"!==b().nodeName?b().parentNode:null);if(at(A))if("*"===A)A=Z;else{const ft=A;A=dt=>w(dt,ft)}for(;Q&&!(Q===it||Gt(Q.nodeType)||Rs(Q)||_d(Q));){if(!A||A(Q)){if(!F)return[Q];z.push(Q)}Q=Q.parentNode}return F?z:null},N=(S,A,I)=>{let F=A;if(S){at(A)&&(F=z=>w(z,A));for(let z=S[I];z;z=z[I])if(Nt(F)&&F(z))return z}return null},T=function(S,A,I){const F=I??this;if(Jt(S)){const z=[];return Gd(S,(Q,it)=>{const ft=m(Q);ft&&z.push(A.call(F,ft,it))}),z}{const z=m(S);return!!z&&A.call(F,z)}},O=(S,A)=>{T(S,I=>{Bt(A,(F,z)=>{g(I,z,F)})})},P=(S,A)=>{T(S,I=>{const F=k(I);ni(F,A)})},_=(S,A,I,F,z)=>T(S,Q=>{const it=at(A)?t.createElement(A):A;return q(I)&&O(it,I),F&&(!at(F)&&F.nodeType?it.appendChild(F):at(F)&&P(it,F)),z?it:Q.appendChild(it)}),R=(S,A,I)=>_(t.createElement(S),S,A,I,!0),B=zo.encodeAllRaw,M=(S,A)=>T(S,I=>{const F=k(I);return A&&U(ue(F),z=>{He(z)&&0===z.dom.length?Dt(z):De(F,z)}),Dt(F),F.dom}),V=(S,A,I)=>{T(S,F=>{if(Z(F)){const z=k(F),Q=A.split(" ");U(Q,it=>{var ft,dt,tt,bt;q(I)?(I?xr:ys)(z,it):(dt=it,vs(ft=z)?ft.dom.classList.toggle(dt):(bt=dt,Rt(yg(tt=ft),bt)?wg(tt,bt):Cg(tt,bt)),xg(ft))})}})},$=(S,A,I)=>T(A,F=>{var z;const Q=Jt(A)?S.cloneNode(!0):S;return I&&Gd(J_(F.childNodes),it=>{Q.appendChild(it)}),null===(z=F.parentNode)||void 0===z||z.replaceChild(Q,F),F}),ot=S=>{if(Z(S)){const A="a"===S.nodeName.toLowerCase()&&!f(S,"href")&&f(S,"id");if(f(S,"name")||f(S,"data-mce-bookmark")||A)return!0}return!1},et=()=>t.createRange(),lt=(S,A,I,F)=>{if(Jt(S)){let z=S.length;const Q=[];for(;z--;)Q[z]=lt(S[z],A,I,F);return Q}return!e.collect||S!==t&&S!==o||i.push([S,A,I,F]),c.bind(S,A,I,F||X)},rt=(S,A,I)=>{if(Jt(S)){let F=S.length;const z=[];for(;F--;)z[F]=rt(S[F],A,I);return z}if(i.length>0&&(S===t||S===o)){let F=i.length;for(;F--;){const[z,Q,it]=i[F];S!==z||A&&A!==Q||I&&I!==it||c.unbind(z,Q,it)}}return c.unbind(S,A,I)},K=S=>{if(S&&Gn(S)){const A=S.getAttribute("data-mce-contenteditable");return A&&"inherit"!==A?A:"inherit"!==S.contentEditable?S.contentEditable:null}return null},X={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:S=>at(S)?ht(u,S):Z(S)&&(ht(u,S.nodeName)||Fo(l,S)),root:null,clone:(S,A)=>S.cloneNode(A),getRoot:b,getViewPort:S=>{const A=$g(S);return{x:A.x,y:A.y,w:A.width,h:A.height}},getRect:S=>{const A=m(S),I=v(A),F=x(A);return{x:I.x,y:I.y,w:F.w,h:F.h}},getSize:x,getParent:(S,A,I)=>{const F=E(S,A,I,!1);return F&&F.length>0?F[0]:null},getParents:E,get:m,getNext:(S,A)=>N(S,A,"nextSibling"),getPrev:(S,A)=>N(S,A,"previousSibling"),select:(S,A)=>{var I,F;const z=null!==(F=null!==(I=m(A))&&void 0!==I?I:e.root_element)&&void 0!==F?F:t;return Nt(z.querySelectorAll)?Ie(z.querySelectorAll(S)):[]},is:w,add:_,create:R,createHTML:(S,A,I="")=>{let F="<"+S;for(const z in A)vr(A,z)&&(F+=" "+z+'="'+B(A[z])+'"');return hs(I)&&ht(l.getVoidElements(),S)?F+" />":F+">"+I+"</"+S+">"},createFragment:S=>{const A=t.createElement("div"),I=t.createDocumentFragment();let F;for(I.appendChild(A),S&&(A.innerHTML=S);F=A.firstChild;)I.appendChild(F);return I.removeChild(A),I},remove:M,setStyle:(S,A,I)=>{T(S,F=>{const z=k(F);Np(z,A,I),e.update_styles&&Sp(d,z)})},getStyle:y,setStyles:(S,A)=>{T(S,I=>{const F=k(I);Bt(A,(z,Q)=>{Np(F,Q,z)}),e.update_styles&&Sp(d,F)})},removeAllAttribs:S=>T(S,A=>{const I=A.attributes;for(let F=I.length-1;F>=0;F--)A.removeAttributeNode(I.item(F))}),setAttrib:g,setAttribs:O,getAttrib:f,getPos:v,parseStyle:S=>d.parse(S),serializeStyle:(S,A)=>d.serialize(S,A),addStyle:S=>{if(X!==Ot.DOM&&t===document){if(n[S])return;n[S]=!0}let A=t.getElementById("mceDefaultStyles");if(!A){A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const I=t.head;I.firstChild?I.insertBefore(A,I.firstChild):I.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=S:A.appendChild(t.createTextNode(S))},loadCSS:S=>{S||(S=""),U(S.split(","),A=>{r[A]=!0,a.load(A).catch(vt)})},addClass:(S,A)=>{V(S,A,!0)},removeClass:(S,A)=>{V(S,A,!1)},hasClass:(S,A)=>{const I=p(S),F=A.split(" ");return q(I)&&zn(F,z=>md(I,z))},toggleClass:V,show:S=>{T(S,A=>Mg(k(A),"display"))},hide:S=>{T(S,A=>Dg(k(A),"display","none"))},isHidden:S=>{const A=p(S);return q(A)&&Cr(ei(A,"display"),"none")},uniqueId:S=>(S||"mce_")+s++,setHTML:P,getOuterHTML:S=>{const A=p(S);return q(A)?Z(A.dom)?A.dom.outerHTML:(I=>{const F=oe("div"),z=k(I.dom.cloneNode(!0));return Yt(F,z),Fg(F)})(A):""},setOuterHTML:(S,A)=>{T(S,I=>{Z(I)&&(I.outerHTML=A)})},decode:zo.decode,encode:B,insertAfter:(S,A)=>{const I=m(A);return T(S,F=>{const z=I?.parentNode,Q=I?.nextSibling;return z&&(Q?z.insertBefore(F,Q):z.appendChild(F)),F})},replace:$,rename:(S,A)=>{if(S.nodeName!==A.toUpperCase()){const I=R(A);return Gd(h(S),F=>{g(I,F.nodeName,f(S,F.nodeName))}),$(I,S,!0),I}return S},findCommonAncestor:(S,A)=>{let I=S;for(;I;){let F=A;for(;F&&I!==F;)F=F.parentNode;if(I===F)break;I=I.parentNode}return!I&&S.ownerDocument?S.ownerDocument.documentElement:I},run:T,getAttribs:h,isEmpty:(S,A,I)=>{let F=0;if(ot(S))return!1;const z=S.firstChild;if(z){const Q=new te(z,S),it=l?l.getWhitespaceElements():{},ft=A||(l?l.getNonEmptyElements():null);let dt=z;do{if(Z(dt)){const Tt=dt.getAttribute("data-mce-bogus");if(Tt){dt=Q.next("all"===Tt);continue}const tt=dt.nodeName.toLowerCase();if(ft&&ft[tt]){if("br"===tt){F++,dt=Q.next();continue}return!1}if(ot(dt))return!1}if(so(dt)||j(dt)&&!lo(dt.data)&&(!I?.includeZwsp||!T_(dt.data))||j(dt)&&dt.parentNode&&it[dt.parentNode.nodeName]&&lo(dt.data))return!1;dt=Q.next()}while(dt)}return F<=1},createRng:et,nodeIndex:Or,split:(S,A,I)=>{let F,z,Q=et();if(S&&A&&S.parentNode&&A.parentNode){const it=S.parentNode;return Q.setStart(it,Or(S)),Q.setEnd(A.parentNode,Or(A)),F=Q.extractContents(),Q=et(),Q.setStart(A.parentNode,Or(A)+1),Q.setEnd(it,Or(S)+1),z=Q.extractContents(),it.insertBefore(zd(X,F,l),S),it.insertBefore(I||A,S),it.insertBefore(zd(X,z,l),S),M(S),I||A}},bind:lt,unbind:rt,fire:(S,A,I)=>c.dispatch(S,A,I),dispatch:(S,A,I)=>c.dispatch(S,A,I),getContentEditable:K,getContentEditableParent:S=>{const A=b();let I=null;for(let F=S;F&&F!==A&&(I=K(F),null===I);F=F.parentNode);return I},isEditable:S=>{if(q(S)){const A=Z(S)?S:S.parentElement;return q(A)&&Gn(A)&&Bo(k(A))}return!1},destroy:()=>{if(i.length>0){let S=i.length;for(;S--;){const[A,I,F]=i[S];c.unbind(A,I,F)}}Bt(r,(S,A)=>{a.unload(A),delete r[A]})},isChildOf:(S,A)=>S===A||A.contains(S),dumpRng:S=>"startContainer: "+S.startContainer.nodeName+", startOffset: "+S.startOffset+", endContainer: "+S.endContainer.nodeName+", endOffset: "+S.endOffset},mt=((S,A,I)=>{const F=A.keep_values,Q={style:{set:(it,ft)=>{const dt=k(it);F&&Ms(dt,Xd,ft),ce(dt,"style"),at(ft)&&ti(dt,S.parse(ft))},get:it=>{const ft=k(it),dt=Ue(ft,Xd)||Ue(ft,"style");return S.serialize(S.parse(dt),xt(ft))}}};return F&&(Q.href=Q.src={set:(it,ft,dt)=>{const Tt=k(it);Nt(A.url_converter)&&q(ft)&&(ft=A.url_converter.call(A.url_converter_scope||I(),String(ft),dt,it)),Ms(Tt,"data-mce-"+dt,ft),Ms(Tt,dt,ft)},get:(it,ft)=>{const dt=k(it);return Ue(dt,"data-mce-"+ft)||Ue(dt,ft)}}),Q})(d,e,W(X));return X};Ot.DOM=Ot(document),Ot.nodeIndex=Or;const tk=Ot.DOM;class Qn{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=tk;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=H._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{Pt(n.scriptLoadedCallbacks,d).each(c=>{U(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=gt(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(rn(d,({reason:c})=>Jt(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(Et(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],s(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(ds),r(d)})),i=$f(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,d)})}):a(i)}}Qn.ScriptLoader=new Qn;const ae=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Is={},Qd=ae("en"),Rp=()=>Pt(Is,Qd.get()),bn={getData:()=>Va(Is,t=>({...t})),setCode:t=>{t&&Qd.set(t)},getCode:()=>Qd.get(),add:(t,e)=>{let n=Is[t];n||(Is[t]=n={});const o=Et(Pe(e),r=>r.toLowerCase());Bt(e,(r,s)=>{const a=s.toLowerCase();a!==s&&((i,l)=>{const d=i.indexOf(l);return-1!==d&&i.indexOf(l,d+1)>d})(o,a)?(ht(e,a)||(n[a]=r),n[s]=r):n[a]=r})},translate:t=>{const e=Rp().getOr({}),n=i=>Nt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return ht(e,l)?n(e[l]):Pt(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(we(a=t)&&ht(a,"raw"))return n(t.raw);var a,i;if(Jt(i=t)&&i.length>1){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>ht(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>Rp().bind(t=>Pt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>ht(Is,t)},xe=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=gt(o,u=>u.name===l&&u.state===d);U(c,u=>u.resolve())},s=l=>ht(e,l),a=(l,d)=>{const c=bn.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||Qn.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&ht(n,l)||"loaded"===d&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==xe.languageLoad&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>at(d)?at(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=at(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=xe.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Qn.ScriptLoader.add(c).then(u)},waitFor:i}};xe.languageLoad=!0,xe.baseURL="",xe.PluginManager=xe(),xe.ThemeManager=xe(),xe.ModelManager=xe();const ek=t=>{const e=ae(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},uo=()=>{const t=(e=>{const n=ae(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(vt);return{...t,on:e=>t.get().each(e)}},vi=(t,e)=>{let n=null;return{cancel:()=>{Se(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Se(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},Jd=(t,e)=>{let n=null;const o=()=>{Se(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},Fs=W("mce-annotation"),Ho=W("data-mce-annotation"),Br=W("data-mce-annotation-uid"),Us=W("data-mce-annotation-active"),zs=W("data-mce-annotation-classes"),js=W("data-mce-annotation-attrs"),Ap=t=>e=>kt(e,t),Tp=(t,e)=>{const n=t.selection.getRng(),o=k(n.startContainer),r=k(t.getBody()),s=e.fold(()=>"."+Fs(),i=>`[${Ho()}="${i}"]`),a=_r(o,n.startOffset).getOr(o);return Oo(a,s,Ap(r)).bind(i=>$n(i,`${Br()}`).bind(l=>$n(i,`${Ho()}`).map(d=>{const c=Bp(t,l);return{uid:l,name:d,elements:c}})))},Op=(t,e)=>bs(t,"data-mce-bogus")||Vg(t,'[data-mce-bogus="all"]',Ap(e)),Bp=(t,e)=>{const n=k(t.getBody()),o=ve(n,`[${Br()}="${e}"]`);return gt(o,r=>!Op(r,n))},Pp=(t,e)=>{const n=k(t.getBody()),o=ve(n,`[${Ho()}="${e}"]`),r={};return U(o,s=>{if(!Op(s,n)){const a=Ue(s,Br()),i=Pt(r,a).getOr([]);r[a]=i.concat([s])}}),r};let Dp=0;const Hs=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Dp++,t+"_"+n+Dp+String(e)},Lp=(t,e)=>k(t.dom.cloneNode(e)),$o=t=>Lp(t,!1),Mp=t=>Lp(t,!0),Ip=(t,e,n=zt)=>{const o=new te(t,e),r=s=>{let a;do{a=o[s]()}while(a&&!j(a)&&!n(a));return C.from(a).filter(j)};return{current:()=>C.from(o.current()).filter(j),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},qo=(t,e)=>{const n=e||(r=>t.isBlock(r)||Ht(r)||Lt(r)),o=(r,s,a,i)=>{if(j(r)){const l=i(r,s,r.data);if(-1!==l)return C.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=Ip(r,i??t.getRoot(),n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=Ip(r,i??t.getRoot(),n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},Pr=Math.round,Vo=t=>t?{left:Pr(t.left),top:Pr(t.top),bottom:Pr(t.bottom),right:Pr(t.right),width:Pr(t.width),height:Pr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Fp=(t,e)=>(t=Vo(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Up=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,$s=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Up(e.top-t.bottom,t,e)},qs=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Up(e.bottom-t.top,t,e),zp=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},yi=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},mo=(t,e)=>{if(Z(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},nk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),jp=t=>at(t)&&t.charCodeAt(0)>=768&&nk.test(t),Hp=Z,ok=ln,$p=si("display","block table"),rk=si("float","left right"),Vs=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Hp,ok,ls(rk)),sk=ls(si("white-space","pre pre-line pre-wrap")),Ws=j,Zd=Ht,qp=Ot.nodeIndex,Ci=(t,e)=>e<0&&Z(t)&&t.hasChildNodes()?void 0:mo(t,e),tc=t=>t?t.createRange():Ot.DOM.createRng(),ec=t=>at(t)&&/[\r\n\t ]/.test(t),Vp=t=>!!t.setStart&&!!t.setEnd,nc=t=>{const e=t.startContainer,n=t.startOffset;if(ec(t.toString())&&sk(e.parentNode)&&j(e)){const o=e.data;if(ec(o[n-1])||ec(o[n+1]))return!0}return!1},Wp=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,fo=t=>{var e;let n;const o=t.getClientRects();return n=Vo(o.length>0?o[0]:t.getBoundingClientRect()),!Vp(t)&&Zd(t)&&Wp(n)?(r=>{const s=r.ownerDocument,a=tc(s),i=s.createTextNode(re),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const d=Vo(a.getBoundingClientRect());return l.removeChild(i),d})(t):Wp(n)&&Vp(t)&&null!==(e=(r=>{const a=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===a&&j(a)&&0===i&&1===l){const d=r.cloneRange();return d.setEndAfter(a),fo(d)}return null})(t))&&void 0!==e?e:n},Wo=(t,e)=>{const n=Fp(t,e);return n.width=1,n.right=n.left+1,n},L=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,m;0!==c.height&&(s.length>0&&(u=c).left===(m=s[s.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||s.push(c))},i=(c,u)=>{const m=tc(c.ownerDocument);if(u<c.data.length){if(jp(c.data[u]))return;if(jp(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!nc(m)))return void a(Wo(fo(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),nc(m)||a(Wo(fo(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),nc(m)||a(Wo(fo(m),!0)))},l=r.container(),d=r.offset();if(Ws(l))return i(l,d),s;if(Hp(l))if(r.isAtEnd()){const c=Ci(l,d);Ws(c)&&i(c,c.data.length),Vs(c)&&!Zd(c)&&a(Wo(fo(c),!1))}else{const c=Ci(l,d);if(Ws(c)&&i(c,0),Vs(c)&&r.isAtEnd())return a(Wo(fo(c),!1)),s;const u=Ci(r.container(),r.offset()-1);Vs(u)&&!Zd(u)&&($p(u)||$p(c)||!Vs(c))&&a(Wo(fo(u),!1)),Vs(c)&&a(Wo(fo(c),!0))}return s})(L(t,e))),n);return{container:W(t),offset:W(e),toRange:()=>{const r=tc(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Ws(t),0===e),isAtEnd:()=>Ws(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Ci(t,r?e-1:e)}};L.fromRangeStart=t=>L(t.startContainer,t.startOffset),L.fromRangeEnd=t=>L(t.endContainer,t.endOffset),L.after=t=>L(t.parentNode,qp(t)+1),L.before=t=>L(t.parentNode,qp(t)),L.isAbove=(t,e)=>be(Be(e.getClientRects()),ko(t.getClientRects()),$s).getOr(!1),L.isBelow=(t,e)=>be(ko(e.getClientRects()),Be(t.getClientRects()),qs).getOr(!1),L.isAtStart=t=>!!t&&t.isAtStart(),L.isAtEnd=t=>!!t&&t.isAtEnd(),L.isTextPosition=t=>!!t&&j(t.container()),L.isElementPosition=t=>!L.isTextPosition(t);const wi=(t,e)=>{j(e)&&0===e.data.length&&t.remove(e)},oc=(t,e,n)=>{var o,s;_d(n)?((o,r,s)=>{const a=C.from(s.firstChild),i=C.from(s.lastChild);r.insertNode(s),a.each(l=>wi(o,l.previousSibling)),i.each(l=>wi(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),wi(o,s.previousSibling),wi(o,s.nextSibling))},vn=j,Kp=Lo,Yp=Ot.nodeIndex,Gp=t=>{const e=t.parentNode;return Kp(e)?Gp(e):e},rc=t=>t?Ya(t.childNodes,(e,n)=>(Kp(n)&&"BR"!==n.nodeName?e=e.concat(rc(n)):e.push(n),e),[]):[],Xp=t=>e=>t===e,Qp=t=>(vn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=rc(Gp(e)),o=Vf(n,Xp(e),e),n=n.slice(0,o+1);const r=Ya(n,(s,a,i)=>(vn(a)&&vn(n[i-1])&&s++,s),0);return n=gs(n,pn([e.nodeName])),o=Vf(n,Xp(e),e),o-r})(t)+"]",Jp=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(vn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&vn(d);)l+=d.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(Qp(r));let a=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return a=gs(a,ls(Lo)),o=o.concat(sd(a,i=>Qp(i))),o.reverse().join("/")+","+n},Zp=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Ya(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let m=rc(d);return m=gs(m,(p,f)=>!vn(p)||!vn(m[f-1])),m=gs(m,pn([c])),m[u]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!vn(s)&&s.parentNode){let a;return a="after"===r?Yp(s)+1:Yp(s),L(s.parentNode,a)}return((a,i)=>{let l=a,d=0;for(;vn(l);){const c=l.data.length;if(i>=d&&i<=d+c){a=l,i-=d;break}if(!vn(l.nextSibling)){a=l,i=c;break}d+=c,l=l.nextSibling}return vn(a)&&i>a.data.length&&(i=a.data.length),L(a,i)})(s,parseInt(r,10))},xi=Lt,th=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if(j(s))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&j(p);p=p.previousSibling)m+=d(p.data).length;return m})(e,s,a):a);else{let d=0;const c=s.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[a],n)+d)}for(let d=s;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},sc=(t,e,n)=>{let o=0;return H.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},eh=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(Z(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},nh=t=>(eh(t,!0),eh(t,!1),t),oh=(t,e)=>{if(Z(t)&&(t=mo(t,e),xi(t)))return t;if($e(t)){j(t)&&Tr(t)&&(t=t.parentNode);let n=t.previousSibling;if(xi(n)||(n=t.nextSibling,xi(n)))return n}},rh=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||xi(o)){const a=o.nodeName;return{name:a,index:sc(n.dom,a,o)}}const s=oh((a=r).startContainer,a.startOffset)||oh(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:sc(n.dom,a,s)}}return((a,i,l,d)=>{const c=i.dom,u=th(c,a,l,d,!0),m=i.isForward(),p=Jg(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:th(c,a,l,d,!1),forward:m,...p}})(t,n,e,r)},sh=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},ah=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:sc(n,i,a)};const d=nh(o.cloneRange());if(!s){d.collapse(!1);const u=sh(n,r+"_end",e);oc(n,d,u)}o=nh(o),o.collapse(!0);const c=sh(n,r+"_start",e);return oc(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},ac=J(rh,Ne,!0),ih=t=>{const e=s=>s(t),n=W(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Kt,isError:zt,map:s=>Re.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},lh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:zt,isError:Kt,map:e,mapError:o=>Re.error(o(t)),bind:e,exists:zt,forall:Kt,getOr:Ne,or:Ne,getOrThunk:Zl,orThunk:Zl,getOrDie:If(String(t)),each:vt,toOptional:C.none};return n},Re={value:ih,error:lh,fromOption:(t,e)=>t.fold(()=>lh(e),ih)},Tn=t=>{if(!Jt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return U(t,(o,r)=>{const s=Pe(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Jt(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Pe(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!zn(e,m=>Rt(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};Tn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ak=t=>"inline-command"===t.type||"inline-format"===t.type,ik=t=>"block-command"===t.type||"block-format"===t.type,lk=t=>{const e=o=>Re.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let a;if(Jt(t.format)){if(!zn(t.format,at))return e(o+" pattern has non-string items in the `format` array");a=t.format}else{if(!at(t.format))return e(o+" pattern has non-string `format` parameter");a=[t.format]}return Re.value(r(a))}return void 0!==t.cmd?at(t.cmd)?Re.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!we(t))return e("Raw pattern is not an object");if(!at(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!at(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a}))}return void 0!==t.replacement?at(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Re.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},dh=t=>gt(t,ik),ch=t=>gt(t,ak),uh=t=>{const e=(n=>{const o=[],r=[];return U(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(Et(t,lk));return U(e.errors,n=>console.error(n.message,n.pattern)),e.values},ic=kn().deviceType,dk=ic.isTouch(),ck=Ot.DOM,mh=t=>Ha(t,RegExp),G=t=>e=>e.options.get(t),lc=t=>at(t)||we(t),fh=(t,e="")=>n=>{const o=at(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Oe(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[yr(c)]=yr(u),i},{})})(n);return{value:Pt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},uk=G("iframe_attrs"),mk=G("doctype"),gh=G("document_base_url"),fk=G("body_id"),gk=G("body_class"),ph=G("content_security_policy"),pk=G("br_in_pre"),ye=G("forced_root_block"),Ks=G("forced_root_block_attrs"),hk=G("newline_behavior"),bk=G("br_newline_selector"),vk=G("no_newline_selector"),yk=G("keep_styles"),Ck=G("end_container_on_empty_block"),hh=G("automatic_uploads"),bh=G("images_reuse_filename"),wk=G("images_replace_blob_uris"),vh=G("icons"),xk=G("icons_url"),Ek=G("images_upload_url"),_k=G("images_upload_base_path"),kk=G("images_upload_credentials"),Sk=G("images_upload_handler"),Nk=G("content_css_cors"),dc=G("referrer_policy"),yh=G("language"),Rk=G("language_url"),Ch=G("indent_use_margin"),Ak=G("indentation"),Tk=G("content_css"),Ok=G("content_style"),wh=G("font_css"),Bk=G("directionality"),Pk=G("inline_boundaries_selector"),xh=G("object_resizing"),Dk=G("resize_img_proportional"),Lk=G("placeholder"),Eh=G("event_root"),Mk=G("service_message"),Dr=G("theme"),Ik=G("theme_url"),cc=G("model"),Fk=G("model_url"),Ys=G("inline_boundaries"),Uk=G("formats"),zk=G("preview_styles"),jk=G("format_empty_lines"),Hk=G("format_noneditable_selector"),$k=G("custom_ui_selector"),uc=G("inline"),qk=G("hidden_input"),Vk=G("submit_patch"),Wk=G("add_form_submit_trigger"),Kk=G("add_unload_trigger"),Yk=G("custom_undo_redo_levels"),Gk=G("disable_nodechange"),_h=G("readonly"),Xk=G("editable_root"),kh=G("content_css_cors"),Ei=G("plugins"),Qk=G("external_plugins"),Jk=G("block_unsupported_drop"),Zk=G("visual"),tS=G("visual_table_class"),Sh=G("visual_anchor_class"),eS=G("iframe_aria_text"),nS=G("setup"),oS=G("init_instance_callback"),rS=G("urlconverter_callback"),sS=G("auto_focus"),aS=G("browser_spellcheck"),iS=G("protect"),lS=G("paste_block_drop"),_i=G("paste_data_images"),dS=G("paste_preprocess"),cS=G("paste_postprocess"),uS=G("newdocument_content"),mS=G("paste_webkit_styles"),fS=G("paste_remove_styles_if_webkit"),gS=G("paste_merge_formats"),pS=G("smart_paste"),hS=G("paste_as_text"),bS=G("paste_tab_spaces"),vS=G("allow_html_data_urls"),yS=G("text_patterns"),CS=G("text_patterns_lookup"),Nh=G("noneditable_class"),wS=G("editable_class"),xS=G("noneditable_regexp"),ES=G("preserve_cdata"),_S=G("highlight_on_focus"),mc=G("xss_sanitization"),kS=G("init_content_sync"),Rh=t=>H.explode(t.options.get("images_file_types")),SS=G("table_tab_navigation"),NS=G("details_initial_state"),RS=G("details_serialized_state"),AS=G("force_hex_color"),fc=G("sandbox_iframes"),TS=Z,Ah=j,Th=t=>{const e=t.parentNode;e&&e.removeChild(t)},Oh=t=>{const e=ze(t);return{count:t.length-e.length,text:e}},Bh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(se));)t.deleteData(e,1)},Ph=(t,e)=>(Ko(t),e),Ko=t=>{TS(t)&&$e(t)&&(Qg(t)?t.removeAttribute("data-mce-caret"):Th(t)),Ah(t)&&(Bh(t),0===t.data.length&&Th(t))},BS=Lt,PS=An,DS=ai,Dh=(t,e,n)=>{const o=Fp(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},Lh=()=>_t.browser.isFirefox(),Gs=t=>BS(t)||PS(t),Xs=t=>(Gs(t)||Xn(t)&&Lh())&&Za(k(t)).exists(Bo),MS=an,gc=Lt,IS=An,Mh=si("display","block table table-cell table-caption list-item"),Ih=$e,Fh=Tr,FS=Z,US=j,zS=ln,Lr=t=>t>0,Yo=t=>t<0,ki=(t,e)=>{let n;for(;n=t(e);)if(!Fh(n))return n;return null},Qs=(t,e,n,o,r)=>{const s=new te(t,o),a=gc(t)||Fh(t);let i;if(Yo(e)){if(a&&(i=ki(s.prev.bind(s),!0),n(i)))return i;for(;i=ki(s.prev.bind(s),r);)if(n(i))return i}if(Lr(e)){if(a&&(i=ki(s.next.bind(s),!0),n(i)))return i;for(;i=ki(s.next.bind(s),r);)if(n(i))return i}return null},go=(t,e)=>{for(;t&&t!==e;){if(Mh(t))return t;t=t.parentNode}return null},On=(t,e,n)=>go(t.container(),n)===go(e.container(),n),pc=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return FS(n)?C.from(n.childNodes[o+t]):C.none()},Uh=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},jS=(t,e,n)=>go(e,t)===go(n,t),zh=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&Ih(s)&&(s=s[o]),gc(s)||IS(s)){if(jS(e,s,r))return s;break}if(zS(s))break;r=r.parentNode}return null},Js=J(Uh,!0),Zs=J(Uh,!1),hc=(t,e,n)=>{let o;const r=J(zh,!0,e),s=J(zh,!1,e),a=n.startContainer,i=n.startOffset;if(Tr(a)){const l=US(a)?a.parentNode:a,d=l.getAttribute("data-mce-caret");if("before"===d&&(o=l.nextSibling,Xs(o)))return Js(o);if("after"===d&&(o=l.previousSibling,Xs(o)))return Zs(o)}if(!n.collapsed)return n;if(j(a)){if(Ih(a)){if(1===t){if(o=s(a),o)return Js(o);if(o=r(a),o)return Zs(o)}if(-1===t){if(o=r(a),o)return Zs(o);if(o=s(a),o)return Js(o)}return n}if(ui(a)&&i>=a.data.length-1)return 1===t&&(o=s(a),o)?Js(o):n;if(ci(a)&&i<=1)return-1===t&&(o=r(a),o)?Zs(o):n;if(i===a.data.length)return o=s(a),o?Js(o):n;if(0===i)return o=r(a),o?Zs(o):n}return n},jh=(t,e)=>pc(t?0:-1,e).filter(gc),ta=(t,e,n)=>{const o=hc(t,e,n);return-1===t?L.fromRangeStart(o):L.fromRangeEnd(o)},Si=t=>C.from(t.getNode()).map(k),bc=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Ni=(t,e)=>{const n=On(t,e);return!(n||!Ht(t.getNode()))||n};var ie,t;(t=ie||(ie={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const HS=Lt,Bn=j,Hh=Z,vc=Ht,Mr=ln,$h=t=>{return tp(t)||!!Bd(e=t)&&!Oe(Ie(e.getElementsByTagName("*")),(n,o)=>n||Zg(o),!1);var e},Ri=ep,qh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Vh=(t,e)=>{if(Lr(t)){if(Mr(e.previousSibling)&&!Bn(e.previousSibling))return L.before(e);if(Bn(e))return L(e,0)}if(Yo(t)){if(Mr(e.nextSibling)&&!Bn(e.nextSibling))return L.after(e);if(Bn(e))return L(e,e.data.length)}return Yo(t)?vc(e)?L.before(e):L.after(e):L.before(e)},yc=(t,e,n)=>{let o,r,s,a;if(!Hh(n)||!e)return null;if(e.isEqual(L.after(n))&&n.lastChild){if(a=L.after(n.lastChild),Yo(t)&&Mr(n.lastChild)&&Hh(n.lastChild))return vc(n.lastChild)?L.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Bn(i)){if(Yo(t)&&l>0)return L(i,--l);if(Lr(t)&&l<i.length)return L(i,++l);o=i}else{if(Yo(t)&&l>0&&(r=qh(i,l-1),Mr(r)))return!$h(r)&&(s=Qs(r,t,Ri,r),s)?Bn(s)?L(s,s.data.length):L.after(s):Bn(r)?L(r,r.data.length):L.before(r);if(Lr(t)&&l<i.childNodes.length&&(r=qh(i,l),Mr(r)))return vc(r)?((c,u)=>{const m=u.nextSibling;return m&&Mr(m)?Bn(m)?L(m,0):L.before(m):yc(ie.Forwards,L.after(u),c)})(n,r):!$h(r)&&(s=Qs(r,t,Ri,r),s)?Bn(s)?L(s,0):L.before(s):Bn(r)?L(r,0):L.after(r);o=r||a.getNode()}if(o&&(Lr(t)&&a.isAtEnd()||Yo(t)&&a.isAtStart())&&(o=Qs(o,t,Kt,n,!0),Ri(o,n)))return Vh(t,o);r=o&&Qs(o,t,Ri,n);const d=So(gt(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),HS));return!d||r&&d.contains(r)?r?Vh(t,r):null:(a=Lr(t)?L.after(d):L.before(d),a)},Pn=t=>({next:e=>yc(ie.Forwards,e,t),prev:e=>yc(ie.Backwards,e,t)}),Wh=t=>L.isTextPosition(t)?0===t.offset():ln(t.getNode()),Kh=t=>{if(L.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return ln(t.getNode(!0))},Yh=(t,e)=>!L.isTextPosition(t)&&!L.isTextPosition(e)&&t.getNode()===e.getNode(!0),qe=(t,e,n)=>{const o=Pn(e);return C.from(t?o.next(n):o.prev(n))},Ir=(t,e,n)=>qe(t,e,n).bind(o=>{return On(n,o,e)&&(s=n,a=o,t?!Yh(s,a)&&(L.isTextPosition(i=s)||!Ht(i.getNode()))&&Kh(s)&&Wh(a):!Yh(a,s)&&Wh(s)&&Kh(a))?qe(t,e,o):C.some(o);var s,a,i}),Gh=(t,e,n,o)=>Ir(t,e,n).bind(r=>o(r)?Gh(t,e,r,o):C.some(r)),Fr=(t,e)=>{const n=t?e.firstChild:e.lastChild;return j(n)?C.some(L(n,t?0:n.data.length)):n?ln(n)?C.some(t?L.before(n):Ht(o=n)?L.before(o):L.after(o)):((r,s,a)=>{const i=r?L.before(a):L.after(a);return qe(r,s,i)})(t,e,n):C.none();var o},Ae=J(qe,!0),Le=J(qe,!1),Ce=J(Fr,!0),dn=J(Fr,!1),Cc="_mce_caret",Ve=t=>Z(t)&&t.id===Cc,Go=(t,e)=>{let n=e;for(;n&&n!==t;){if(Ve(n))return n;n=n.parentNode}return null},Xh=t=>ht(t,"name"),Qh=t=>H.isArray(t.start),Ai=t=>!(!Xh(t)&&Eo(t.forward))||t.forward,Jh=(t,e)=>(Z(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),$S=(t,e)=>dn(t).fold(zt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Zh=(t,e,n)=>!(e.hasChildNodes()||!Go(t,e)||(((o,r)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(se);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(e,n),0)),tb=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const d=a.childNodes;if(Zh(s,a,o))return!0;if(r[l]>d.length-1)return!!Zh(s,a,o)||$S(a,o);a=d[r[l]]}j(a)&&(i=Math.min(r[0],a.data.length)),Z(a)&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},wc=t=>j(t)&&t.data.length>0,eb=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===e?s?o.hasChildNodes()?(a=o.firstChild,i=1):wc(o.nextSibling)?(a=o.nextSibling,i=0):wc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)+1):(a=r,i=t.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):wc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)):(a=r,i=t.nodeIndex(o)),!s){const l=o.previousSibling,d=o.nextSibling;let c;for(H.each(H.grep(o.childNodes),u=>{j(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if(j(d)&&j(l)&&!_t.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),a=l,i=u}}return C.some(L(a,i))}return C.none()},qS=(t,e,n)=>((o,r,s=!1)=>{return 2===r?rh(ze,s,o):3===r?(a=>{const i=a.getRng();return{start:Jp(a.dom.getRoot(),L.fromRangeStart(i)),end:Jp(a.dom.getRoot(),L.fromRangeEnd(i)),forward:a.isForward()}})(o):r?{rng:(a=o).getRng(),forward:a.isForward()}:ah(o,!1);var a})(t,e,n),VS=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(Qh(o))return((s,a)=>{const i=s.createRng();return tb(s,!0,a,i)&&tb(s,!1,a,i)?C.some({range:i,forward:Ai(a)}):C.none()})(r,o);if(at(o.start))return((s,a)=>{const i=C.from(Zp(s.getRoot(),a.start)),l=C.from(Zp(s.getRoot(),a.end));return be(i,l,(d,c)=>{const u=s.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:Ai(a)}})})(r,o);if(ht(o,"id"))return((s,a)=>{const i=eb(s,"start",a),l=eb(s,"end",a);return be(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(Jh(s,d.container()),d.offset()),u.setEnd(Jh(s,c.container()),c.offset()),{range:u,forward:Ai(a)}})})(r,o);if(Xh(o))return((s,a)=>C.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>ht(s,"rng"))(o))return C.some({range:o.rng,forward:Ai(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},We=t=>Z(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Ti=(nb=re,t=>nb===t);var nb;const Ur=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),xc=t=>!Ur(t)&&!Ti(t)&&!Sd(t),Ec=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},ob=(t,e)=>{const n=ve(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:gt(rn(t,s=>{const a=yi(s);return a?[k(a)]:[]}),Os)},zr=t=>ob(Ec(t.selection.getSel()),k(t.getBody())),ea=(t,e)=>_s(t,"table",e),rb=t=>fd(t).fold(W([t]),e=>[t].concat(rb(e))),_c=t=>gd(t).fold(W([t]),e=>"br"===xt(e)?Ao(e).map(n=>[t].concat(_c(n))).getOr([]):[t].concat(_c(e))),kc=(t,e)=>be((n=>{const o=n.startContainer,r=n.startOffset;return j(o)?0===r?C.some(k(o)):C.none():C.from(o.childNodes[r]).map(k)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return j(o)?r===o.data.length?C.some(k(o)):C.none():C.from(o.childNodes[r-1]).map(k)})(e),(n,o)=>{const r=Zt(rb(t),J(kt,n)),s=Zt(_c(t),J(kt,o));return r.isSome()&&s.isSome()}).getOr(!1),Sc=(t,e,n,o)=>{const r=n,s=new te(n,r),a=fs(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Rt(["td","th","table"],d.toLowerCase()));let i=n;do{if(j(i)&&0!==H.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Oi=t=>{const e=t.selection.getSel();return q(e)&&e.rangeCount>0},Nc=(t,e)=>{const n=zr(t);n.length>0?U(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},sb=(t,e,n)=>{const o=ah(t,e);n(o),t.moveToBookmark(o)},na=t=>fn(t?.nodeType),Rc=t=>Z(t)&&!We(t)&&!Ve(t)&&!Lo(t),ab=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),a=Lt(s);sb(o,!0,()=>{e()}),a&&Lt(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&WS(r,o)},WS=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Rc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&Z(s)){const i=s.childNodes,l=t.getRoot();let d;if(a<i.length){const c=i[a];d=new te(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new te(c,null!==(o=t.getParent(c,t.isBlock))&&void 0!==o?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if(j(c)&&!Tc(c))return r.setStart(c,0),void e.setRng(r)}}},ib=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(Z(t)||!Tc(t))return t}},Ac=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Fo(t,e),jr=(t,e,n)=>t.schema.isValidChild(e,n),Tc=(t,e=!1)=>{if(q(t)&&j(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return lo(n)}return!1},lb=(t,e)=>{const n=t.dom;return Rc(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=Hk(o),i=hs(a)?s:`${s},${a}`;return gn(k(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},po=(t,e)=>Nt(t)?t(e):(q(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),Oc=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Bc=(t,e)=>{if(Gt(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Ds(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Bi=(t,e,n)=>{const o=t.getStyle(e,n);return Bc(o,n)},db=(t,e)=>{let n;return t.getParent(e,o=>!!Z(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},Pi=(t,e,n)=>t.getParents(e,n,t.getRoot()),Pc=(t,e,n)=>{const o=t.formatter.get(e);return q(o)&&$t(o,n)},Dn=t=>vr(t,"block"),Ke=t=>vr(t,"selector"),ee=t=>vr(t,"inline"),Dc=t=>Ke(t)&&!1!==t.expand&&!ee(t),cb=t=>(e=>{const n=[];let o=e;for(;o;){if(j(o)&&o.data!==se||o.childNodes.length>1)return[];Z(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,Lc=t=>Ve(t.dom)&&cb(t.dom),Hr=We,ub=Pi,mb=Tc,KS=Ac,fb=(t,e)=>{let n=e;for(;n;){if(Z(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},gb=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},YS=(t,e,n)=>gb(t,e,n,o=>Ti(o)||Ur(o)),GS=(t,e,n)=>gb(t,e,n,xc),pb=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const m=qo(t);return C.from((r?m.backwards:m.forwards)(d,c,(f,h)=>Hr(f.parentNode)?-1:(a=f,u(r,f,h)),i))};return l(n,o,YS).bind(d=>s?l(d.container,d.offset+(r?-1:0),GS):C.some(d)).orThunk(()=>a?C.some({container:a,offset:r?0:a.length}):C.none())},hb=(t,e,n,o,r)=>{const s=o[r];j(o)&&hs(o.data)&&s&&(o=s);const a=ub(t,o);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!q(d.collapsed)||d.collapsed===n.collapsed)&&Ke(d)&&t.is(a[i],d.selector))return a[i]}return o},bb=(t,e,n,o)=>{var r;let s=n;const a=t.getRoot(),i=e[0];if(Dn(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:a;s=t.getParent(j(n)?n.parentNode:n,d=>d!==a&&KS(t.schema,d),l)}if(s&&Dn(i)&&i.wrapper&&(s=ub(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!Oc(s,"br")););return s||n},vb=(t,e,n,o)=>{const r=n.parentNode;return!q(n[o])&&(!(r!==e&&!Gt(r)&&!t.isBlock(r))||vb(t,e,r,o))},Di=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if(j(n)&&!mb(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=j(d)&&!vb(t,i,d,a);if(!Hr(d)&&(!Ht(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!mb(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},yb=t=>Hr(t.parentNode)||Hr(t),Xo=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return Z(r)&&r.hasChildNodes()&&(r=mo(r,s),j(r)&&(s=0)),Z(a)&&a.hasChildNodes()&&(a=mo(a,e.collapsed?i:i-1),j(a)&&(i=a.data.length)),r=fb(t,r),a=fb(t,a),yb(r)&&(r=Hr(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,j(r)&&(s=e.collapsed?r.length:0)),yb(a)&&(a=Hr(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,j(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(pb(t,t.getRoot(),r,s,!0,o).each(({container:d,offset:c})=>{r=d,s=c}),pb(t,t.getRoot(),a,i,!1,o).each(({container:d,offset:c})=>{a=d,i=c})),(ee(l)||l.block_expand)&&(ee(l)&&j(r)&&0!==s||(r=Di(t,n,r,s,!0)),ee(l)&&j(a)&&i!==a.data.length||(a=Di(t,n,a,i,!1))),Dc(l)&&(r=hb(t,n,e,r,"previousSibling"),a=hb(t,n,e,a,"nextSibling")),(Dn(l)||Ke(l))&&(r=bb(t,n,r,"previousSibling"),a=bb(t,n,a,"nextSibling"),Dn(l)&&(t.isBlock(r)||(r=Di(t,n,r,s,!0)),t.isBlock(a)||(a=Di(t,n,a,i,!1)))),Z(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),Z(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},oa=(t,e,n)=>{var o;const r=e.startOffset,s=mo(e.startContainer,r),a=e.endOffset,i=mo(e.endContainer,a-1),l=g=>{const b=g[0];j(b)&&b===s&&r>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===a&&g.length>0&&v===i&&j(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let x=g,w=x.parentNode;x&&x!==b;x=w){w=x.parentNode;const E=d(x===g?x:x[y],y);E.length&&(v||E.reverse(),n(l(E)))}};if(s===i)return n(l([s]));const m=null!==(o=t.findCommonAncestor(s,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,i))return u(s,m,!0);if(t.isChildOf(i,s))return u(i,m);const p=c(s,m)||s,f=c(i,m)||i;u(s,p,!0);const h=d(p===s?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},XS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Cb=(t,e,n,o,r,s)=>{const{uid:a=e,...i}=n;xr(t,Fs()),de(t,`${Br()}`,a),de(t,`${Ho()}`,o);const{attributes:l={},classes:d=[]}=r(a,i);if(Hn(t,l),c=t,U(d,m=>{xr(c,m)}),s){d.length>0&&de(t,`${zs()}`,d.join(","));const c=Pe(l);c.length>0&&de(t,`${js()}`,c.join(","))}var c},wb=(t,e,n,o,r)=>{const s=oe("span",t);return Cb(s,e,n,o,r,!1),s},xb=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Pt(s,a).map(i=>i.settings),getNames:()=>Pe(s)}})();((s,a)=>{const i=Ho(),l=c=>C.from(c.attr(i)).bind(a.lookup),d=c=>{var u,m;c.attr(Br(),null),c.attr(Ho(),null),c.attr(Us(),null);const p=C.from(c.attr(js())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(zs())).map(b=>b.split(",")).getOr([]);U(p,b=>c.attr(b,null));const h=null!==(m=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=$a(h,[Fs()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(zs(),null),c.attr(js(),null)};s.serializer.addTempAttr(Us()),s.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((s,a)=>{const i=ae({}),l=()=>({listeners:[],previous:uo()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f(Pt(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{U(Bp(s,p),h=>{f?de(h,Us(),"true"):ce(h,Us())})},m=Jd(()=>{const p=_o(a.getNames());U(p,f=>{c(f,h=>{const g=h.previous.get();return Tp(s,C.some(f)).fold(()=>{g.each(b=>{var v;d(v=f,y=>{U(y.listeners,x=>x(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var x,w,E;Cr(g,b)||(g.each(x=>u(x,!1)),w=b,E=y,d(x=v,N=>{U(N.listeners,T=>T(!0,x,{uid:w,nodes:Et(E,O=>O.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=Ja("span"),r=s=>{U(s,a=>{o(a)?Yn(a):(i=>{ys(i,Fs()),ce(i,`${Br()}`),ce(i,`${Ho()}`),ce(i,`${Us()}`);const l=$n(i,`${js()}`).map(u=>u.split(",")).getOr([]),d=$n(i,`${zs()}`).map(u=>u.split(",")).getOr([]);var c;U(l,u=>ce(i,u)),c=i,U(d,u=>{ys(c,u)}),ce(i,`${zs()}`),ce(i,`${js()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,d,c,u;d=s,c=i,u=a,(l=t).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=zr(l).length>0,h=Hs("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=Xo(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=wb(l.getDoc(),h,u,d,c.decorate);ni(g,re),m.getRng().insertNode(g.dom),m.select(g.dom)}else sb(m,!1,()=>{Nc(l,g=>{((t,e,n,o,r,s)=>{const a=[],i=wb(t.getDoc(),n,s,o,r),l=uo(),d=()=>{l.clear()},c=m=>{U(m,u)},u=m=>{switch(p=t,f=m,h="span",g=xt(m),sn(f).fold(()=>"skipping",b=>{return"br"===g||He(v=f)&&ii(v)===se?"valid":(v=>Fe(v)&&md(v,Fs()))(f)?"existing":Ve(f.dom)?"caret":$t(XS,v=>gn(f,v))?"valid-block":jr(p,h,g)&&jr(p,xt(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=ue(m);c(p),d();break}case"valid-block":d(),Cb(m,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=$o(i);return a.push(f),l.set(f),f});Ig(m,p);break}}var p,f,h,g};oa(t.dom,e,m=>{d(),(p=>{const f=Et(p,k);c(f)})(m)})})(l,g,h,d,c.decorate,u)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{Tp(t,C.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();r(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Bt(Pp(t,s),(i,l)=>{r(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=Pp(t,s);return Va(a,i=>Et(i,l=>l.dom))}}},ra=t=>({getBookmark:J(qS,t),moveToBookmark:J(VS,t)});ra.isBookmarkNode=We;const Eb=(t,e,n)=>!n.collapsed&&$t(n.getClientRects(),o=>{return a=e,(s=t)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),_b=(t,e,n)=>{t.dispatch(e,n)},kb=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},Sb=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},Nb=(t,e)=>t.dispatch("SetContent",e),Rb=(t,e)=>t.dispatch("GetContent",e),Ab=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),Y={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Y.metaKeyPressed(t),metaKeyPressed:t=>_t.os.isMacOS()||_t.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Qo="data-mce-selected",Tb=Math.abs,Li=Math.round,Mc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Ob=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let a,i,l,d,c,u,m,p,f,h,g,b,v,y,x;const w=K=>q(K)&&(Yg(K)||n.is(K,"figure.image")),E=K=>An(K)||n.hasClass(K,"mce-preview-object"),N=K=>{const X=K.target;((mt,S)=>{if("longpress"===(A=mt).type||0===A.type.indexOf("touch")){const A=mt.touches[0];return w(mt.target)&&!Eb(A.clientX,A.clientY,S)}var A;return w(mt.target)&&!Eb(mt.clientX,mt.clientY,S)})(K,e.selection.getRng())&&!K.isDefaultPrevented()&&e.selection.select(X)},T=K=>n.hasClass(K,"mce-preview-object")&&q(K.firstElementChild)?[K,K.firstElementChild]:n.is(K,"figure.image")?[K.querySelector("img")]:[K],O=K=>{const X=xh(e);return!!X&&"false"!==K.getAttribute("data-mce-resize")&&K!==e.getBody()&&(n.hasClass(K,"mce-preview-object")&&q(K.firstElementChild)?gn(k(K.firstElementChild),X):gn(k(K),X))},P=(K,X,mt)=>{if(q(mt)){const S=T(K);U(S,A=>{A.style[X]||!e.schema.isValid(A.nodeName.toLowerCase(),X)?n.setStyle(A,X,mt):n.setAttrib(A,X,""+mt)})}},_=(K,X,mt)=>{P(K,"width",X),P(K,"height",mt)},R=K=>{let X,mt,S,A,I;X=K.screenX-u,mt=K.screenY-m,b=X*d[2]+p,v=mt*d[3]+f,b=b<5?5:b,v=v<5?5:v,S=(w(a)||E(a))&&!1!==Dk(e)?!Y.modifierPressed(K):Y.modifierPressed(K),S&&(Tb(X)>Tb(mt)?(v=Li(b*h),b=Li(v/h)):(b=Li(v/h),v=Li(b*h))),_(i,b,v),A=d.startPos.x+X,I=d.startPos.y+mt,A=A>0?A:0,I=I>0?I:0,n.setStyles(l,{left:A,top:I,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),X=s.scrollWidth-y,mt=s.scrollHeight-x,X+mt!==0&&n.setStyles(l,{left:A-X,top:I-mt}),g||(e.dispatch("ObjectResizeStart",{target:a,width:p,height:f,origin:"corner-"+d.name}),g=!0)},B=()=>{const K=g;g=!1,K&&(P(a,"width",b),P(a,"height",v)),n.unbind(o,"mousemove",R),n.unbind(o,"mouseup",B),r!==o&&(n.unbind(r,"mousemove",R),n.unbind(r,"mouseup",B)),n.remove(i),n.remove(l),n.remove(c),M(a),K&&(e.dispatch("ObjectResized",{target:a,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},M=K=>{lt();const X=n.getPos(K,s),mt=X.x,S=X.y,A=K.getBoundingClientRect(),I=A.width||A.right-A.left,F=A.height||A.bottom-A.top;a!==K&&($(),a=K,b=v=0);const z=e.dispatch("ObjectSelected",{target:K});O(K)&&!z.isDefaultPrevented()?Bt(Mc,(Q,it)=>{let ft=n.get("mceResizeHandle"+it);ft&&n.remove(ft),ft=n.add(s,"div",{id:"mceResizeHandle"+it,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+it+"-resize; margin:0; padding:0"}),n.bind(ft,"mousedown",dt=>{dt.stopImmediatePropagation(),dt.preventDefault(),(Tt=>{const tt=T(a)[0];var bt;u=Tt.screenX,m=Tt.screenY,p=tt.clientWidth,f=tt.clientHeight,h=f/p,d=Q,d.name=it,d.startPos={x:I*Q[0]+mt,y:F*Q[1]+S},y=s.scrollWidth,x=s.scrollHeight,c=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=E(bt=a)?n.create("img",{src:_t.transparentSrc}):bt.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:mt,top:S,margin:0}),_(i,I,F),i.removeAttribute(Qo),s.appendChild(i),n.bind(o,"mousemove",R),n.bind(o,"mouseup",B),r!==o&&(n.bind(r,"mousemove",R),n.bind(r,"mouseup",B)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(dt)}),Q.elm=ft,n.setStyles(ft,{left:I*Q[0]+mt-ft.offsetWidth/2,top:F*Q[1]+S-ft.offsetHeight/2})}):$(!1)},V=vi(M,0),$=(K=!0)=>{V.cancel(),lt(),a&&K&&a.removeAttribute(Qo),Bt(Mc,(X,mt)=>{const S=n.get("mceResizeHandle"+mt);S&&(n.unbind(S),n.remove(S))})},ot=(K,X)=>n.isChildOf(K,X),et=K=>{if(g||e.removed||e.composing)return;const X="mousedown"===K.type?K.target:t.getNode(),mt=Oo(k(X),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(A=>A.dom).filter(A=>n.isEditable(A.parentElement)||"IMG"===A.nodeName&&n.isEditable(A)).getOrUndefined(),S=q(mt)?n.getAttrib(mt,Qo,"1"):"1";if(U(n.select(`img[${Qo}],hr[${Qo}]`),A=>{A.removeAttribute(Qo)}),q(mt)&&ot(mt,s)&&e.hasFocus()){rt();const A=t.getStart(!0);if(ot(A,mt)&&ot(t.getEnd(!0),mt))return n.setAttrib(mt,Qo,S),void V.throttle(mt)}$()},lt=()=>{Bt(Mc,K=>{K.elm&&(n.unbind(K.elm),delete K.elm)})},rt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{rt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",et),e.on("keyup compositionend",K=>{a&&"TABLE"===a.nodeName&&et(K)}),e.on("hide blur",$),e.on("contextmenu longpress",N,!0)}),e.on("remove",lt),{isResizable:O,showResizeRect:M,hideResizeRect:$,updateResizeRect:et,destroy:()=>{V.cancel(),a=i=c=null}}},Bb=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},Ic=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},sa=Tn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Pb=(t,e,n)=>e(k(n.startContainer),n.startOffset,k(n.endContainer),n.endOffset),Db=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),JS=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return C.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),C.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,Fc=Tn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Jn={before:Fc.before,on:Fc.on,after:Fc.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(Ne,Ne,Ne)},Mi=Tn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$r={domRange:Mi.domRange,relative:Mi.relative,exact:Mi.exact,exactFromRange:t=>Mi.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>k(o.startContainer),relative:(o,r)=>Jn.getStart(o),exact:(o,r,s,a)=>o});return xs(e)},range:Db},Ii=(t,e)=>{const n=xt(t);return"input"===n?Jn.after(t):Rt(["br","img"],n)?0===e?Jn.before(t):Jn.after(t):Jn.on(t,e)},ZS=(t,e)=>{const n=t.fold(Jn.before,Ii,Jn.after),o=e.fold(Jn.before,Ii,Jn.after);return $r.relative(n,o)},Lb=(t,e,n,o)=>{const r=Ii(t,e),s=Ii(n,o);return $r.relative(r,s)},Uc=(t,e)=>{const n=(e||document).createDocumentFragment();return U(t,o=>{n.appendChild(o.dom)}),k(n)},Mb=(t,e,n)=>{return(o=xs(k(n)).dom,r=t,s=e,((a,i,l)=>{const d=k(a.document);return JS(d,i,l).map(c=>Db(k(c.startContainer),c.startOffset,k(c.endContainer),c.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},zc=(t,e)=>q(t)&&q(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Ib=(t,e,n)=>null!==((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),eN=(t,e,n)=>Ib(t,e,o=>o.nodeName===n),nN=(t,e)=>$e(t)&&!Ib(t,e,Ve),Fb=(t,e,n)=>{const o=e.parentNode;if(o){const r=new te(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Ht(s))return!0}return!1},jc=(t,e,n,o,r)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||s;if(o&&Ht(r)&&e&&t.isEmpty(c))return C.some(L(i,t.nodeIndex(r)));const u=new te(r,c);for(;d=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||nN(d,s))return C.none();if(j(d)&&d.data.length>0)return eN(d,s,"A")?C.none():C.some(L(d,o?d.data.length:0));if(t.isBlock(d)||a[d.nodeName.toLowerCase()])return C.none();l=d}return so(l)?C.none():n&&l?C.some(L(l,0)):C.none()},Ub=(t,e,n,o)=>{const r=t.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=Z(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if($e(i))return C.none();if(Z(i)&&l>i.childNodes.length-1&&(u=!1),Rs(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)&&($e(s)||c[s.nodeName]||Xn(s)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=j(i)&&d?i.data.length:0,!e&&i===r.lastChild&&Xn(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(Lt(f))return!0;f=f.parentNode}return!1})(r,i)||$e(i)||kd(i))return C.none();if(i.hasChildNodes()&&!Xn(i)){s=i;const m=new te(i,r);do{if(Lt(s)||$e(s)){a=!1;break}if(j(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(c[s.nodeName.toLowerCase()]&&!v_(s)){l=t.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?m.next():m.prev())}}}return e&&(j(i)&&0===l&&jc(t,d,e,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),Z(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Ht(s)||"A"===(null===(f=s.previousSibling)||void 0===f?void 0:f.nodeName)||Fb(t,s,!1)||Fb(t,s,!0)||jc(t,d,e,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),u&&!e&&j(i)&&l===i.data.length&&jc(t,d,e,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?C.some(L(i,l)):C.none();var f},Fi=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=L.fromRangeStart(e);return Ub(t,n,!0,o).each(s=>{n&&L.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||Ub(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),zc(e,o)?C.none():C.some(o)},Ui=(t,e)=>t.splitText(e),zi=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&j(e)){if(n>0&&n<e.data.length)if(o=Ui(e,n),e=o.previousSibling,r>n){r-=n;const s=Ui(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(j(e)&&n>0&&n<e.data.length&&(e=Ui(e,n),n=0),j(o)&&r>0&&r<o.data.length){const s=Ui(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Jo=t=>({walk:(e,n)=>oa(t,e,n),split:zi,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=Xo(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>Fi(t,e).fold(zt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Jo.compareRanges=zc,Jo.getCaretRangeFromPoint=Mb,Jo.getSelectedNode=yi,Jo.getNode=mo;const oN=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return kr(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=Rn(r,t);return parseFloat(a)||0}return s},o=(r,s)=>Oe(s,(a,i)=>{const l=Rn(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!fn(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;Ss(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),zb=()=>k(document),jb=(t,e)=>t.view(e).fold(W([]),n=>{const o=t.owner(n),r=jb(t,o);return[n].concat(r)});var rN=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(k)},owner:t=>Vn(t)});const Hc=t=>"textarea"===xt(t),Hb=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return Nr(a.offsetLeft,a.offsetTop);const d=oi(i?.pageYOffset,l.scrollTop),c=oi(i?.pageXOffset,l.scrollLeft),u=oi(l.clientTop,a.clientTop),m=oi(l.clientLeft,a.clientLeft);return wd(r).translate(c-m,d-u)})(t),o=oN.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},$b=(t,e,n,o)=>{aN(t,(r,s)=>sN(t,e,n,o),n)},qb=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(t,e,xd(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},sN=(t,e,n,o)=>{k(t.getBody());const s=k(t.getDoc()),a=((i,l)=>{const d=((u,m)=>{const p=ue(u);if(0===p.length||Hc(u))return{element:u,offset:m};if(m<p.length&&!Hc(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return Hc(f)?{element:u,offset:m}:"img"===xt(f)?{element:f,offset:1}:He(f)?{element:f,offset:ii(f).length}:{element:f,offset:ue(f).length}}})(i,l),c=ws('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return De(d.element,c),Hb(c,()=>Dt(c))})(k(n.startContainer),n.startOffset);qb(t,s,e,a,o),a.cleanup()},Vb=(t,e,n,o)=>{const r=k(t.getDoc());qb(t,r,n,Hb(k(e),vt),o)},aN=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(k(o),k(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},$c=(t,e,n,o,r)=>{const s=e.pos;if(o)zg(s.left,s.top,r);else{const a=s.top-n+e.height;zg(-t.getBody().getBoundingClientRect().left,a,r)}},Wb=(t,e,n,o,r,s)=>{const a=o+n,i=r.pos.top,l=r.bottom,d=l-i>=o;i<n?$c(t,r,o,!1!==s,e):i>a?$c(t,r,o,d?!1!==s:!0===s,e):l>a&&!d&&$c(t,r,o,!0===s,e)},Kb=(t,e,n,o,r)=>{const s=xs(e).dom.innerHeight;Wb(t,e,n,s,o,r)},Yb=(t,e,n,o,r)=>{const s=xs(e).dom.innerHeight;Wb(t,e,n,s,o,r);const a=(l=>{const d=zb(),c=xd(d),u=((f,h)=>{const g=h.owner(f);return jb(h,g)})(l,rN),m=wd(l),p=cs(u,(f,h)=>{const g=wd(h);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return Nr(p.left+m.left+c.left,p.top+m.top+c.top)})(o.element),i=$g(window);a.top<i.y?jg(o.element,!1!==r):a.top>i.bottom&&jg(o.element,!0===r)},iN=(t,e,n)=>$b(t,Kb,e,n),lN=(t,e,n)=>Vb(t,e,Kb,n),dN=(t,e,n)=>$b(t,Yb,e,n),cN=(t,e,n)=>Vb(t,e,Yb,n),aa=(t,e,n)=>{(t.inline?iN:dN)(t,e,n)},Gb=(t,e=!1)=>t.dom.focus({preventScroll:e}),Xb=t=>{const e=ro(t).dom;return t.dom===e.activeElement},qc=(t=zb())=>C.from(t.dom.activeElement).map(k),Qb=(t,e)=>{const n=He(e)?ii(e).length:ue(e).length+1;return t>n?n:t<0?0:t},uN=t=>$r.range(t.start,Qb(t.soffset,t.start),t.finish,Qb(t.foffset,t.finish)),Jb=(t,e)=>!ri(e.dom)&&(qn(t,e)||kt(t,e)),Zb=t=>e=>Jb(t,e.start)&&Jb(t,e.finish),mN=t=>$r.range(k(t.startContainer),t.startOffset,k(t.endContainer),t.endOffset),fN=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},Vc=t=>{const e=t.inline||_t.browser.isFirefox()?(n=k(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(mN)})(xs(n).dom).filter(Zb(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Wc=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=k(t.getBody()),C.from(e).filter(Zb(n)).map(uN);var n}).bind(fN),t0={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Ye={setEditorTimeout:(t,e,n)=>{return fn(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(fn(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let qr;const Kc=Ot.DOM,Yc=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},ji=(t,e)=>{const n=$k(t);return null!==Kc.getParent(e,r=>{return Z(s=r)&&t0.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},Gc=t=>{try{const e=ro(k(t.getElement()));return qc(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},gN=(t,e)=>{const n=e.editor;(r=>{const s=vi(()=>{Vc(r)},0);r.on("init",()=>{var a,d;r.inline&&((a,i)=>{const l=()=>{i.throttle()};Ot.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Ot.DOM.unbind(document,"mouseup",l)})})(r,s),d=s,(a=r).on("mouseup touchend",c=>{d.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||Vc(a)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{_S(r)&&!0!==r.inline&&s(k(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;Yc(Gc(n))&&o(n,xr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Ye.setEditorTimeout(n,()=>{const r=t.focusedEditor;Yc(Gc(n))&&r===n||o(n,ys),ji(n,Gc(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),qr||(qr=r=>{const s=t.activeEditor;s&&Tg(r).each(a=>{a.ownerDocument===document&&(a===document.body||ji(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Kc.bind(document,"focusin",qr))},pN=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&qr&&(Kc.unbind(document,"focusin",qr),qr=null)},e0=(t,e)=>{var n,o,r;(n=k(t.getBody()),o=e,(r=o,r.collapsed?C.from(mo(r.startContainer,r.startOffset)).map(k):C.none()).bind(r=>w_(r)?C.some(r):qn(n,r)?C.none():C.some(n))).bind(n=>Ce(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Xc=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Zo=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=k(n),Xb(o)||(r=o,qc(ro(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):q((e=t).iframeElement)&&Xb(k(e.iframeElement));var e},n0=t=>Zo(t)||(e=>{const n=ro(k(e.getElement()));return qc(n).filter(o=>!Yc(o.dom)&&ji(e,o.dom)).isSome()})(t),Qc=t=>t.editorManager.setActive(t),o0=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),r0=(t,e,n,o,r)=>{const a=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(k).map(i=>o&&e.collapsed?i:_r(i,r(i,a)).getOr(i)).bind(i=>Fe(i)?C.some(i):sn(i).filter(Fe)).map(i=>i.dom).getOr(t)},s0=(t,e,n=!1)=>r0(t,e,!0,n,(o,r)=>Math.min(pd(o),r)),a0=(t,e,n=!1)=>r0(t,e,!1,n,(o,r)=>r>0?r-1:r),i0=(t,e)=>{const n=t;for(;t&&j(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Jc=(t,e)=>Et(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),hN=["img","br"],l0=t=>{return Gg(t).filter(n=>0!==n.trim().length||n.indexOf(re)>-1).isSome()||Rt(hN,xt(t))||Qa(n=t)&&"false"===Ue(n,"contenteditable");var n},d0="[data-mce-autocompleter]",c0=t=>ks(t,d0),vN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Hi=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},yN=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!lo(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},u0=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Ee{static create(e,n){const o=new Ee(e,vN[e]||1);return n&&Bt(n,(r,s)=>{o.attr(s,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!at(e))return q(e)&&Bt(e,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new Ee(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Hi(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Hi(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let a=s.firstChild;if(u0(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||u0(a))return!1}if(8===a.type||3===a.type&&!yN(a)||3===a.type&&a.parent&&n[a.parent.name]&&lo(null!==(r=a.value)&&void 0!==r?r:"")||o&&o(a))return!1}while(a=Hi(a,s));return!0}walk(e){return Hi(this,null,e)}}const CN=H.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),m0=t=>at(t.nodeValue)&&t.nodeValue.includes(se),f0=t=>(0===t.length?"":`${Et(t,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',g0=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>m0(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),p0=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,e=>{if(m0(e)){const n=e.parentNode;return n&&ht(CN,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),wN=t=>null!==g0(t).nextNode(),xN=t=>null!==p0(t).nextNode(),EN=(t,e)=>null!==e.querySelector(f0(t)),_N=(t,e)=>{U(e.querySelectorAll(f0(t)),n=>{const o=k(n);"all"===Ue(o,"data-mce-bogus")?Dt(o):U(t,r=>{bs(o,r)&&ce(o,r)})})},h0=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},kN=En(h0,g0),SN=En(h0,p0),b0=(t,e)=>{const n=[{condition:J(EN,e),action:J(_N,e)},{condition:wN,action:kN},{condition:xN,action:SN}];let o=t,r=!1;return U(n,({condition:s,action:a})=>{s(o)&&(r||(o=t.cloneNode(!0),r=!0),a(o))}),o},v0=t=>{const e=ve(t,"[data-mce-bogus]");U(e,n=>{"all"===Ue(n,"data-mce-bogus")?Dt(n):Mo(n)?(De(n,Er("\ufeff")),Dt(n)):Yn(n)})},y0=t=>{const e=ve(t,"input");U(e,n=>{ce(n,"name")})},C0=H.makeMap,w0=t=>{const e=[],n=(t=t||{}).indent,o=C0(t.indent_before||""),r=C0(t.indent_after||""),s=zo.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];e.push(" ",m.name,'="',s(m.value,!0),'"')}if(e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},ho=(t={},e=co())=>{const n=w0(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const d=s[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),Io(c))at(i.value)&&n.text(i.value,!0),n.end(c);else if(!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(p)}while(p=p.next)}n.end(c)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},x0=new Set;U(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{x0.add(t)});const E0=["font","text-decoration","text-emphasis"],Zc=(t,e)=>Pe(t.parseStyle(t.getAttrib(e,"style"))),RN=(t,e,n)=>{const o=Zc(t,e),r=Zc(t,n),s=a=>{var i,l;const d=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return _n(d)&&_n(c)&&d!==c};return $t(o,a=>{const i=l=>$t(l,d=>d===a);if(!i(r)&&i(E0)){const l=gt(r,d=>$t(E0,c=>le(d,c)));return $t(l,s)}return s(a)})},_0=(t,e,n)=>C.from(n.container()).filter(j).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),tu=J(_0,!0,Ur),eu=J(_0,!1,Ur),AN=t=>{const e=t.container();return j(e)&&(0===e.data.length||di(e.data)&&ra.isBookmarkNode(e.parentNode))},bo=(t,e)=>n=>pc(t?0:-1,n).filter(e).isSome(),k0=t=>Yg(t)&&"block"===Rn(k(t),"display"),S0=t=>{return Lt(t)&&!(Z(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},TN=bo(!0,k0),ON=bo(!1,k0),ia=bo(!0,An),la=bo(!1,An),N0=bo(!0,Xn),R0=bo(!1,Xn),vo=bo(!0,S0),yo=bo(!1,S0),A0=(t,e)=>{return r=zt,qn(o=e,n=t)?Sg(n,s=>r(s)||kt(s,o)).slice(0,-1):[];var n,o,r},Zn=(t,e)=>[t].concat(A0(t,e)),nu=(t,e,n)=>Gh(t,e,n,AN),T0=(t,e,n)=>{return Zt(Zn(k(e.container()),t),(o=n,r=>o.isBlock(xt(r))));var o},O0=(t,e,n,o)=>nu(t,e.dom,n).forall(r=>T0(e,n,o).fold(()=>!On(r,n,e.dom),s=>!On(r,n,e.dom)&&qn(s,k(r.container())))),B0=(t,e,n,o)=>T0(e,n,o).fold(()=>nu(t,e.dom,n).forall(r=>!On(r,n,e.dom)),r=>nu(t,r.dom,n).isNone()),ou=J(B0,!1),P0=J(B0,!0),BN=J(O0,!1),PN=J(O0,!0),DN=t=>Si(t).exists(Mo),$i=(t,e,n,o)=>{const r=gt(Zn(k(n.container()),e),a=>o.isBlock(xt(a))),s=Be(r).getOr(e);return qe(t,s.dom,n).filter(DN)},ru=(t,e,n)=>Si(e).exists(Mo)||$i(!0,t,e,n).isSome(),su=(t,e,n)=>{return(o=e,C.from(o.getNode(!0)).map(k)).exists(Mo)||$i(!1,t,e,n).isSome();var o},LN=J($i,!1),MN=J($i,!0),D0=t=>L.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),L0=(t,e,n)=>{const o=gt(Zn(k(e.container()),t),r=>n.isBlock(xt(r)));return Be(o).getOr(t)},M0=(t,e,n)=>D0(e)?eu(e):eu(e)||Le(L0(t,e,n).dom,e).exists(eu),I0=(t,e,n)=>D0(e)?tu(e):tu(e)||Ae(L0(t,e,n).dom,e).exists(tu),au=t=>Si(t).bind(e=>To(e,Fe)).exists(e=>{return n=Rn(e,"white-space"),Rt(["pre","pre-wrap"],n);var n}),F0=(t,e)=>n=>{return o=new te(n,t)[e](),q(o)&&Lt(o)&&Mh(o);var o},U0=(t,e,n)=>{return!au(e)&&(s=n,Le((o=t).dom,r=e).isNone()||Ae(o.dom,r).isNone()||ou(o,r,s)||P0(o,r,s)||su(o,r,s)||ru(o,r,s)||M0(t,e,n)||I0(t,e,n));var o,r,s},da=(t,e,n)=>!au(e)&&(ou(t,e,n)||BN(t,e,n)||su(t,e,n)||M0(t,e,n)||((o,r)=>{const s=Le(o.dom,r).getOr(r),a=F0(o.dom,"prev");return r.isAtStart()&&(a(r.container())||a(s.container()))})(t,e)),ca=(t,e,n)=>!au(e)&&(P0(t,e,n)||PN(t,e,n)||ru(t,e,n)||I0(t,e,n)||((o,r)=>{const s=Ae(o.dom,r).getOr(r),a=F0(o.dom,"next");return r.isAtEnd()&&(a(r.container())||a(s.container()))})(t,e)),iu=(t,e,n)=>da(t,e,n)||ca(t,(o=>{const r=o.container(),s=o.offset();return j(r)&&s<r.data.length?L(r,s+1):o})(e),n),z0=(t,e)=>Ti(t.charAt(e)),j0=(t,e)=>Ur(t.charAt(e)),H0=(t,e,n,o)=>{const r=e.data,s=L(e,0);return n||!z0(r,0)||iu(t,s,o)?!!(n&&j0(r,0)&&da(t,s,o))&&(e.data=re+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},$0=(t,e,n,o)=>{const r=e.data,s=L(e,r.length-1);return n||!z0(r,r.length-1)||iu(t,s,o)?!!(n&&j0(r,r.length-1)&&ca(t,s,o))&&(e.data=r.slice(0,-1)+re,!0):(e.data=r.slice(0,-1)+" ",!0)},q0=(t,e,n,o)=>{if(0===n)return;const r=k(t),s=Wn(r,d=>o.isBlock(xt(d))).getOr(r),a=t.data.slice(e,e+n),i=e+n>=t.data.length&&ca(s,L(t,t.data.length),o),l=0===e&&da(s,L(t,0),o);t.replaceData(e,n,op(a,4,l,i))},qi=(t,e,n)=>{const o=t.data.slice(e),r=o.length-WE(o).length;q0(t,e,r,n)},lu=(t,e,n)=>{const o=t.data.slice(0,e),r=o.length-Xf(o).length;q0(t,e-r,r,n)},du=(t,e,n,o,r=!0)=>{const s=Xf(t.data).length,a=r?t:e,i=r?e:t;return r?a.appendData(i.data):a.insertData(0,i.data),Dt(k(i)),o&&qi(a,s,n),a},FN=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!L.isTextPosition(n)&&r===o.parentNode&&s>L.before(o).offset()})(e,t)?L(e.container(),e.offset()-1):e,V0=t=>{return ln(t.previousSibling)?C.some(j(e=t.previousSibling)?L(e,e.data.length):L.after(e)):t.previousSibling?dn(t.previousSibling):C.none();var e},W0=t=>{return ln(t.nextSibling)?C.some(j(e=t.nextSibling)?L(e,0):L.before(e)):t.nextSibling?Ce(t.nextSibling):C.none();var e},K0=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},zN=(t,e)=>e&&ht(t.schema.getBlockElements(),xt(e)),tr=(t,e,n,o=!0,r=!1)=>{const s=((t,e,n)=>{return(o=t,r=e,s=n,o?(a=r,W0(i=s).orThunk(()=>V0(i)).orThunk(()=>{return Ae(l=a,L.after(d=i)).orThunk(()=>Le(l,L.before(d)));var l,d})):((a,i)=>V0(i).orThunk(()=>W0(i)).orThunk(()=>{return l=a,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>Le(l,L.before(c))).orThunk(()=>Ae(l,L.after(d)));var l,d}))(r,s)).map(J(FN,n));var o,r,s,a,i})(e,t.getBody(),n.dom),a=Wn(n,J(zN,t),(i=t.getBody(),d=>d.dom===i));var i;const l=((d,c,u,m)=>{const p=Ao(d).filter(He),f=Es(d).filter(He);return Dt(d),(h=p,g=f,b=c,v=(y,x,w)=>{const E=y.dom,N=x.dom,T=E.data.length;return du(E,N,u,m),w.container()===N?L(E,T):w},h.isSome()&&g.isSome()&&b.isSome()?C.some(v(h.getOrDie(),g.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(m&&(p.each(y=>lu(y.dom,y.dom.length,u)),f.each(y=>qi(y.dom,0,u))),c));var h,g,b,v})(n,s,t.schema,(c=n,ht(t.schema.getTextInlineElements(),xt(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(d=>((c,u)=>{if(Vt(c)){const m=ws('<br data-mce-bogus="1">');return u?U(ue(c),p=>{Lc(p)||Dt(p)}):Sr(c),Yt(c,m),C.some(L.before(m.dom))}return C.none()})(d,r)).fold(()=>{o&&K0(t,e,l)},d=>{o&&K0(t,e,C.some(d))})},jN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,er=(t,e)=>gn(k(e),Pk(t))&&!Fo(t.schema,e)&&t.dom.isEditable(e),Y0=t=>{var e,n;return"rtl"===Ot.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",jN.test(n))},Co=(t,e,n)=>{const o=(r=t,s=e,gt(Ot.DOM.getParents(n.container(),"*",s),r));var r,s;return C.from(o[o.length-1])},Ge=(t,e)=>{const n=e.container(),o=e.offset();return t?io(n)?j(n.nextSibling)?L(n.nextSibling,0):L.after(n):Ad(e)?L(n,o+1):e:io(n)?j(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):Td(e)?L(n,o-1):e},G0=J(Ge,!0),X0=J(Ge,!1),Q0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},cu=t=>Q0(t,"Delete"),HN=t=>Xg(t)||Ts(t),Vi=(t,e)=>{return qn(t,e)?To(e,HN,(n=t,o=>Cr(sn(o),n,kt))):C.none();var n},uu=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},J0=(t,e,n)=>be(Ce(n),dn(n),(o,r)=>{const s=Ge(!0,o),a=Ge(!1,r),i=Ge(!1,e);return t?Ae(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):Le(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),Z0=t=>{var e;return(8===hg(e=t)||"#comment"===xt(e)?Ao(t):gd(t)).bind(Z0).orThunk(()=>C.some(t))},tv=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=Z0(n).getOr(n),a=k(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===t.getBody()?uu(t,o):Vt(a)&&(ao(a),o&&t.selection.setCursorLocation(a.dom,0)),!kt(n,a)){const l=Cr(sn(a),n)?[]:sn(i=a).map(ue).map(d=>gt(d,c=>!kt(i,c))).getOr([]);U(l.concat(ue(n)),d=>{kt(d,a)||qn(d,a)||!Vt(d)||Dt(d)})}var i},ev=(t,e)=>Bg(t,e).isSome(),mu=t=>ve(t,"td,th"),nv=(t,e)=>ea(k(t),e),fu=(t,e)=>({start:t,end:e}),ua=Tn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Wi=(t,e)=>Oo(k(t),"td,th",e),ov=t=>!kt(t.start,t.end),rv=(t,e)=>ea(t.start,e).bind(n=>ea(t.end,e).bind(o=>wr(kt(n,o),n))),gu=t=>e=>rv(e,t).map(n=>({rng:e,table:n,cells:mu(n)})),sv=(t,e,n,o)=>{if(n.collapsed||!t.forall(ov))return C.none();if(e.isSameTable){const r=t.bind(gu(o));return C.some({start:r,end:r})}{const r=Wi(n.startContainer,o),s=Wi(n.endContainer,o),a=r.bind((l=o,d=>ea(d,l).bind(c=>ko(mu(c)).map(u=>fu(d,u))))).bind(gu(o)),i=s.bind((l=>d=>ea(d,l).bind(c=>Be(mu(c)).map(u=>fu(u,d))))(o)).bind(gu(o));return C.some({start:a,end:i})}var l},av=(t,e)=>us(t,n=>kt(n,e)),pu=t=>be(av(t.cells,t.rng.start),av(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),iv=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},lv=t=>U(t,e=>{ce(e,"contenteditable"),ao(e)}),hu=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),bu(t,r,e,!1).each(s=>s())},dv=t=>{const e=zr(t),n=k(t.selection.getNode());ai(n.dom)&&Vt(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&$t(e,o=>kt(o,n))&&de(n,"data-mce-selected","1")},cv=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=C.from((d=t).dom.getParent(a?s.endContainer:s.startContainer,d.dom.isBlock)).map(k);var d;s.deleteContents(),((d,c,u)=>{u.each(m=>{c?Dt(m):(ao(m),d.selection.setCursorLocation(m.dom,0))})})(t,a,i.filter(Vt));const l=a?e[0]:e[e.length-1];return hu(t,l,o,a),Vt(l)?C.none():C.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);lv(r),dv(t)}),VN=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];hu(t,s,r,!0),hu(t,a,r,!1);const i=Vt(s)?e:e.slice(1),l=Vt(a)?n:n.slice(0,-1);lv(i.concat(l)),o.deleteContents(),dv(t)}),bu=(t,e,n,o=!0)=>C.some(()=>{tv(t,e,n,o)}),WN=(t,e)=>C.some(()=>tr(t,!1,e)),uv=(t,e)=>Zt(Zn(e,t),Os),vu=(t,e)=>Zt(Zn(e,t),Ja("caption")),Ki=(t,e)=>C.some(()=>{ao(e),t.selection.setCursorLocation(e.dom,0)}),mv=(t,e)=>t?N0(e):R0(e),yu=(t,e)=>{const n=k(t.selection.getStart(!0)),o=zr(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=k(t.getBody());return vu(o,n).fold(()=>((r,s,a,i)=>{const l=L.fromRangeStart(r.selection.getRng());return uv(a,i).bind(d=>{return Vt(d)?Ki(r,d):(u=a,p=d,f=l,Ir(s,r.getBody(),f).bind(h=>uv(u,k(h.getNode())).bind(g=>kt(g,p)?C.none():C.some(vt))));var u,p,f})})(t,e,o,n).orThunk(()=>wr(((r,s)=>{const a=L.fromRangeStart(r.selection.getRng());return mv(s,a)||qe(s,r.getBody(),a).exists(i=>mv(s,i))})(t,e),vt)),r=>((s,a,i,l)=>{const d=L.fromRangeStart(s.selection.getRng());return Vt(l)?Ki(s,l):(u=i,p=l,f=d,Ir(m=a,(c=s).getBody(),f).fold(()=>C.some(vt),h=>{return b=m,v=f,y=h,Ce((g=p).dom).bind(x=>dn(g.dom).map(w=>b?v.isEqual(x)&&y.isEqual(w):v.isEqual(w)&&y.isEqual(x))).getOr(!0)?((g,b)=>Ki(g,b))(c,p):((g,b,v)=>vu(g,k(v.getNode())).fold(()=>C.some(vt),y=>wr(!kt(y,b),vt)))(u,p,h);var g,b,v,y}));var c,u,m,p,f})(t,e,o,r))})(t,e,n):((r,s,a)=>{const i=k(r.getBody()),l=r.selection.getRng();return 0!==a.length?cv(r,a,C.none()):(d=r,u=l,vu(c=i,s).fold(()=>{return p=d,((t,e)=>{const n=(s=t,a=>kt(s,a)),o=((s,a)=>{const i=Wi(s.startContainer,a),l=Wi(s.endContainer,a);return be(i,l,fu)})(e,n),r=((s,a)=>{const i=nv(s.startContainer,a),l=nv(s.endContainer,a),d=i.isSome(),c=l.isSome(),u=be(i,l,kt).getOr(!1);return be((m={startTable:i,endTable:l,isStartInTable:d,isEndInTable:c,isSameTable:u,isMultiTable:!u&&d&&c}).startTable,m.endTable,(p,f)=>{const h=ev(p,b=>kt(b,f)),g=ev(f,b=>kt(b,p));return h||g?{...m,startTable:h?C.none():m.startTable,endTable:g?C.none():m.endTable,isSameTable:!1,isMultiTable:!1}:m}).getOr(m);var m})(e,n);var s;return((s,a,i)=>s.exists(l=>{return c=i,!ov(d=l)&&rv(d,c).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&kc(l.start,a);var d,c}))(o,e,n)?o.map(s=>ua.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>sv(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(pu).getOr([]),m=c.bind(pu).getOr([]);if(u.length>0&&m.length>0){const p=iv(i,a);return C.some(ua.multiTable(u,m,p))}return C.none()}))(o,r,e,n):((s,a,i,l)=>sv(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=pu(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(ua.fullTable(d.table));if(u.length>0){if(c)return C.some(ua.partialTable(u,C.none()));{const m=iv(i,a);return C.some(ua.partialTable(u,C.some({...a,rng:m})))}}return C.none()}))(o,r,e,n)})(c,u).bind(g=>g.fold(J(bu,p),J(WN,p),J(cv,p),J(VN,p)));var p},p=>Ki(d,p)));var d,c,u})(t,n,o)},nr=(t,e)=>{let n=e;for(;n&&n!==t;){if(an(n)||Lt(n))return n;n=n.parentNode}return null},YN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],GN=H.each,Cu=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>$t(YN,s=>le(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const d={};return GN(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(ht(l,c)){const u=d[c];if(fe(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(ht(d,c))return!1;return!0};return!(Z(r)&&Z(s)&&(!i(a(r),a(s))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||We(r)||We(s))},isAttributeInternal:o}},fv=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),gv=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},pv=(t,e)=>{const n=(o,r)=>{Bt(o,s=>{const a=Ie(s.nodes);U(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const d=a[l];(r?void 0!==d.attr(s.filter.name):d.name===s.filter.name)&&!Gt(d.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},hv=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)gv(s,a,u,l)})(i),l})(t,e,n);pv(r,o)},wu=(t,e,n,o)=>{if((t.pad_empty_with_br||e.insert)&&n(o)){const r=new Ee("br",1);e.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Ee("#text",3)).value=re},bv=(t,e)=>{const n=t?.firstChild;return q(n)&&n===t.lastChild&&n.name===e},ma=(t,e,n,o)=>o.isEmpty(e,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return!0===i?.paddEmpty})(t,r)),XN=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return C.from(e)},xu=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&xu(r,e,n);t.unwrap()}},Eu=(t,e,n,o=vt)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=H.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let m,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&r[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(_u(e,u,m))xu(u,e);else{h.reverse(),p=h[0].clone(),o(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}ma(e,s,a,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(ma(e,s,a,m)||bv(m,"br"))&&m.empty().remove()}else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new Ee("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new Ee("div",1);o(g),u.wrap(g)}else xu(u,e)}}},_u=(t,e,n=e.parent)=>{return!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(o=n,"summary"!==o.name||!fv(e)||n?.firstChild===e&&n?.lastChild===e));var o},ku=t=>t.collapsed?t:(e=>{const n=L.fromRangeStart(e),o=L.fromRangeEnd(e),r=e.commonAncestorContainer;return qe(!1,r,o).map(s=>!On(n,o,r)&&On(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),Su=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},vv=(t,e)=>{const n=L.after(t),o=Pn(e).prev(n);return o?o.toRange():null},tR=["pre"],Nu=ai,eR=(t,e,n)=>{var o,r;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,d=ho({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=ze(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=s.getRng();const m=u.startContainer,p=t.getBody();var y,x;m===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&(y=t,q(x=p.firstChild)&&!y.schema.getVoidElements()[x.nodeName])&&a.isEmpty(p.firstChild)&&(u=a.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(y=>{const x=y.dom,w=ku(y.selection.getRng());y.selection.setRng(w);const E=x.getParent(w.startContainer,Nu);var N,T,O;N=x,T=w,q(O=E)&&O===N.getParent(T.endContainer,Nu)&&kc(k(O),T)?bu(y,w,k(E)):w.startContainer===w.endContainer&&w.endOffset-w.startOffset==1&&j(w.startContainer.childNodes[w.startOffset])?w.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=s.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return q(s)&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&q((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===re)(l.firstChild)));var l,d})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((y,x)=>!!Su(y,x))(a,f))return u=((t,e,n,o)=>{const r=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),s=Su(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||q(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===re||Ht(o)))?t.slice(0,-1):t;var o,e,n})((i=r.firstChild,gt(null!==(l=i?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName)));var i,l;const d=e.getRoot(),c=u=>{const m=L.fromRangeStart(n),p=Pn(e.getRoot()),f=1===u?p.prev(m):p.next(m),h=f?.getNode();return!h||Su(e,h)!==s};return s?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&H.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=L.before(h),v=Pn(g).next(b);return v?v.toRange():null})(u,p)})(s,a,d):c(2)?(u=s,p=d,e.insertAfter((m=a).reverse(),u),vv(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),x=v.cloneRange();return y.setStartBefore(b),x.setEndAfter(b),[y.cloneContents(),x.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),H.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),vv(m[m.length-1],p)})(s,a,d,n):null;var u,m,p})(d,a,s.getRng(),g),u&&s.setRng(u),e;!0===n.paste&&((y,x,w,E)=>{var N;const T=x.firstChild,O=x.lastChild,P=T===("bookmark"===O.attr("data-mce-type")?O.prev:O),_=Rt(tR,T.name);if(P&&_){const R="false"!==T.attr("contenteditable"),B=(null===(N=y.getParent(w,y.isBlock))||void 0===N?void 0:N.nodeName.toLowerCase())===T.name,M=C.from(nr(E,w)).forall(an);return R&&B&&M}return!1})(a,g,f,t.getBody())&&(null===(o=g.firstChild)||void 0===o||o.unwrap()),(y=>{let x=y;for(;x=x.walk();)1===x.type&&x.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!a.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid||((y,x,w)=>{var E;return $t(w.children(),fv)&&"SUMMARY"===(null===(E=y.getParent(x,y.isBlock))||void 0===E?void 0:E.nodeName)})(a,f,g)){t.selection.setContent(c);let y,x=s.getNode();const w=t.getBody();for(Rs(x)?x=y=w:y=x;y&&y!==w;)x=y,y=y.parentNode;e=x===w?w.innerHTML:a.getOuterHTML(x);const E=i.parse(e),N=(R=>{for(let B=R;B;B=B.walk())if("mce_marker"===B.attr("id"))return C.some(B);return C.none()})(E),T=N.bind(XN).getOr(E);N.each(R=>R.replace(g));const O=g.children(),P=null!==(r=g.parent)&&void 0!==r?r:E;g.unwrap();const _=gt(O,R=>_u(t.schema,R,P));Eu(_,t.schema,T),hv(i.getNodeFilters(),i.getAttributeFilters(),E),e=d.serialize(E),x===w?a.setHTML(w,e):a.setOuterHTML(x,e)}else e=d.serialize(g),((y,x,w)=>{var E;if("all"===w.getAttribute("data-mce-bogus"))null===(E=w.parentNode)||void 0===E||E.insertBefore(y.dom.createFragment(x),w);else{const N=w.firstChild;!N||N===w.lastChild&&"BR"===N.nodeName?y.dom.setHTML(w,x):y.selection.setContent(x,{no_events:!0})}})(t,e,f);var v;return((y,x)=>{const w=y.schema.getTextInlineElements(),E=y.dom;if(x){const N=y.getBody(),T=Cu(y);H.each(E.select("*[data-mce-fragment]"),O=>{if(q(w[O.nodeName.toLowerCase()])&&zn(Zc(E,O),R=>!x0.has(R)))for(let P=O.parentElement;q(P)&&P!==N&&!RN(E,O,P);P=P.parentElement)if(T.compare(P,O)){E.remove(O,!0);break}})}})(t,l),((y,x)=>{var w,E,N;let T;const O=y.dom,P=y.selection;if(!x)return;P.scrollIntoView(x);const _=nr(y.getBody(),x);if(_&&"false"===O.getContentEditable(_))return O.remove(x),void P.select(_);let R=O.createRng();const B=x.previousSibling;if(j(B)){R.setStart(B,null!==(E=null===(w=B.nodeValue)||void 0===w?void 0:w.length)&&void 0!==E?E:0);const V=x.nextSibling;j(V)&&(B.appendData(V.data),null===(N=V.parentNode)||void 0===N||N.removeChild(V))}else R.setStartBefore(x),R.setEndBefore(x);const M=O.getParent(x,O.isBlock);if(O.remove(x),M&&O.isEmpty(M)){const V=Nu(M);Sr(k(M)),R.setStart(M,0),R.setEnd(M,0),V||M.getAttribute("data-mce-fragment")||!(T=($=>{let ot=L.fromRangeStart($);return ot=Pn(y.getBody()).next(ot),ot?.toRange()})(R))?O.add(M,O.create("br",V?{}:{"data-mce-bogus":"1"})):(R=T,O.remove(M))}P.setRng(R)})(t,a.get("mce_marker")),v=t.getBody(),H.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,x,w)=>{C.from(y.getParent(x,"td,th")).map(k).each(E=>{return T=w,void gd(N=E).each(O=>{Ao(O).each(P=>{T.isBlock(xt(N))&&Mo(O)&&T.isBlock(xt(P))&&Dt(O)})});var N,T})})(a,s.getStart(),t.schema),((y,x,w)=>{const E=Sg(k(w),N=>kt(N,k(x)));qa(E,E.length-2).filter(Fe).fold(()=>Ld(y,x),N=>Ld(y,N.dom))})(t.schema,t.getBody(),s.getStart()),e},Yi=t=>t instanceof Ee,Ru=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&Zo(o=t)&&Ce(o.getBody()).each(r=>{const s=r.getNode(),a=Xn(s)?Ce(s).getOr(r):r;o.selection.setRng(a.toRange())})},yv=t=>Nt(t)?t:zt,Au=(t,e,n)=>{const o=e(t),r=yv(n);return o.orThunk(()=>r(t)?C.none():((s,a,i)=>{let l=s.dom;const d=yv(i);for(;l.parentNode;){l=l.parentNode;const c=k(l),u=a(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},Tu=Oc,Cv=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(Ke(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Ou=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!Cv(t,i,n)||i.parentNode===s||!!Ln(t,i,n,o,!0));return!!Ln(t,a,n,o,r)},Gi=(t,e,n)=>!(!ee(n)||!Tu(e,n.inline))||!(!Dn(n)||!Tu(e,n.block))||!!Ke(n)&&Z(e)&&t.is(e,n.selector),wv=(t,e,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(Nt(n.onmatch))return n.onmatch(e,n,o);if(a)if(qf(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Bi(t,e,a[l]))return!0}else for(const l in a)if(ht(a,l)){const d=i?t.getAttrib(e,l):Bi(t,e,l),c=po(a[l],s),u=Gt(d)||hs(d);if(u&&Gt(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Tu(d,Bc(c,l)))return!1}return!0},Ln=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&Z(e))for(let i=0;i<s.length;i++){const l=s[i];if(Gi(t.dom,e,l)&&wv(a,e,l,"attributes",r,o)&&wv(a,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,po(d[c],o)))return;return l}}},Bu=(t,e,n,o,r)=>{if(o)return Ou(t,o,e,n,r);if(o=t.selection.getNode(),Ou(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Ou(t,s,e,n,r))},fa=se,xv=t=>{if(t){const e=new te(t,t);for(let n=e.current();n;n=e.next())if(j(n))return n}return null},Pu=t=>{const e=oe("span");return Hn(e,{id:Cc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Yt(e,Er(fa)),e},Du=(t,e,n)=>{const o=t.dom,r=t.selection;if(cb(e))tr(t,!1,k(e),n,!0);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(m=>{const p=xv(m);return p&&p.data.charAt(0)===fa&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&ao(k(a)),r.setRng(s)}},Lu=(t,e,n)=>{const o=t.dom,r=t.selection;if(e)Du(t,e,n);else if(!(e=Go(t.getBody(),r.getStart())))for(;e=o.get(Cc);)Du(t,e,n)},Ev=(t,e)=>(t.appendChild(e),e),_v=(t,e)=>{var n;const o=cs(t,(s,a)=>Ev(s,a.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return Ev(o,r.createTextNode(fa))},kv=t=>{const e=Pu(!1),n=_v(t,e.dom);return{caretContainer:e,caretPosition:L(n,0)}},Sv=(t,e)=>{const{caretContainer:n,caretPosition:o}=kv(e);return De(k(t),n),Dt(k(t)),o},Nv=(t,e)=>{if(Ve(e.dom))return!1;const n=t.schema.getTextInlineElements();return ht(n,xt(e))&&!Ve(e.dom)&&!Lo(e.dom)},ga={},Rv=pn(["pre"]);((t,e)=>{ga[t]||(ga[t]=[]),ga[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=gt(gt(o,Rv),(s=o,a=>{const i=a.previousSibling;return Rv(i)&&Rt(s,i)}));U(r,s=>{((a,i)=>{const l=k(i),d=Vn(l).dom;Dt(l),Po(k(a),[oe("br",d),oe("br",d),...ue(l)])})(s.previousSibling,s)})}var s})})("pre");const Av=["fontWeight","fontStyle","color","fontSize","fontFamily"],Tv=(t,e)=>{const n=t.get(e);return Jt(n)?Zt(n,o=>{return ee(o)&&"span"===o.inline&&we((r=o).styles)&&$t(Pe(r.styles),s=>Rt(Av,s));var r}):C.none()},Ov=(t,e)=>Le(e,L.fromRangeStart(t)).isNone(),Bv=(t,e)=>!1===Ae(e,L.fromRangeEnd(t)).exists(n=>!Ht(n.getNode())||Ae(e,n).isSome()),Pv=t=>e=>y_(e)&&t.isEditable(e),Dv=t=>gt(t.getSelectedBlocks(),Pv(t.dom)),Mu=H.each,Iu=t=>Z(t)&&!We(t)&&!Ve(t)&&!Lo(t),Lv=(t,e)=>{for(let n=t;n;n=n[e]){if(j(n)&&_n(n.data))return t;if(Z(n)&&!We(n))return n}return t},Mv=(t,e,n)=>{const o=Cu(t),r=Gn(e)&&t.dom.isEditable(e),s=Gn(n)&&t.dom.isEditable(n);if(r&&s){const a=Lv(e,"previousSibling"),i=Lv(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,a.appendChild(d)}return t.dom.remove(i),H.each(H.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},Iv=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=Mv(t,ib(o),o))&&void 0!==r?r:o;Mv(t,s,ib(s,!0))}},Fu=(t,e,n)=>{Mu(t.childNodes,o=>{Iu(o)&&(e(o)&&n(o),o.hasChildNodes()&&Fu(o,e,n))})},Fv=(t,e)=>n=>!(!n||!Bi(t,n,e)),Uv=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},or=Tn([{keep:[]},{rename:["name"]},{removed:[]}]),oR=/^(src|href|style)$/,Uu=H.each,Xi=Oc,zv=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),jv=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Z(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return j(o)&&n&&r>=o.data.length&&(o=new te(o,t.getBody()).next()||o),j(o)&&!n&&0===r&&(o=new te(o,t.getBody()).prev()||o),o},Hv=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},zu=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},$v=(t,e,n,o,r)=>{const s=k(e),a=k(t.create(o,r)),i=n?Rg(s):Ng(s);return Po(a,i),n?(De(s,a),yd(a,s)):(Kn(s,a),Yt(a,s)),a.dom},qv=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,a=ye(t);var i;Dn(n)&&o===s.getRoot()&&(n.list_block&&Xi(e,n.list_block)||U(Ie(e.childNodes),i=>{jr(t,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=zu(s,i,a),s.setAttribs(r,Ks(t))):r=null})),Ke(i=n)&&ee(i)&&Cr(Pt(i,"mixed"),!0)&&!Xi(n.inline,e)||s.remove(e,!0)},Vv=(t,e,n)=>fn(t)?{name:e,value:null}:{name:t,value:po(e,n)},Wv=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},Kv=(t,e,n,o,r)=>{let s=!1;Uu(n.styles,(a,i)=>{const{name:l,value:d}=Vv(i,a,o),c=Bc(d,l);(n.remove_similar||Se(d)||!Z(r)||Xi(Bi(t,r,l),c))&&t.setStyle(e,l,""),s=!0}),s&&Wv(t,e)},Yv=(t,e,n,o,r)=>{const s=t.dom,a=Cu(t),i=t.schema;if(ee(e)&&Id(i,e.inline)&&Fo(i,o)&&o.parentElement===t.getBody())return qv(t,o,e),or.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Gi(s,o,e)&&(!e.links||"A"!==o.nodeName))return or.keep();const l=o,d=e.preserve_attributes;if(ee(e)&&"all"===e.remove&&Jt(d)){const c=gt(s.getAttribs(l),u=>Rt(d,u.name.toLowerCase()));if(s.removeAllAttribs(l),U(c,u=>s.setAttrib(l,u.name,u.value)),c.length>0)return or.rename("span")}if("all"!==e.remove){Kv(s,l,e,n,r),Uu(e.attributes,(u,m)=>{const{name:p,value:f}=Vv(m,u,n);if(e.remove_similar||Se(f)||!Z(r)||Xi(s.getAttrib(r,p),f)){if("class"===p){const h=s.getAttrib(l,p);if(h){let g="";if(U(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void s.setAttrib(l,p,g)}}if(oR.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&pn(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),Uu(e.classes,u=>{u=po(u,n),Z(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const c=s.getAttribs(l);for(let u=0;u<c.length;u++)if(!a.isAttributeInternal(c[u].nodeName))return or.keep()}return"none"!==e.remove?(qv(t,l,e),or.removed()):or.keep()},rR=(t,e,n,o)=>Yv(t,e,n,o,o).fold(W(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),W(null)),Gv=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((s,a,i,l,d)=>{const c=s.formatter.get(a),u=c[0],m=s.dom,p=s.selection,f=y=>{const x=((w,E,N,T,O)=>{let P;return E.parentNode&&U(Pi(w.dom,E.parentNode).reverse(),_=>{if(!P&&Z(_)&&"_start"!==_.id&&"_end"!==_.id){const R=Ln(w,_,N,T,O);R&&!1!==R.split&&(P=_)}}),P})(s,y,a,i,d);return((w,E,N,T,O,P,_,R)=>{var B,M;let V,$;const ot=w.dom;if(N){const et=N.parentNode;for(let lt=T.parentNode;lt&&lt!==et;lt=lt.parentNode){let rt=ot.clone(lt,!1);for(let K=0;K<E.length&&(rt=rR(w,E[K],R,rt),null!==rt);K++);rt&&(V&&rt.appendChild(V),$||($=rt),V=rt)}_.mixed&&ot.isBlock(N)||(T=null!==(B=ot.split(N,T))&&void 0!==B?B:T),V&&$&&(null===(M=O.parentNode)||void 0===M||M.insertBefore(V,O),$.appendChild(O),ee(_)&&Iv(w,_,0,V))}return T})(s,c,x,y,y,0,u,i)},h=y=>$t(c,x=>pa(s,x,i,y,y)),g=y=>{const x=Ie(y.childNodes),w=h(y)||$t(c,N=>Gi(m,y,N)),E=y.parentNode;if(!w&&q(E)&&Dc(u)&&h(E),u.deep&&x.length)for(let N=0;N<x.length;N++)g(x[N]);U(["underline","line-through","overline"],N=>{Z(y)&&s.dom.getStyle(y,"text-decoration")===N&&y.parentNode&&db(m,y.parentNode)===N&&pa(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:N}},void 0,y)})},b=y=>{const x=m.get(y?"_start":"_end");if(x){let w=x[y?"firstChild":"lastChild"];return We(E=w)&&Z(E)&&("_start"===E.id||"_end"===E.id)&&(w=w[y?"firstChild":"lastChild"]),j(w)&&0===w.data.length&&(w=y?x.previousSibling||x.nextSibling:x.nextSibling||x.previousSibling),m.remove(x,!0),w}var E;return null},v=y=>{let x,w,E=Xo(m,y,c,y.collapsed);if(u.split){if(E=zi(E),x=jv(s,E,!0),w=jv(s,E),x!==w){if(x=Hv(x,!0),w=Hv(w,!1),zv(m,x,w)){const T=C.from(x.firstChild).getOr(x);return f($v(m,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(zv(m,w,x)){const T=C.from(w.lastChild).getOr(w);return f($v(m,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}x=zu(m,x,"span",{id:"_start","data-mce-type":"bookmark"}),w=zu(m,w,"span",{id:"_end","data-mce-type":"bookmark"});const N=m.createRng();N.setStartAfter(x),N.setEndBefore(w),oa(m,N,T=>{U(T,O=>{We(O)||We(O.parentNode)||f(O)})}),f(x),f(w),x=b(!0),w=b()}else x=w=f(x);E.startContainer=x.parentNode?x.parentNode:x,E.startOffset=m.nodeIndex(x),E.endContainer=w.parentNode?w.parentNode:w,E.endOffset=m.nodeIndex(w)+1}oa(m,E,N=>{U(N,g)})};if(l){if(na(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);Sb(s,a,l,i)}else p.isCollapsed()&&ee(u)&&!zr(s).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),d=l.startContainer,c=l.startOffset;let u=d;j(d)&&(c!==d.data.length&&(a=!0),u=u.parentNode);const m=[];let p;for(;u;){if(Ln(t,u,e,n,o)){p=u;break}u.nextSibling&&(a=!0),m.push(u),u=u.parentNode}if(p)if(a){const f=s.getBookmark();l.collapse(!0);let h=Xo(r,l,i,!0);h=zi(h),t.formatter.remove(e,n,h,o),s.moveToBookmark(f)}else{const f=Go(t.getBody(),p),h=q(f)?r.getParents(p.parentNode,Kt,f):[],g=Pu(!1).dom;((y,x,w)=>{var E,N;const T=y.dom,O=T.getParent(w,J(Ac,y.schema));O&&T.isEmpty(O)?null===(E=w.parentNode)||void 0===E||E.replaceChild(x,w):((P=>{const _=ve(P,"br"),R=gt((B=>{const M=[];let V=B.dom;for(;V;)M.push(k(V)),V=V.lastChild;return M})(P).slice(-1),Mo);_.length===R.length&&U(R,Dt)})(k(w)),T.isEmpty(w)?null===(N=w.parentNode)||void 0===N||N.replaceChild(x,w):T.insertAfter(x,w))})(t,g,f??p);const b=((y,x,w,E,N,T)=>{const O=y.formatter,P=y.dom,_=gt(Pe(O.get()),B=>B!==E&&!he(B,"removeformat")),R=(B=y,M=w,Oe(_,($,ot)=>{const et=Pc(B,ot,K=>{const X=mt=>Nt(mt)||mt.length>1&&"%"===mt.charAt(0);return $t(["styles","attributes"],mt=>Pt(K,mt).exists(S=>{const A=Jt(S)?S:od(S);return $t(A,X)}))});return B.formatter.matchNode(M,ot,{},et)?$.concat([ot]):$},[]));var B,M;if(gt(R,B=>!((M,V,$)=>{const ot=["inline","block","selector","attributes","styles","classes"],et=lt=>fs(lt,(rt,K)=>$t(ot,X=>X===K));return Pc(M,V,lt=>{const rt=et(lt);return Pc(M,$,K=>{const X=et(K);return((mt,S,A=Xl)=>Of(A).eq(mt,S))(rt,X)})})})(y,B,E)).length>0){const B=w.cloneNode(!1);return P.add(x,B),O.remove(E,N,B,T),P.remove(B),C.some(B)}return C.none()})(t,g,p,e,n,o),v=_v([...m,...b.toArray(),...h],g);f&&Du(t,f,q(f)),s.setCursorLocation(v,1),r.isEmpty(p)&&r.remove(p)}})(s,a,i,d):(ab(s,()=>Nc(s,v),y=>ee(u)&&Bu(s,a,i,y)),s.nodeChanged()),y=s,w=i,"removeformat"===(x=a)?U(Dv(y.selection),E=>{U(Av,N=>y.dom.setStyle(E,N,"")),Wv(y.dom,E)}):Tv(y.formatter,x).each(E=>{U(Dv(y.selection),N=>Kv(y.dom,N,E,w,null))}),Sb(s,a,l,i);var y,x,w})(t,e,n,o,r)},pa=(t,e,n,o,r)=>Yv(t,e,n,o,r).fold(zt,s=>(t.dom.rename(o,s),!0),Kt),Xv=H.each,Qi=H.each,Qv=(t,e,n,o)=>{if(Qi(n.styles,(r,s)=>{t.setStyle(e,s,po(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},sR=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=s)=>{Nt(h.onformat)&&h.onformat(f,h,n,o),Qv(i,f,h,n),Qi(h.attributes,(g,b)=>{i.setAttrib(f,b,po(g,n))}),Qi(h.classes,g=>{const b=po(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return Qi(f,b=>!(!Ke(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!q(b.collapsed)||b.collapsed===a)&&i.is(h,b.selector)&&!Ve(h)&&(d(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=s.inline||s.block,x=(f=>{if(at(f)){const h=i.create(f);return d(h),h}return null})(y);oa(f,h,w=>{let E;const N=T=>{let O=!1,P=v,_=!1;const R=T.parentNode,B=R.nodeName.toLowerCase(),M=f.getContentEditable(T);q(M)&&(P=v,v="true"===M,O=!0,_=lb(t,T));const V=v&&!O;if(Ht(T)&&!(($,ot,et,lt)=>{if(jk($)&&ee(ot)&&et.parentNode){const rt=Cp($.schema),K=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=k(r.parentNode),Zt(s.dom.childNodes,i=>(s=>!kt(n,s)&&o(s))(k(i))).map(k)):C.none();var s})(t,e).isSome())(k(et),X=>Ve(X.dom));return vr(rt,lt)&&Vt(k(et.parentNode),!1)&&!K}return!1})(t,s,T,B))return E=null,void(Dn(s)&&f.remove(T));if($=T,Dn(ot=s)&&!0===ot.wrapper&&Ln(t,$,e,n))E=null;else{if((($,ot,et)=>{const lt=Dn(rt=s)&&!0!==rt.wrapper&&Ac(t.schema,$)&&jr(t,ot,y);var rt;return et&&lt})(T,B,V)){const $=f.rename(T,y);return d($),b.push($),void(E=null)}if(Ke(s)){let $=c(r,T);if(!$&&q(R)&&Dc(s)&&($=c(r,R)),!ee(s)||$)return void(E=null)}q(x)&&(($,ot,et,lt)=>{const rt=$.nodeName.toLowerCase(),K=jr(t,y,rt)&&jr(t,ot,y),X=!g&&j($)&&di($.data),mt=Ve($),S=!ee(s)||!f.isBlock($);return(et||lt)&&K&&!X&&!mt&&S})(T,B,V,_)?(E||(E=f.clone(x,!1),R.insertBefore(E,T),b.push(E)),_&&O&&(v=P),E.appendChild(T)):(E=null,U(Ie(T.childNodes),N),O&&(v=P),E=null)}var $,ot};U(w,N)}),!0===s.links&&U(b,w=>{const E=N=>{"A"===N.nodeName&&d(N,s),U(Ie(N.childNodes),E)};E(w)}),U(b,w=>{const E=(N=>{let T=0;return U(N.childNodes,O=>{var P;q(P=O)&&j(P)&&0===P.length||We(O)||T++}),T})(w);var N;!(b.length>1)&&f.isBlock(w)||0!==E?(ee(s)||Dn(s)&&s.wrapper)&&(s.exact||1!==E||(w=Zt((N=w).childNodes,Rc).filter(O=>"false"!==f.getContentEditable(O)&&Gi(f,O,s)).map(O=>{const P=f.clone(O,!1);return d(P),f.replace(P,N,!0),f.remove(O,!0),P}).getOr(N)),((N,T,O,P)=>{Xv(T,_=>{var R,B,M;ee(_)&&Xv(N.dom.select(_.inline,P),R=>{Iu(R)&&pa(N,_,O,R,_.exact?R:null)}),R=N.dom,M=P,(B=_).clear_child_styles&&Mu(R.select(B.links?"*:not(a)":"*",M),$=>{Iu($)&&R.isEditable($)&&Mu(B.styles,(ot,et)=>{R.setStyle($,et,"")})})})})(t,r,n,w),((N,T,O,P,_)=>{const R=_.parentNode;Ln(N,R,O,P)&&pa(N,T,P,_)||T.merge_with_parents&&R&&N.dom.getParent(R,B=>!!Ln(N,B,O,P)&&(pa(N,T,P,_),!0))})(t,s,e,n,w),((N,T,O,P)=>{if(T.styles&&T.styles.backgroundColor){const _=Fv(N,"fontSize");Fu(P,R=>_(R)&&N.isEditable(R),Uv(N,"backgroundColor",po(T.styles.backgroundColor,O)))}})(f,s,n,w),((N,T,O,P)=>{const _=R=>{if(Gn(R)&&Z(R.parentNode)&&N.isEditable(R)){const B=db(N,R.parentNode);N.getStyle(R,"color")&&B?N.setStyle(R,"text-decoration",B):N.getStyle(R,"text-decoration")===B&&N.setStyle(R,"text-decoration",null)}};T.styles&&(T.styles.color||T.styles.textDecoration)&&(H.walk(P,_,"childNodes"),_(P))})(f,s,0,w),((N,T,O,P)=>{if(ee(T)&&("sub"===T.inline||"sup"===T.inline)){const _=Fv(N,"fontSize");Fu(P,B=>_(B)&&N.isEditable(B),Uv(N,"fontSize",""));const R=gt(N.select("sup"===T.inline?"sub":"sup",P),N.isEditable);N.remove(R,!0)}})(f,s,0,w),Iv(t,s,0,w)):f.remove(w,!0)})},p=na(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!lb(t,p))return c(r,o=p),void kb(t,e,o,n);if(s){if(o)if(na(o)){if(!c(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),m(i,Xo(i,f,r),!0)}}else m(i,o,!0);else a&&ee(s)&&!zr(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const x=v.getRng();let w=x.startOffset;const E=x.startContainer.nodeValue;b=Go(f.getBody(),v.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&w>0&&w<E.length&&N.test(E.charAt(w))&&N.test(E.charAt(w-1))){const P=v.getBookmark();x.collapse(!0);let _=Xo(f.dom,x,y);_=zi(_),f.formatter.apply(h,g,_),v.moveToBookmark(P)}else{let P=b?xv(b):null;b&&P?.data===fa||(T=f.getDoc(),O=Pu(!0).dom,b=T.importNode(O,!0),P=b.firstChild,x.insertNode(b),w=1),f.formatter.apply(h,g,b),v.setCursorLocation(P,w)}var T,O})(t,e,n):(l.setRng(ku(l.getRng())),ab(t,()=>{Nc(t,(f,h)=>{const g=h?f:Xo(i,f,r);m(i,g,!1)})},Kt),t.nodeChanged()),Tv(t.formatter,e).each(f=>{var h;U(gt((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return Ov(v,b[0])&&Bv(v,b[0])?b:[];{const y=Be(b).filter(E=>Ov(v,E)).toArray(),x=ko(b).filter(E=>Bv(v,E)).toArray(),w=b.slice(1,-1);return y.concat(w).concat(x)}})(h=t.selection),Pv(h.dom)),h=>Qv(i,h,f,n))});h=t,ht(ga,f=e)&&U(ga[f],g=>{g(h)})}var f,h;kb(t,e,o,n)},Jv=(t,e,n,o)=>{(o||t.selection.isEditable())&&sR(t,e,n,o)},Zv=t=>ht(t,"vars"),ty=t=>t.selection.getStart(),ey=(t,e,n,o,r)=>zf(e,s=>{const a=t.formatter.matchNode(s,n,r??{},o);return!fe(a)},s=>!!Cv(t,s,n)||!o&&q(t.formatter.matchNode(s,n,r,!0))),ny=(t,e)=>{const n=e??ty(t);return gt(Pi(t.dom,n),o=>Z(o)&&!Lo(o))},oy=(t,e,n)=>{const o=ny(t,e);Bt(n,(r,s)=>{const a=i=>{const l=ey(t,o,s,i.similar,Zv(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);Zv(i)?i.callback(d,{node:c,format:s,parents:o}):U(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};U([r.withSimilar,r.withoutSimilar],a),U(r.withVars,a)})},ry=H.explode,sy=()=>{const t={};return{addFilter:(e,n)=>{U(ry(e),o=>{ht(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>od(t),removeFilter:(e,n)=>{U(ry(e),o=>{if(ht(t,o))if(q(n)){const r=t[o],s=gt(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},ay=(t,e,n)=>{e.addNodeFilter("br",(o,r,s)=>{const a=H.extend({},n.getBlockElements()),i=n.getNonEmptyElements(),l=n.getWhitespaceElements();a.body=1;const d=c=>c.name in a||Ud(n,c);for(let c=0,u=o.length;c<u;c++){let m=o[c],p=m.parent;if(p&&d(p)&&m===p.lastChild){let f=m.prev;for(;f;){const h=f.name;if("span"!==h||"bookmark"!==f.attr("data-mce-type")){"br"===h&&(m=null);break}f=f.prev}if(m&&(m.remove(),ma(n,i,l,p))){const h=n.getElementRule(p.name);h&&(h.removeEmpty?p.remove():h.paddEmpty&&wu(t,s,d,p))}}else{let f=m;for(;p&&p.firstChild===f&&p.lastChild===f&&(f=p,!a[p.name]);)p=p.parent;if(f===p){const h=new Ee("#text",3);h.value=re,m.replace(h)}}}})},ju=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:a,base64Encoded:s})}return C.none()},iy=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return C.some(new Blob([r],{type:t}))},ly=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let iR=0;const dy=(t,e,n)=>ju(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return C.none();{const a=s?o:btoa(o);return n(a,r)}}),cy=(t,e,n)=>{const o=t.create("blobid"+iR++,e,n);return t.add(o),o},uy=(t,e,n=!1)=>dy(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>iy(r,o).map(s=>cy(t,s,o)))),Hu=(t,e)=>le(t,`${e}/`),{entries:my,setPrototypeOf:fy,isFrozen:dR,getPrototypeOf:cR,getOwnPropertyDescriptor:uR}=Object;let{freeze:Me,seal:yn,create:mR}=Object,{apply:$u,construct:qu}=typeof Reflect<"u"&&Reflect;$u||($u=function(t,e,n){return t.apply(e,n)}),Me||(Me=function(t){return t}),yn||(yn=function(t){return t}),qu||(qu=function(t,e){return new t(...e)});const fR=cn(Array.prototype.forEach),gR=cn(Array.prototype.pop),ha=cn(Array.prototype.push),Ji=cn(String.prototype.toLowerCase),Vu=cn(String.prototype.toString),pR=cn(String.prototype.match),Cn=cn(String.prototype.replace),hR=cn(String.prototype.indexOf),bR=cn(String.prototype.trim),Xe=cn(RegExp.prototype.test),ba=(gy=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return qu(gy,e)});var gy;function cn(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return $u(t,e,o)}}function St(t,e,n){var o;n=null!==(o=n)&&void 0!==o?o:Ji,fy&&fy(t,null);let r=e.length;for(;r--;){let s=e[r];if("string"==typeof s){const a=n(s);a!==s&&(dR(e)||(e[r]=a),s=a)}t[s]=!0}return t}function Vr(t){const e=mR(null);for(const[n,o]of my(t))e[n]=o;return e}function Zi(t,e){for(;null!==t;){const n=uR(t,e);if(n){if(n.get)return cn(n.get);if("function"==typeof n.value)return cn(n.value)}t=cR(t)}return function(n){return console.warn("fallback value for",n),null}}const py=Me(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wu=Me(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ku=Me(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vR=Me(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yu=Me(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yR=Me(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hy=Me(["#text"]),by=Me(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Gu=Me(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vy=Me(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),tl=Me(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),CR=yn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wR=yn(/<%[\w\W]*|[\w\W]*%>/gm),xR=yn(/\${[\w\W]*}/gm),ER=yn(/^data-[\-\w.\u00B7-\uFFFF]/),_R=yn(/^aria-[\-\w]+$/),yy=yn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kR=yn(/^(?:\w+script|data):/i),SR=yn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cy=yn(/^html$/i);var wy=Object.freeze({__proto__:null,MUSTACHE_EXPR:CR,ERB_EXPR:wR,TMPLIT_EXPR:xR,DATA_ATTR:ER,ARIA_ATTR:_R,IS_ALLOWED_URI:yy,IS_SCRIPT_OR_DATA:kR,ATTR_WHITESPACE:SR,DOCTYPE_NAME:Cy}),xy=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=D=>t(D);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const o=e.document,r=o.currentScript;let{document:s}=e;const{DocumentFragment:a,HTMLTemplateElement:i,Node:l,Element:d,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:p,trustedTypes:f}=e,h=d.prototype,g=Zi(h,"cloneNode"),b=Zi(h,"nextSibling"),v=Zi(h,"childNodes"),y=Zi(h,"parentNode");if("function"==typeof i){const D=s.createElement("template");D.content&&D.content.ownerDocument&&(s=D.content.ownerDocument)}let x,w="";const{implementation:E,createNodeIterator:N,createDocumentFragment:T,getElementsByTagName:O}=s,{importNode:P}=o;let _={};n.isSupported="function"==typeof my&&"function"==typeof y&&E&&void 0!==E.createHTMLDocument;const{MUSTACHE_EXPR:R,ERB_EXPR:B,TMPLIT_EXPR:M,DATA_ATTR:V,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:ot,ATTR_WHITESPACE:et}=wy;let{IS_ALLOWED_URI:lt}=wy,rt=null;const K=St({},[...py,...Wu,...Ku,...Yu,...hy]);let X=null;const mt=St({},[...by,...Gu,...vy,...tl]);let S=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),A=null,I=null,F=!0,z=!0,Q=!1,it=!0,ft=!1,dt=!1,Tt=!1,tt=!1,bt=!1,Ct=!1,pt=!1,wt=!0,ne=!1,st=!0,yt=!1,It={},Xt=null;const me=St({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ke=null;const tn=St({},["audio","video","img","source","image","track"]);let pe=null;const en=St({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",no="http://www.w3.org/2000/svg",nn="http://www.w3.org/1999/xhtml";let mn=nn,ur=!1,Ua=null;const mr=St({},[Qt,no,nn],Vu);let on;const Kl=["application/xhtml+xml","text/html"];let Ft,xn=null;const fr=s.createElement("form"),za=function(D){return D instanceof RegExp||D instanceof Function},Nf=function(D){if(!xn||xn!==D){if(D&&"object"==typeof D||(D={}),D=Vr(D),on=on=-1===Kl.indexOf(D.PARSER_MEDIA_TYPE)?"text/html":D.PARSER_MEDIA_TYPE,Ft="application/xhtml+xml"===on?Vu:Ji,rt="ALLOWED_TAGS"in D?St({},D.ALLOWED_TAGS,Ft):K,X="ALLOWED_ATTR"in D?St({},D.ALLOWED_ATTR,Ft):mt,Ua="ALLOWED_NAMESPACES"in D?St({},D.ALLOWED_NAMESPACES,Vu):mr,pe="ADD_URI_SAFE_ATTR"in D?St(Vr(en),D.ADD_URI_SAFE_ATTR,Ft):en,ke="ADD_DATA_URI_TAGS"in D?St(Vr(tn),D.ADD_DATA_URI_TAGS,Ft):tn,Xt="FORBID_CONTENTS"in D?St({},D.FORBID_CONTENTS,Ft):me,A="FORBID_TAGS"in D?St({},D.FORBID_TAGS,Ft):{},I="FORBID_ATTR"in D?St({},D.FORBID_ATTR,Ft):{},It="USE_PROFILES"in D&&D.USE_PROFILES,F=!1!==D.ALLOW_ARIA_ATTR,z=!1!==D.ALLOW_DATA_ATTR,Q=D.ALLOW_UNKNOWN_PROTOCOLS||!1,it=!1!==D.ALLOW_SELF_CLOSE_IN_ATTR,ft=D.SAFE_FOR_TEMPLATES||!1,dt=D.WHOLE_DOCUMENT||!1,bt=D.RETURN_DOM||!1,Ct=D.RETURN_DOM_FRAGMENT||!1,pt=D.RETURN_TRUSTED_TYPE||!1,tt=D.FORCE_BODY||!1,wt=!1!==D.SANITIZE_DOM,ne=D.SANITIZE_NAMED_PROPS||!1,st=!1!==D.KEEP_CONTENT,yt=D.IN_PLACE||!1,lt=D.ALLOWED_URI_REGEXP||yy,mn=D.NAMESPACE||nn,S=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&za(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(S.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&za(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(S.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(S.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ft&&(z=!1),Ct&&(bt=!0),It&&(rt=St({},[...hy]),X=[],!0===It.html&&(St(rt,py),St(X,by)),!0===It.svg&&(St(rt,Wu),St(X,Gu),St(X,tl)),!0===It.svgFilters&&(St(rt,Ku),St(X,Gu),St(X,tl)),!0===It.mathMl&&(St(rt,Yu),St(X,vy),St(X,tl))),D.ADD_TAGS&&(rt===K&&(rt=Vr(rt)),St(rt,D.ADD_TAGS,Ft)),D.ADD_ATTR&&(X===mt&&(X=Vr(X)),St(X,D.ADD_ATTR,Ft)),D.ADD_URI_SAFE_ATTR&&St(pe,D.ADD_URI_SAFE_ATTR,Ft),D.FORBID_CONTENTS&&(Xt===me&&(Xt=Vr(Xt)),St(Xt,D.FORBID_CONTENTS,Ft)),st&&(rt["#text"]=!0),dt&&St(rt,["html","head","body"]),rt.table&&(St(rt,["tbody"]),delete A.tbody),D.TRUSTED_TYPES_POLICY){if("function"!=typeof D.TRUSTED_TYPES_POLICY.createHTML)throw ba('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof D.TRUSTED_TYPES_POLICY.createScriptURL)throw ba('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=D.TRUSTED_TYPES_POLICY,w=x.createHTML("")}else void 0===x&&(x=function(nt,ut){if("object"!=typeof nt||"function"!=typeof nt.createPolicy)return null;let At=null;const Mt="data-tt-policy-suffix";ut&&ut.hasAttribute(Mt)&&(At=ut.getAttribute(Mt));const jt="dompurify"+(At?"#"+At:"");try{return nt.createPolicy(jt,{createHTML:Ut=>Ut,createScriptURL:Ut=>Ut})}catch{return console.warn("TrustedTypes policy "+jt+" could not be created."),null}}(f,r)),null!==x&&"string"==typeof w&&(w=x.createHTML(""));Me&&Me(D),xn=D}},OE=St({},["mi","mo","mn","ms","mtext"]),BE=St({},["foreignobject","desc","title","annotation-xml"]),mB=St({},["title","style","font","a","script"]),Yl=St({},Wu);St(Yl,Ku),St(Yl,vR);const Rf=St({},Yu);St(Rf,yR);const gr=function(D){ha(n.removed,{element:D});try{D.parentNode.removeChild(D)}catch{D.remove()}},ja=function(D,nt){try{ha(n.removed,{attribute:nt.getAttributeNode(D),from:nt})}catch{ha(n.removed,{attribute:null,from:nt})}if(nt.removeAttribute(D),"is"===D&&!X[D])if(bt||Ct)try{gr(nt)}catch{}else try{nt.setAttribute(D,"")}catch{}},PE=function(D){let nt,ut;if(tt)D="<remove></remove>"+D;else{const jt=pR(D,/^[\r\n\t ]+/);ut=jt&&jt[0]}"application/xhtml+xml"===on&&mn===nn&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const At=x?x.createHTML(D):D;if(mn===nn)try{nt=(new p).parseFromString(At,on)}catch{}if(!nt||!nt.documentElement){nt=E.createDocument(mn,"template",null);try{nt.documentElement.innerHTML=ur?w:At}catch{}}const Mt=nt.body||nt.documentElement;return D&&ut&&Mt.insertBefore(s.createTextNode(ut),Mt.childNodes[0]||null),mn===nn?O.call(nt,dt?"html":"body")[0]:dt?nt.documentElement:Mt},DE=function(D){return N.call(D.ownerDocument||D,D,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Gl=function(D){return"object"==typeof l?D instanceof l:D&&"object"==typeof D&&"number"==typeof D.nodeType&&"string"==typeof D.nodeName},oo=function(D,nt,ut){_[D]&&fR(_[D],At=>{At.call(n,nt,ut,xn)})},LE=function(D){let nt;if(oo("beforeSanitizeElements",D,null),(ut=D)instanceof m&&("string"!=typeof ut.nodeName||"string"!=typeof ut.textContent||"function"!=typeof ut.removeChild||!(ut.attributes instanceof u)||"function"!=typeof ut.removeAttribute||"function"!=typeof ut.setAttribute||"string"!=typeof ut.namespaceURI||"function"!=typeof ut.insertBefore||"function"!=typeof ut.hasChildNodes))return gr(D),!0;var ut;const At=Ft(D.nodeName);if(oo("uponSanitizeElement",D,{tagName:At,allowedTags:rt}),D.hasChildNodes()&&!Gl(D.firstElementChild)&&(!Gl(D.content)||!Gl(D.content.firstElementChild))&&Xe(/<[/\w]/g,D.innerHTML)&&Xe(/<[/\w]/g,D.textContent))return gr(D),!0;if(!rt[At]||A[At]){if(!A[At]&&IE(At)&&(S.tagNameCheck instanceof RegExp&&Xe(S.tagNameCheck,At)||S.tagNameCheck instanceof Function&&S.tagNameCheck(At)))return!1;if(st&&!Xt[At]){const Mt=y(D)||D.parentNode,jt=v(D)||D.childNodes;if(jt&&Mt)for(let Ut=jt.length-1;Ut>=0;--Ut)Mt.insertBefore(g(jt[Ut],!0),b(D))}return gr(D),!0}return D instanceof d&&!function(Mt){let jt=y(Mt);jt&&jt.tagName||(jt={namespaceURI:mn,tagName:"template"});const Ut=Ji(Mt.tagName),qt=Ji(jt.tagName);return!!Ua[Mt.namespaceURI]&&(Mt.namespaceURI===no?jt.namespaceURI===nn?"svg"===Ut:jt.namespaceURI===Qt?"svg"===Ut&&("annotation-xml"===qt||OE[qt]):!!Yl[Ut]:Mt.namespaceURI===Qt?jt.namespaceURI===nn?"math"===Ut:jt.namespaceURI===no?"math"===Ut&&BE[qt]:!!Rf[Ut]:Mt.namespaceURI===nn?!(jt.namespaceURI===no&&!BE[qt])&&!(jt.namespaceURI===Qt&&!OE[qt])&&!Rf[Ut]&&(mB[Ut]||!Yl[Ut]):!("application/xhtml+xml"!==on||!Ua[Mt.namespaceURI]))}(D)?(gr(D),!0):"noscript"!==At&&"noembed"!==At&&"noframes"!==At||!Xe(/<\/no(script|embed|frames)/i,D.innerHTML)?(ft&&3===D.nodeType&&(nt=D.textContent,nt=Cn(nt,R," "),nt=Cn(nt,B," "),nt=Cn(nt,M," "),D.textContent!==nt&&(ha(n.removed,{element:D.cloneNode()}),D.textContent=nt)),oo("afterSanitizeElements",D,null),!1):(gr(D),!0)},ME=function(D,nt,ut){if(wt&&("id"===nt||"name"===nt)&&(ut in s||ut in fr))return!1;if((!z||I[nt]||!Xe(V,nt))&&(!F||!Xe($,nt)))if(!X[nt]||I[nt]){if(!(IE(D)&&(S.tagNameCheck instanceof RegExp&&Xe(S.tagNameCheck,D)||S.tagNameCheck instanceof Function&&S.tagNameCheck(D))&&(S.attributeNameCheck instanceof RegExp&&Xe(S.attributeNameCheck,nt)||S.attributeNameCheck instanceof Function&&S.attributeNameCheck(nt))||"is"===nt&&S.allowCustomizedBuiltInElements&&(S.tagNameCheck instanceof RegExp&&Xe(S.tagNameCheck,ut)||S.tagNameCheck instanceof Function&&S.tagNameCheck(ut))))return!1}else if(!pe[nt]&&!Xe(lt,Cn(ut,et,""))&&("src"!==nt&&"xlink:href"!==nt&&"href"!==nt||"script"===D||0!==hR(ut,"data:")||!ke[D])&&(!Q||Xe(ot,Cn(ut,et,"")))&&ut)return!1;return!0},IE=function(D){return D.indexOf("-")>0},FE=function(D){let nt,ut,At,Mt;oo("beforeSanitizeAttributes",D,null);const{attributes:jt}=D;if(!jt)return;const Ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:X};for(Mt=jt.length;Mt--;){nt=jt[Mt];const{name:qt,namespaceURI:as}=nt;ut="value"===qt?nt.value:bR(nt.value);const gB=ut;if(At=Ft(qt),Ut.attrName=At,Ut.attrValue=ut,Ut.keepAttr=!0,Ut.forceKeepAttr=void 0,oo("uponSanitizeAttribute",D,Ut),ut=Ut.attrValue,Ut.forceKeepAttr)continue;if(!Ut.keepAttr){ja(qt,D);continue}if(!it&&Xe(/\/>/i,ut)){ja(qt,D);continue}ft&&(ut=Cn(ut,R," "),ut=Cn(ut,B," "),ut=Cn(ut,M," "));const UE=Ft(D.nodeName);if(ME(UE,At,ut)){if(!ne||"id"!==At&&"name"!==At||(ja(qt,D),ut="user-content-"+ut),x&&"object"==typeof f&&"function"==typeof f.getAttributeType&&!as)switch(f.getAttributeType(UE,At)){case"TrustedHTML":ut=x.createHTML(ut);break;case"TrustedScriptURL":ut=x.createScriptURL(ut)}if(ut!==gB)try{as?D.setAttributeNS(as,qt,ut):D.setAttribute(qt,ut)}catch{ja(qt,D)}}else ja(qt,D)}oo("afterSanitizeAttributes",D,null)},fB=function D(nt){let ut;const At=DE(nt);for(oo("beforeSanitizeShadowDOM",nt,null);ut=At.nextNode();)oo("uponSanitizeShadowNode",ut,null),LE(ut)||(ut.content instanceof a&&D(ut.content),FE(ut));oo("afterSanitizeShadowDOM",nt,null)};return n.sanitize=function(D){let nt,ut,At,Mt,jt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ur=!D,ur&&(D="\x3c!--\x3e"),"string"!=typeof D&&!Gl(D)){if("function"!=typeof D.toString)throw ba("toString is not a function");if("string"!=typeof(D=D.toString()))throw ba("dirty is not a string, aborting")}if(!n.isSupported)return D;if(Tt||Nf(jt),n.removed=[],"string"==typeof D&&(yt=!1),yt){if(D.nodeName){const as=Ft(D.nodeName);if(!rt[as]||A[as])throw ba("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof l)nt=PE("\x3c!----\x3e"),ut=nt.ownerDocument.importNode(D,!0),1===ut.nodeType&&"BODY"===ut.nodeName||"HTML"===ut.nodeName?nt=ut:nt.appendChild(ut);else{if(!bt&&!ft&&!dt&&-1===D.indexOf("<"))return x&&pt?x.createHTML(D):D;if(nt=PE(D),!nt)return bt?null:pt?w:""}nt&&tt&&gr(nt.firstChild);const Ut=DE(yt?D:nt);for(;At=Ut.nextNode();)LE(At)||(At.content instanceof a&&fB(At.content),FE(At));if(yt)return D;if(bt){if(Ct)for(Mt=T.call(nt.ownerDocument);nt.firstChild;)Mt.appendChild(nt.firstChild);else Mt=nt;return(X.shadowroot||X.shadowrootmode)&&(Mt=P.call(o,Mt,!0)),Mt}let qt=dt?nt.outerHTML:nt.innerHTML;return dt&&rt["!doctype"]&&nt.ownerDocument&&nt.ownerDocument.doctype&&nt.ownerDocument.doctype.name&&Xe(Cy,nt.ownerDocument.doctype.name)&&(qt="<!DOCTYPE "+nt.ownerDocument.doctype.name+">\n"+qt),ft&&(qt=Cn(qt,R," "),qt=Cn(qt,B," "),qt=Cn(qt,M," ")),x&&pt?x.createHTML(qt):qt},n.setConfig=function(D){Nf(D),Tt=!0},n.clearConfig=function(){xn=null,Tt=!1},n.isValidAttribute=function(D,nt,ut){xn||Nf({});const At=Ft(D),Mt=Ft(nt);return ME(At,Mt,ut)},n.addHook=function(D,nt){"function"==typeof nt&&(_[D]=_[D]||[],ha(_[D],nt))},n.removeHook=function(D){if(_[D])return gR(_[D])},n.removeHooks=function(D){_[D]&&(_[D]=[])},n.removeAllHooks=function(){_={}},n}();const Ey=H.each,RR=H.trim,AR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],TR={ftp:21,http:80,https:443,mailto:25},OR=["img","video"],_y=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(q(r=t.allow_svg_data_urls)?!r:!q(s)||!Rt(OR,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class un{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=zo.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!_y(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=RR(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new un(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Ey(AR,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new un(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new un(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?TR[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Ey(s,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)0!==a[u].length&&"."!==a[u]&&(".."!==a[u]?o>0?o--:l.push(a[u]):o++);const d=i.length-o;let c;return c=d<=0?ms(l).join("/"):i.slice(0,d).join("/")+"/"+ms(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const BR=H.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Xu="data-mce-type";let ky=0;const Sy=(t,e,n,o,r)=>{var s,a,i,l;const d=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(s=t.nodeValue)&&void 0!==s?s:"")&&(t.nodeValue=" "+t.nodeValue);const u=null!==(a=r?.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(q(r)&&(r.allowedTags[u]=!0));if(1!==t.nodeType||"body"===u)return;const m=k(t),p=bs(m,Xu),f=Ue(m,"data-mce-bogus");if(!p&&at(f))return void("all"===f?Dt(m):Yn(m));const h=n.getElementRule(u);if(!d||h){if(q(r)&&(r.allowedTags[u]=!0),d&&h&&!p){if(U(null!==(i=h.attributesForced)&&void 0!==i?i:[],g=>{de(m,g.name,"{$uid}"===g.value?"mce_"+ky++:g.value)}),U(null!==(l=h.attributesDefault)&&void 0!==l?l:[],g=>{bs(m,g.name)||de(m,g.name,"{$uid}"===g.value?"mce_"+ky++:g.value)}),h.attributesRequired&&!$t(h.attributesRequired,g=>bs(m,g))||h.removeEmptyAttrs&&(g=>{const b=g.dom.attributes;return null==b||0===b.length})(m))return void Yn(m);h.outputName&&h.outputName!==u&&((g,b)=>{const v=((x,w)=>{const E=oe(w),N=vg(x);return Hn(E,N),E})(g,b);Kn(g,v);const y=ue(g);Po(v,y),Dt(g)})(m,h.outputName)}}else ht(c,u)?Dt(m):Yn(m)},Ny=(t,e,n,o,r,s)=>"html"!==n&&!Io(o)||!(r in BR&&_y(t,s,o))&&(!t.validate||e.isValid(o,r)||le(r,"data-")||le(r,"aria-")),Ry=(t,e)=>t.hasAttribute(Xu)&&("id"===e||"class"===e||"style"===e),Ay=(t,e)=>t in e.getBoolAttrs(),PR=(t,e,n,o)=>{const{attributes:r}=t;for(let s=r.length-1;s>=0;s--){const a=r[s],i=a.name,l=a.value;Ny(e,n,o,t.tagName.toLowerCase(),i,l)||Ry(t,i)?Ay(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},LR=t=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`)};return xy().sanitize(t,n),t.innerHTML},Ty=H.makeMap,Oy=H.extend,By=(t,e,n,o)=>{const r=t.name,s=r in n&&"title"!==r&&"textarea"!==r&&"noscript"!==r,a=e.childNodes;for(let i=0,l=a.length;i<l;i++){const d=a[i],c=new Ee(d.nodeName.toLowerCase(),d.nodeType);if(Z(d)){const u=d.attributes;for(let m=0,p=u.length;m<p;m++){const f=u[m];c.attr(f.name,f.value)}Io(c.name)&&(o(d),c.value=d.innerHTML)}else j(d)?(c.value=d.data,s&&(c.raw=!0)):(so(d)||h_(d)||b_(d))&&(c.value=d.data);Io(c.name)||By(c,d,n,o),t.append(c)}},Wr=(t={},e=co())=>{const n=sy(),o=sy(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((h,g)=>{const b=(()=>{let v=[];const y=()=>v[v.length-1];return{track:x=>{Pd(x)&&v.push(x);let w=y();return w&&!w.contains(x)&&(v.pop(),w=y()),rp(w)},current:()=>rp(y()),reset:()=>{v=[]}}})();if(h.sanitize){const v=((t,e,n)=>{const o=xy();return o.addHook("uponSanitizeElement",(r,s)=>{Sy(r,t,e,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((a,i,l,d,c)=>{const u=a.tagName.toLowerCase(),{attrName:m,attrValue:p}=c;c.keepAttr=Ny(i,l,d,u,m,p),c.keepAttr?(c.allowedAttributes[m]=!0,Ay(m,l)&&(c.attrValue=m),i.allow_svg_data_urls&&le(p,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Ry(a,m)&&(c.forceKeepAttr=!0)})(r,t,e,n.current(),s)}),o})(h,g,b);return{sanitizeHtmlElement:(x,w)=>{v.sanitize(x,((E,N)=>{const T={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return T.PARSER_MEDIA_TYPE=N,E.allow_script_urls?T.ALLOWED_URI_REGEXP=/.*/:E.allow_html_data_urls&&(T.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),T})(h,w)),v.removed=[],b.reset()},sanitizeNamespaceElement:LR}}return{sanitizeHtmlElement:(v,y)=>{const x=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=x.nextNode();){const E=b.track(w);Sy(w,h,g,E),Z(w)&&PR(w,h,g,E)}b.reset()},sanitizeNamespaceElement:vt}})(r,e),l=n.getFilters,u=o.getFilters,p=(h,g)=>{const b=at(g.attr(Xu)),v=1===g.type&&!ht(h,g.name)&&!Ud(e,g)&&!Io(g.name);return 3===g.type||v&&!b},f={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=r.validate,y=null!==(b=g.context)&&void 0!==b?b:r.root_name,x=((B,M,V="html")=>{const $="xhtml"===V?"application/xhtml+xml":"text/html",ot=ht(e.getSpecialElements(),M.toLowerCase()),et=ot?`<${M}>${B}</${M}>`:B,rt=s.parseFromString("xhtml"===V?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${et}</body></html>`:`<body>${et}</body>`,$).body;return a.sanitizeHtmlElement(rt,$),ot?rt.firstChild:rt})(h,y,g.format);Ld(e,x);const w=new Ee(y,11);By(w,x,e.getSpecialElements(),a.sanitizeNamespaceElement),x.innerHTML="";const[E,N]=((B,M,V,$)=>{const ot=V.validate,et=M.getNonEmptyElements(),lt=M.getWhitespaceElements(),rt=Oy(Ty("script,style,head,html,body,title,meta,param"),M.getBlockElements()),K=Cp(M),X=/[ \t\r\n]+/g,mt=/^[ \t\r\n]+/,S=/[ \t\r\n]+$/,A=z=>{let Q=z.parent;for(;q(Q);){if(Q.name in lt)return!0;Q=Q.parent}return!1},I=z=>z.name in rt||Ud(M,z)||Io(z.name)&&z.parent===B,F=(z,Q)=>!q(Q?z.prev:z.next)&&!Gt(z.parent)&&I(z.parent)&&(z.parent!==B||!0===$.isRootContent);return[z=>{var Q,ft,dt;if(3===z.type&&!A(z)){let it=null!==(Q=z.value)&&void 0!==Q?Q:"";it=it.replace(X," "),dt=I,(q(ft=z.prev)&&(dt(ft)||"br"===ft.name)||F(z,!0))&&(it=it.replace(mt,"")),0===it.length?z.remove():z.value=it}},z=>{var Q,dt,Tt;if(1===z.type){const it=M.getElementRule(z.name);if(ot&&it){const ft=ma(M,et,lt,z);it.paddInEmptyBlock&&ft&&(dt=>{let Tt=dt;for(;q(Tt);){if(Tt.name in K)return ma(M,et,lt,Tt);Tt=Tt.parent}return!1})(z)?wu(V,$,I,z):it.removeEmpty&&ft?I(z)?z.remove():z.unwrap():it.paddEmpty&&(ft||bv(dt=z,"#text")&&(null===(Tt=dt?.firstChild)||void 0===Tt?void 0:Tt.value)===re)&&wu(V,$,I,z)}}else if(3===z.type&&!A(z)){let it=null!==(Q=z.value)&&void 0!==Q?Q:"";(z.next&&I(z.next)||F(z,!1))&&(it=it.replace(S,"")),0===it.length?z.remove():z.value=it}}]})(w,e,r,g),T=[],P={nodes:{},attributes:{}},_=B=>gv(l(),u(),B,P);if(((B,M,V)=>{const $=[];for(let ot=B,et=ot;ot;et=ot,ot=ot.walk()){const lt=ot;U(M,rt=>rt(lt)),Gt(lt.parent)&&lt!==B?ot=et:$.push(lt)}for(let ot=$.length-1;ot>=0;ot--){const et=$[ot];U(V,lt=>lt(et))}})(w,[E,_],[N,v?B=>{return V=T,void(_u(e,M=B)&&V.push(M));var M,V}:vt]),T.reverse(),v&&T.length>0)if(g.context){const{pass:B,fail:M}=hr(T,V=>V.parent===w);Eu(M,e,w,_),g.invalid=B.length>0}else Eu(T,e,w,_);const R=((B,M)=>{var V;const $=null!==(V=M.forced_root_block)&&void 0!==V?V:B.forced_root_block;return!1===$?"":!0===$?"p":$})(r,g);return R&&("body"===w.name||g.isRootContent)&&((B,M)=>{const V=Oy(Ty("script,style,head,html,body,title,meta,param"),e.getBlockElements()),$=/^[ \t\r\n]+/,ot=/[ \t\r\n]+$/;let et=B.firstChild,lt=null;const rt=K=>{var X,mt;K&&(et=K.firstChild,et&&3===et.type&&(et.value=null===(X=et.value)||void 0===X?void 0:X.replace($,"")),et=K.lastChild,et&&3===et.type&&(et.value=null===(mt=et.value)||void 0===mt?void 0:mt.replace(ot,"")))};if(e.isValidChild(B.name,M.toLowerCase())){for(;et;){const K=et.next;p(V,et)?(lt||(lt=new Ee(M,1),lt.attr(r.forced_root_block_attrs),B.insert(lt,et)),lt.append(et)):(rt(lt),lt=null),et=K}rt(lt)}})(w,R),g.invalid||pv(P,g),w}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&ay(e,t,n),t.addAttributeFilter("href",r=>{let s=r.length;const a=i=>{const l=i?H.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(c=>c.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=r[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",r=>{let s,a,i,l,d=r.length;for(;d--;)if(l=r[d],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",r=>{let s,a,i=r.length;for(;i--;)if(s=r[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new Ee("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const o=n.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",r=>{var s;let a=r.length;for(;a--;){const i=r[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",d=H.explode(l," ");let c="";for(let u=0;u<d.length;u++){const m=d[u];let p=!1,f=o["*"];f&&f[m]&&(p=!0),f=o[i.name],!p&&f&&f[m]&&(p=!0),p&&(c&&(c+=" "),c+=m)}c.length||(c=null),i.attr("class",c)}}),((r,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const d=l.attr("src");var c;(c=l).attr("src")===_t.transparentSrc||q(c.attr("data-mce-placeholder"))||(c=>q(c.attr("data-mce-bogus")))(l)||Gt(d)||uy(a,d,!0).each(c=>{l.attr("src",c.blobUri())})};r.addAttributeFilter("src",l=>U(l,i))}})(t,e),e.convert_unsafe_embeds&&t.addNodeFilter("object,embed",r=>U(r,s=>{s.replace(((a,i,l,d,c)=>{let u;u=fe(a)?"iframe":Hu(a,"image")?"img":Hu(a,"video")?"video":Hu(a,"audio")?"audio":"iframe";const m=new Ee(u,1);return m.attr("audio"===u?{src:i}:{src:i,width:l,height:d}),"audio"!==u&&"video"!==u||m.attr("controls",""),"iframe"===u&&c&&m.attr("sandbox",""),m})(s.attr("type"),s.attr("object"===s.name?"data":"src"),s.attr("width"),s.attr("height"),e.sandbox_iframes))})),e.sandbox_iframes&&t.addNodeFilter("iframe",r=>U(r,s=>s.attr("sandbox","")))})(f,r),(g=r).inline_styles&&((t,e,n)=>{var o;const r=Wd();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=r,i=H.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{U(l,d=>{const c=a.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),m&&(c["font-family"]=m),p&&Ga(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",a.serialize(c)),f=d,U(["color","face","size"],g=>{f.attr(g,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const d="html4"!==a.type;U(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)})(f,g,e),f;var g},Py=(t,e,n)=>{const o=Yi(s=t)?ho({validate:!1}).serialize(s):s,r=e(o);var s;if(r.isDefaultPrevented())return r;if(Yi(t)){if(r.content!==o){const s=Wr({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},Dy=(t,e)=>{if(e.no_events)return Re.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?Re.error(Rb(t,{content:"",...n}).content):Re.value(n)}},Ly=(t,e,n)=>n.no_events?e:Py(e,r=>Rb(t,{...n,content:r}),{sanitize:mc(t),sandbox_iframes:fc(t)}).content,Qu=(t,e)=>{if(e.no_events)return Re.value(e);{const n=Py(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s},{sanitize:mc(t),sandbox_iframes:fc(t)});return n.isDefaultPrevented()?(Nb(t,n),Re.error(void 0)):Re.value(n)}},Ju=(t,e,n)=>{n.no_events||Nb(t,{...n,content:e})},Zu=(t,e,n)=>({element:t,width:e,rows:n}),My=(t,e)=>({element:t,cells:e}),MR=(t,e)=>({x:t,y:e}),Iy=(t,e)=>$n(t,e).bind(Ga).getOr(1),IR=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},Fy=t=>Oe(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),Uy=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(kt(r[s],e))return C.some(MR(s,o))}return C.none()},zy=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(My(a[i].element,d))}return s},FR=t=>((e,n)=>{const o=$o(e.element),r=oe("tbody");return Po(r,n),Yt(o,r),o})(t,Et(t.rows,n=>{const o=Et(n.cells,s=>{const a=Mp(s);return ce(a,"colspan"),ce(a,"rowspan"),a}),r=$o(n.element);return Po(r,o),r})),jy=()=>Uc([]),el=(t,e)=>e>=0&&e<t.length&&Ur(t.charAt(e)),Hy=t=>ze(t.innerText),$y=t=>Z(t)?t.outerHTML:j(t)?zo.encodeRaw(t.data,!1):so(t)?"\x3c!--"+t.data+"--\x3e":"",$R=No(()=>document.implementation.createHTMLDocument("undo")),nl=t=>{const e=t.serializer.getTempAttrs(),n=b0(t.getBody(),e);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:gt(Et(Ie(n.childNodes),En(ze,$y)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:ze(n.innerHTML),bookmark:null,beforeBookmark:null}},tm=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;U(n,s=>{var a,i;0===s[0]?r++:1===s[0]?(((a,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(d,a.childNodes[l]):a.appendChild(d)})(o,s[1],r),r++):2===s[0]&&(i=r,(a=o).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===o[h-m];)++h;return{start:u,end:h,diag:m}},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let x,w,E,N,T;for(s[1+y]=u,a[1+y]=m+1,x=0;x<=y;++x){for(w=-x;w<=x;w+=2){for(E=w+y,s[E]=w===-x||w!==x&&s[E-1]<s[E+1]?s[E+1]:s[E-1]+1,N=s[E],T=N-u+p-w;N<m&&T<f&&n[N]===o[T];)s[E]=++N,++T;if(b%2!=0&&b-x<=w&&w<=b+x&&a[E-b]<=s[E])return l(a[E-b],w+u-p,m,f)}for(w=b-x;w<=b+x;w+=2){for(E=w+y-b,a[E]=w===b-x||w!==b+x&&a[E+1]<=a[E-1]?a[E+1]-1:a[E-1],N=a[E]-1,T=N-u+p-w;N>=u&&T>=p&&n[N]===o[T];)a[E]=N--,T--;if(b%2==0&&-x<=w&&w<=x&&a[E]<=s[E+b])return l(a[E],w+u-p,m,f)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(Et(Ie(e.childNodes),$y),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!q(o)||!Qh(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},em=t=>"fragmented"===t.type?t.fragments.join(""):t.content,qy=t=>{const e=oe("body",$R());return ni(e,em(t)),U(ve(e,"*[data-mce-bogus]"),Yn),Fg(e)},nm=(t,e)=>{return!(!t||!e)&&(o=e,!(em(t)!==em(o))||((n,o)=>qy(n)===qy(o))(t,e));var o},om=t=>0===t.get(),ol=(t,e,n)=>{om(n)&&(t.typing=e)},Vy=(t,e)=>{t.typing&&(ol(t,!1,e),t.add())},Wy=t=>({init:{bindEvents:vt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(om(e)&&s.set(ac(o.selection)));var o,s},add:(e,n,o,r,s,a)=>((i,l,d,c,u,m,p)=>{const f=nl(i),h=H.extend(m||{},f);if(!om(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&nm(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=Yk(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=ac(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,ol(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],tm(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],tm(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!nm(nl(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return a=o,Vy(r=e,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];tm(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Bu(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Ln(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>Ln(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=Pi(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!Ke(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>kt(s,k(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>Au(k(s),a=>br(o,i=>{return Ln(n,a.dom,d=i)?C.some(d):C.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>Jv(t,e,n,o),remove:(e,n,o,r)=>Gv(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Bu(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Jv(r,s,a,i):Gv(r,s,a,i))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((m,p,f,h,g,b)=>{const v=p.get();U(f.split(","),y=>{const x=Pt(v,y).getOrThunk(()=>{const E={withSimilar:{state:ae(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ae(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=E,E}),w=()=>{const E=ny(m);return ey(m,E,y,g,b).isSome()};if(fe(b)){const E=g?x.withSimilar:x.withoutSimilar;E.callbacks.push(h),1===E.callbacks.length&&E.state.set(w())}else x.withVars.push({state:ae(w()),similar:g,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,d=o,r,s),{unbind:()=>((m,p,f)=>{const h=m.get();U(p.split(","),g=>Pt(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:gt(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:gt(b.withoutSimilar.callbacks,v=>v!==f)},withVars:gt(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(W("tree"===o.format?new Ee("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?H.trim(ze(b0(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((r,s)=>{const a=r.getDoc(),i=ro(k(r.getBody())),l=oe("div",a);de(l,"data-mce-bogus","all"),ti(l,{position:"fixed",left:"-9999999px",top:"0"}),ni(l,s.innerHTML),v0(l),y0(l);const d=hd(u=i)?u:k(Vn(u).dom.body);var u;Yt(d,l);const c=ze(l.dom.innerText);return Dt(l),c})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const a=ye(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!li(k(n))&&at(o)?H.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,C.from((o=t).getBody()).map(a=>Yi(r)?((i,l,d,c)=>{hv(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=ho({validate:!1},i.schema).serialize(d),m=ze(li(k(l))?u:H.trim(u));return Ru(i,m,c.no_selection),{content:d,html:m}})(o,a,r,s):((i,l,d,c)=>{if(0===(d=ze(d)).length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=ye(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,Ks(i),d)):d||(d=u),Ru(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=ho({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=li(k(l))?d:H.trim(d);return Ru(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:Yi(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>eR(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=q(o)?o:n.getBody();U(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=tS(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=Sh(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=(i=s,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return Dy(o,a).fold(Ne,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(E=>E.nodeName).getOr("div").toLowerCase(),b=k(m.cloneContents());v0(b),y0(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=Hy(v),x=ze(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),el(x,0)||el(x,x.length-1)){const w=f.getOr(h),E=Hy(w),N=E.indexOf(y);return-1===N?y:(el(E,N-1)?" ":"")+y+(el(E,N+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=Jc(m,Ec(g)),v=p.contextual?((t,e,n)=>{const o=ob(e,t);return o.length>0?((t,e)=>{return(n=t,o=e[0],_s(o,"table",J(kt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=Zu($o(a),0,[]);return U(ve(a,"tr"),(l,d)=>{U(ve(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=Iy(g,"rowspan"),v=Iy(g,"colspan"),y=m.rows;for(let x=f;x<f+b;x++){y[x]||(y[x]=My(Mp(h),[]));for(let w=p;w<p+v;w++)y[x].cells[w]=x===f&&w===p?g:$o(g)}})(i,((m,p,f)=>{for(;IR(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),Zu(i.element,Fy(i.rows),i.rows)})(n);return(a=s,i=o,l=r,Uy(a,i).bind(d=>Uy(a,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?zy(u,f,h,g,b):zy(u,f,b,g,h);return Zu(u.element,Fy(v),v)})(a,d,c)))).map(a=>Uc([FR(a)]));var a,i,l}).getOrThunk(jy);var n,o})(t,o):(r=t,a=n,(s=e).length>0&&s[0].collapsed?jy():(i=r,d=a,((c,u)=>{const m=Oe(u,(p,f)=>(Yt(f,p),f),c);return u.length>0?Uc([m]):m})(k((l=s[0]).cloneContents()),((t,e,n)=>{const o=k(e.commonAncestorContainer),r=Zn(o,t),s=gt(r,l=>n.isWrapper(xt(l))),a=(d=e,Zt(l=r,c=>"li"===xt(c)&&kc(c,d)).fold(W([]),c=>{return(u=l,Zt(u,m=>"ul"===xt(m)||"ol"===xt(m))).map(u=>{const m=oe(xt(u)),p=fs(vd(u),(f,h)=>le(h,"list-style"));return ti(m,p),[oe("li"),m]}).getOr([]);var u})),i=s.concat(a.length?a:(l=>Ts(l)?sn(l).filter(Rd).fold(W([]),d=>[l,d]):Rd(l)?[l]:[])(o));var l,d;return Et(i,$o)})(i,l,d))));var r,s,a,i,l,d})(k(m.getBody()),b,m.schema).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return Ly(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(c0(k(t.getBody())).isNone()){const o=ws('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Yt(o,k(e.extractContents())),e.insertNode(o.dom),sn(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const a=i=>{const l=ue(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(s(c))return C.some(c);const u=a(c);if(u.isSome())return u}return C.none()};return a(r)})(n,l0)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===xt(s=r)?1:Gg(s).fold(()=>ue(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=k(t.getBody()),c0(n).each(o=>{const r=e.selection.getBookmark();Yn(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),Mn=t=>ht(t.plugins,"rtc"),rm=t=>t.rtcInstance?t.rtcInstance:Wy(t),Wt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Ky=t=>Wt(t).init.bindEvents(),Yy=t=>0===t.dom.length?(Dt(t),C.none()):C.some(t),Gy=(t,e,n,o,r)=>{t.bind(s=>((o?lu:qi)(s.dom,o?s.dom.length:0,r),e.filter(He).map(a=>((i,l,d,c,u)=>{const m=i.dom,p=l.dom,f=c?m.length:p.length;c?(du(m,p,u,!1,!c),d.setStart(p,f)):(du(p,m,u,!1,!c),d.setEnd(p,f))})(s,a,n,o,r)))).orThunk(()=>{return(a=e,i=o,a.filter(l=>ra.isBookmarkNode(l.dom)).bind(i?Es:Ao)).or(e).filter(He).map(a=>((i,l,d)=>{sn(i).each(c=>{const u=i.dom;l&&da(c,L(u,0),d)?qi(u,0,d):!l&&ca(c,L(u,u.length),d)&&lu(u,u.length,d)})})(a,o,r));var a,i})},Xy=(t,e,n)=>{if(ht(t,e)){const o=gt(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},Qy=t=>!(!t||!t.ownerDocument)&&qn(k(t.ownerDocument),k(t)),Jy=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((g,b)=>{let v,y;const x=(E,N)=>Zt(N,T=>g.is(T,E)),w=E=>g.getParents(E,void 0,g.getRoot());return{selectorChangedWithUnbind:(E,N)=>(v||(v={},y={},b.on("NodeChange",T=>{const O=T.element,P=w(O),_={};Bt(v,(R,B)=>{x(B,P).each(M=>{y[B]||(U(R,V=>{V(!0,{node:M,selector:B,parents:P})}),y[B]=R),_[B]=R})}),Bt(y,(R,B)=>{_[B]||(delete y[B],U(R,M=>{M(!1,{node:O,selector:B,parents:P})}))})})),v[E]||(v[E]=[]),v[E].push(N),x(E,w(b.selection.getStart())).each(()=>{y[E]=v[E]}),{unbind:()=>{Xy(v,E,N),Xy(y,E,N)}})}})(t,o),i=(g,b)=>((v,y,x={})=>{const w=(E=x,N=y,{format:"html",...E,set:!0,selection:!0,content:N});var E,N;Qu(v,w).each(E=>{const N=((O,P)=>{if("raw"!==P.format){const _=O.selection.getRng(),R=O.dom.getParent(_.commonAncestorContainer,O.dom.isBlock),B=R?{context:R.nodeName.toLowerCase()}:{},M=O.parser.parse(P.content,{forced_root_block:!1,...B,...P});return ho({validate:!1},O.schema).serialize(M)}return P.content})(v,E),T=v.selection.getRng();((O,P,_)=>{const R=C.from(P.firstChild).map(k),B=C.from(P.lastChild).map(k);O.deleteContents(),O.insertNode(P);const M=R.bind(Ao).filter(He).bind(Yy),V=B.bind(Es).filter(He).bind(Yy);Gy(M,R,O,!0,_),Gy(V,B,O,!1,_),O.collapse(!1)})(T,T.createContextualFragment(N),v.schema),v.selection.setRng(T),aa(v,T),Ju(v,N,E)})})(o,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let g;const b=(y,x,w)=>{try{return x.compareBoundaryPoints(y,w)}catch{return-1}},v=e.document;if(q(o.bookmark)&&!Zo(o)){const y=Wc(o);if(y.isSome())return y.map(x=>Jc(o,[x])[0]).getOr(v.createRange())}try{const y=d();y&&!ri(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=Jc(o,[g])[0])}catch{}if(g||(g=v.createRange()),Rs(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return r&&s&&(0===b(g.START_TO_START,g,r)&&0===b(g.END_TO_END,g,r)?g=s:(r=null,s=null)),g},u=(g,b)=>{if(!((y=g)&&Qy(y.startContainer)&&Qy(y.endContainer)))return;var y;const v=d();if(g=o.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){s=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&v?.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=g?.anchorNode,v=g?.focusNode;if(!g||!b||!v||ri(b)||ri(v))return!0;const y=t.createRng(),x=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),x.setStart(v,g.focusOffset),x.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,x)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(g={type:"word"})=>u(Jo(t).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();q(g)&&q(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(Sc(t,v,o.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return x=v.format?v.format:"html",w=v,Wt(b).selection.getContent(x,w);var x,w})(o,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=t,y=g,x=b,C.from(y).bind(w=>C.from(w.parentNode).map(E=>{const N=v.nodeIndex(w),T=v.createRng();return T.setStart(E,N),T.setEnd(E,N+1),x&&(Sc(v,T,w,!0),Sc(v,T,w,!1)),T}))).each(u),g;var v,y,x},isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{const g=c(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?zn(b,v=>t.isEditable(v.parentElement)):o0(t,g)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const x=b.startOffset,w=b.endOffset;let E=b.commonAncestorContainer;b.collapsed||(v===y&&w-x<2&&v.hasChildNodes()&&(E=v.childNodes[x]),j(v)&&j(y)&&(v=v.length===x?i0(v.nextSibling,!0):v.parentNode,y=0===w?i0(y.previousSibling,!1):y.parentNode,v&&v===y&&(E=v)));const N=j(E)?E.parentNode:E;return Gn(N)?N:g})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>s0(o.getBody(),c(),g),getEnd:g=>a0(o.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,x,w)=>{const E=[],N=v.getRoot(),T=v.getParent(x||s0(N,y,y.collapsed),v.isBlock),O=v.getParent(w||a0(N,y,y.collapsed),v.isBlock);if(T&&T!==N&&E.push(T),T&&O&&T!==O){let P;const _=new te(T,N);for(;(P=_.next())&&P!==O;)v.isBlock(P)&&E.push(P)}return O&&T!==O&&O!==N&&E.push(O),E})(t,c(),g,b),normalize:()=>{const g=c(),b=d();if(!(Ec(b).length>1)&&Oi(o)){const v=Fi(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(a(g,b),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;q(g)?((v=o).inline?lN:cN)(v,g,b):aa(o,c(),b)},placeCaretAt:(g,b)=>u(Mb(g,b,o.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?L.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=r=s=null,h.destroy()}},f=ra(p),h=Ob(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},qR=(t,e,n)=>{-1===H.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},Zy=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:Ot.DOM,s=e&&e.schema?e.schema:co(o),a=Wr(o,s);return l=o,d=r,(i=a).addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!di(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=null!==(m=g?.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&0===p?.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===p?.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{U(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&ay(l,i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=(f=i,b=h=d,q(g=p=e)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const x=g.dom;let w=b.cloneNode(!0);const E=document.implementation;if(E.createHTMLDocument){const N=E.createHTMLDocument("");H.each("BODY"===w.nodeName?w.childNodes:[w],T=>{N.body.appendChild(N.importNode(T,!0))}),w="BODY"!==w.nodeName?N.body.firstChild:N.body,y=x.doc,x.doc=N}return T={...v,node:w},g.dispatch("PreProcess",T),y&&(x.doc=y),w;var T})(p,f,h):f),u=((p,f,h)=>{const g=ze(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||li(k(f))?g:H.trim(g)})(r,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=w=>"br"===w?.name,x=v.lastChild;if(y(x)){const w=x.prev;y(w)&&(x.remove(),w.remove())}})(b),b})(a,u,d);var p,f,h,g,b;return"tree"===d.format?m:((p,f,h,g,b)=>{var w;return((y,x,w)=>{return!x.no_events&&y?(N=y,T={...x,content:w},N.dispatch("PostProcess",T)).content:w;var N,T})(p,b,(w=g,ho(f,h).serialize(w)))})(e,o,s,m,d)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:J(qR,a,n),getTempAttrs:W(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,d})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},sm=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return Qu(t,o).map(r=>{const s=(i=r.content,l=r,rm(t).editor.setContent(i,l));var i,l;return Ju(t,s.html,r),s.content}).getOr(e)},WR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),KR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),YR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),tC=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],eC=(t,e)=>{const n=gt(e,o=>ht(t,o));return _o(n)},nC=(t,e)=>{const n=H.makeMap(t.plugins," "),o=gt(e,r=>ht(n,r));return _o(o)},ZR=t=>Zt(tC,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),rl=Ot.DOM,sl=t=>C.from(t).each(e=>e.destroy()),al=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>ht(t,e)}})(),Kr=xe.ModelManager,oC=(t,e)=>e.dom[t],rC=(t,e)=>parseInt(Rn(e,t),10),tA=J(oC,"clientWidth"),eA=J(oC,"clientHeight"),nA=J(rC,"margin-top"),oA=J(rC,"margin-left"),sC=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{U(e,l=>{l.reposition()})},s=l=>{us(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(k)).map(kr).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),Zt(e,c=>{return!((u=n().getArgs(c)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c),r(),n0(t)&&o().fold(()=>t.focus(),u=>Gb(k(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=W(e);return(l=t).on("SkinLoaded",()=>{const d=Mk(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{U(e.slice(),d=>{n().close(d)})}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},Yr=xe.PluginManager,rr=xe.ThemeManager,aC=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{t.dispatch("CloseWindow",{dialog:a}),e=gt(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Vc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{U(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},iC=(t,e)=>{t.notificationManager.open({type:"error",text:e})},il=(t,e)=>{t._skinLoaded?iC(t,e):t.on("SkinLoaded",()=>{iC(t,e)})},va=(t,e,n)=>{_b(t,e,{message:n}),console.error(n)},ya=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,ll=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},am=t=>"content/"+t+"/content.css",lC=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return Et(e,r=>tinymce.Resource.has(am(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},dC=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let sA=0;const cC=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),uC=(t,e)=>((t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&at(f.location)?c((g=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),r=Nt(e.handler)?e.handler:o,s=(l,d)=>({url:d,blobInfo:l,status:!0}),a=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{H.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||r!==o?(u=d,c=H.grep(c=l,m=>!t.isUploaded(m.blobUri())),Promise.all(H.map(c,m=>{return t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=r,h=u,t.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=vt)},x=E=>{y(),t.markUploaded(p.blobUri(),E),i(p.blobUri(),s(p,E)),g(s(p,E))},w=E=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),a(p,E)),g(a(p,E))};v=E=>{E<0||E>100||C.from(b).orThunk(()=>C.from(h).map(Zl)).each(N=>{b=N,N.progressBar.value(E)})},f(p,v).then(x,E=>{w(at(E)?{message:E}:E)})}catch(y){g(a(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:Ek(t),basePath:_k(t),credentials:kk(t),handler:Sk(t)}),mC={remove_similar:!0,inherit:!1},Gr={selector:"td,th",...mC},lA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Gr},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Gr},tablecellbordercolor:{styles:{borderColor:"%value"},...Gr},tablecellclass:{classes:["%value"],...Gr},tableclass:{selector:"table",classes:["%value"],...mC},tablecellborderstyle:{styles:{borderStyle:"%value"},...Gr},tablecellborderwidth:{styles:{borderWidth:"%value"},...Gr}},dA=W(lA),dl=H.each,Qe=Ot.DOM,im=t=>q(t)&&we(t),fC=(t,e)=>{const n=e&&e.schema||co({}),o=a=>{const i=at(a)?{name:a,classes:[],attrs:{}}:a,l=Qe.create(i.name);return d=l,(c=i).classes.length>0&&Qe.addClass(d,c.classes.join(" ")),Qe.setAttribs(d,c.attrs),l;var d,c},r=(a,i,l)=>{let d;const c=i[0],u=im(c)?c.name:void 0,m=((h,g)=>{const b=n.getElementRule(h.nodeName.toLowerCase()),v=b?.parentsRequired;return!(!v||!v.length)&&(g&&Rt(v,g)?g:v[0])})(a,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return a;const p=d?o(d):Qe.create("div");p.appendChild(a),l&&H.each(l,h=>{const g=o(h);p.insertBefore(g,a)});const f=im(d)?d.siblings:void 0;return r(p,i,f)},s=Qe.create("div");if(t.length>0){const a=t[0],i=o(a),l=im(a)?a.siblings:void 0;s.appendChild(r(i,t.slice(1),l))}return s},cA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=H.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==H.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},uA=(t,e)=>{let n="",o=zk(t);if(""===o)return"";const r=p=>at(p)?p.replace(/%(\w+)/g,""):"",s=(p,f)=>Qe.getStyle(f??t.getBody(),p,!0);if(at(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let a,i=e.block||e.inline||"span";const l=at(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),H.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=H.map(p.split(/(?:~\+|~|\+)/),cA),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=fC(l,t)):a=fC([i],t);const c=Qe.select(i,a)[0]||a.firstChild;dl(e.styles,(p,f)=>{const h=r(p);h&&Qe.setStyle(c,f,h)}),dl(e.attributes,(p,f)=>{const h=r(p);h&&Qe.setAttrib(c,f,h)}),dl(e.classes,p=>{const f=r(p);Qe.hasClass(c,f)||Qe.addClass(c,f)}),t.dispatch("PreviewFormats"),Qe.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const u=s("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return dl(o.split(" "),p=>{let f=s(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=s(p),"#ffffff"===Ds(f).toLowerCase())||"color"===p&&"#000000"===Ds(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),Qe.remove(a),n},gC=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(at(a)?(Jt(i)||(i=[i]),U(i,l=>{fe(l.deep)&&(l.deep=!Ke(l)),fe(l.split)&&(l.split=!Ke(l)||ee(l)),fe(l.remove)&&Ke(l)&&!ee(l)&&(l.remove="none"),Ke(l)&&ee(l)&&(l.mixed=!0,l.block_expand=!0),at(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):Bt(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>Z(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{H.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=c?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return H.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(dA()),s(Uk(o)),{get:a=>q(a)?r[a]:r,has:a=>ht(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=ae({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var s;((a,i,l)=>{const d=a.selection,c=a.getBody();Lu(a,null,l),8!==i&&46!==i||!d.isCollapsed()||d.getStart().innerHTML!==fa||Lu(a,Go(c,d.getStart()),!0),37!==i&&39!==i||Lu(a,Go(c,d.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,j(s)&&id(s.data,re)))}),Mn(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{oy(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=C.from(s.node).map(i=>na(i)?i:i.startContainer).bind(i=>Z(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>ty(r));oy(r,a,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Wt(t).formatter.apply(i,l,d)},remove:(o,r,s,a)=>{var l,d,c,u;l=o,d=r,c=s,u=a,Wt(t).formatter.remove(l,d,c,u)},toggle:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Wt(t).formatter.toggle(i,l,d)},match:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Wt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return s=o,Wt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,Wt(t).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Wt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return s=o,Wt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,d=o,c=r,u=s,m=a,Wt(t).formatter.formatChanged(l,d,c,u,m);var l,d,c,u,m},getCssText:J(uA,t)};var o},pC=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},hC=t=>{const e=uo(),n=ae(0),o=ae(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Wt(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,d=o,c=n,u=e,m=s,p=a,Wt(t).undoManager.add(l,d,c,u,m,p);var l,d,c,u,m,p},dispatchChange:()=>{t.setDirty(!0);const s=nl(t);s.bookmark=ac(t.selection),t.dispatch("change",{level:s,lastLevel:qa(r.data,o.get()).getOrUndefined()})},undo:()=>{return a=r,i=n,l=o,Wt(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,Wt(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,Wt(t).undoManager.clear(a,i)},reset:()=>{var a;a=r,Wt(t).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,Wt(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,Wt(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,d=s,Wt(t).undoManager.transact(i,l,d);var i,l,d},ignore:s=>{var i,l;i=n,l=s,Wt(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,d,c,u;l=r,d=o,c=s,u=a,Wt(t).undoManager.extra(l,d,c,u)}};return Mn(t)||((s,a,i)=>{const l=ae(!1),d=c=>{ol(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{pC(c.command)||(Vy(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{pC(c.command)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=_t.os.isMacOS()&&"Meta"===c.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey||m)&&(d(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&a.typing&&!nm(nl(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",c=>{const u=c.keyCode;if(!c.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||a.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((_t.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&a.beforeChange()):(a.beforeChange(),ol(a,!0,i),a.add({},c),void l.set(!0));a.typing&&d(c)}}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u,m;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(m=c).inputType||"insertFromDrop"===m.inputType)&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},mA=[9,27,Y.HOME,Y.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Y.DOWN,Y.UP,Y.LEFT,Y.RIGHT].concat(_t.browser.isFirefox()?[224]:[]),bC="data-mce-placeholder",vC=t=>"keydown"===t.type||"keyup"===t.type,yC=t=>{const e=t.keyCode;return e===Y.BACKSPACE||e===Y.DELETE},fA=(t,e)=>({from:t,to:e}),lm=(t,e)=>{const n=k(t),o=k(e.container());return Vi(n,o).map(r=>({block:r,position:e}))},CC=(t,e)=>To(e,n=>Os(n)||an(n.dom),n=>kt(n,t)).filter(Fe).getOr(t),wC=(t,e)=>{const n=((o,r)=>{const s=ue(o);return us(s,a=>r.isBlock(xt(a))).fold(W(s),a=>s.slice(0,a))})(t,e);return U(n,Dt),n},xC=(t,e)=>{const n=Zn(e,t);return Zt(n.reverse(),o=>Vt(o)).each(Dt)},gA=(t,e,n,o,r)=>{if(Vt(n))return ao(n),Ce(n.dom);0===gt(Ng(r),a=>!Vt(a)).length&&Vt(e)&&De(r,oe("br"));const s=Le(n.dom,L.before(r.dom));return U(wC(e,o),a=>{De(r,a)}),xC(t,e),s},pA=(t,e,n,o)=>{if(Vt(n)){if(Vt(e)){const a=cs((i=>{const l=(d,c)=>fd(d).fold(()=>c,u=>o.isInline(xt(u))?l(u,c.concat($o(u))):c);return l(i,[])})(n),(i,l)=>(Ig(i,l),l),Bs());Sr(e),Yt(e,a)}return Dt(n),Ce(e.dom)}const r=dn(n.dom);return U(wC(e,o),s=>{Yt(n,s)}),xC(t,e),r},EC=(t,e)=>{Fr(t,e.dom).bind(n=>C.from(n.getNode())).map(k).filter(Mo).each(Dt)},_C=(t,e,n,o)=>{return EC(!0,e),EC(!1,n),(r=e,s=n,qn(s,r)?((a,i)=>{const l=Zn(i,a);return C.from(l[l.length-1])})(s,r):C.none()).fold(J(pA,t,e,n,o),J(gA,t,e,n,o));var r,s},kC=(t,e,n,o,r)=>e?_C(t,o,n,r):_C(t,n,o,r),dm=(t,e)=>{const n=k(t.getBody());return(r=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,d)=>{const c=lm(i,L.fromRangeStart(d)),u=c.bind(m=>qe(l,i,m.position).bind(p=>lm(i,p).map(f=>{return h=i,g=l,Ht((b=f).position.getNode())&&!Vt(b.block)?Fr(!1,b.block.dom).bind(v=>v.isEqual(b.position)?qe(g,h,v).bind(y=>lm(h,y)):C.some(b)).getOr(b):b;var h,g,b})));return be(c,u,fA).filter(m=>{return!kt((p=m).from.block,p.to.block)&&((p,f)=>{const h=k(p);return kt(CC(h,f.from.block),CC(h,f.to.block))})(i,m)&&(p=>!1===Lt(p.from.block.dom)&&!1===Lt(p.to.block.dom))(m)&&(p=>{const f=h=>Xg(h)||Md(h.dom);return f(p.from.block)&&f(p.to.block)})(m);var p})})(r,s,a):C.none()).map(r=>()=>{kC(n,e,r.from.block,r.to.block,t.schema).each(s=>{t.selection.setRng(s.toRange())})});var r,s,a},SC=(t,e)=>{const n=k(e),o=J(kt,t);return Wn(n,Os,o).isSome()},cm=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=k(t.getBody());return((n,o)=>{const r=Le(n.dom,L.fromRangeStart(o)).isNone(),s=Ae(n.dom,L.fromRangeEnd(o)).isNone();return!(SC(a=n,(i=o).startContainer)||SC(a,i.endContainer))&&r&&s;var a,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o,r)=>{const s=o.getRng();return be(Vi(n,k(s.startContainer)),Vi(n,k(s.endContainer)),(a,i)=>kt(a,i)?C.none():C.some(()=>{s.deleteContents(),kC(n,!0,a,i,r).each(l=>{o.setRng(l.toRange())})})).getOr(C.none())})(e,t.selection,t.schema);var n})(t),to=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),Ca=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),um=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=hc(1,o.getBody(),r),i=L.fromRangeStart(a),l=i.getNode();if(Gs(l))return to(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Gs(d))return to(1,o,d,!1,!1);const c=nr(o.dom.getRoot(),i.getNode());return Gs(c)?to(1,o,c,!1,s):C.none()})(t,e,n).getOr(e):e,bA=t=>vo(t)||ia(t),vA=t=>yo(t)||la(t),NC=(t,e,n,o,r,s)=>{var a,i;to(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,j(i=n)&&0===i.data.length&&a.remove(i)},mm=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!j(r.commonAncestorContainer))return C.none();const s=o?ie.Forwards:ie.Backwards,a=Pn(n.getBody()),i=J(bc,o?a.next:a.prev),l=o?bA:vA,d=ta(s,n.getBody(),r),c=i(d),u=c&&Ge(o,c);if(!u||!Ni(d,u))return C.none();if(l(u))return C.some(()=>NC(n,r,d.getNode(),s,o,u));const m=i(u);return m&&l(m)&&Ni(u,m)?C.some(()=>NC(n,r,d.getNode(),s,o,m)):C.none()})(t,e),fm=(t,e)=>{const n=t.getBody();return e?Ce(n).filter(vo):dn(n).filter(yo)},gm=t=>{const e=t.selection.getRng();return!e.collapsed&&(fm(t,!0).exists(n=>n.isEqual(L.fromRangeStart(e)))||fm(t,!1).exists(n=>n.isEqual(L.fromRangeEnd(e))))},Je=Tn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),RC=(t,e,n,o)=>qe(e,t,n).bind(r=>{return s=r.getNode(),q(s)&&(Os(k(s))||Ts(k(s)))||((a,i,l,d,c)=>{const u=m=>c.isInline(m.nodeName.toLowerCase())&&!On(l,d,a);return jh(!i,l).fold(()=>jh(i,d).fold(zt,u),u)})(t,e,n,r,o)?C.none():e&&Lt(r.getNode())||!e&&Lt(r.getNode(!0))?((a,i,l,d)=>{const c=d.getNode(!i);return Vi(k(a),k(l.getNode())).map(u=>Vt(u)?Je.remove(u.dom):Je.moveToElement(c)).orThunk(()=>C.some(Je.moveToElement(c)))})(t,e,n,r):e&&yo(n)||!e&&vo(n)?C.some(Je.moveToPosition(r)):C.none();var s}),AC=(t,e)=>C.from(nr(t.getBody(),e)),TC=t=>{const e=t.dom,n=t.selection,o=nr(t.getBody(),n.getNode());if(an(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(L.before(r).toRange())}return!0},pm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return AC(t,n).filter(Lt).fold(()=>((o,r,s,a)=>{const i=hc(r?1:-1,o,s),l=L.fromRangeStart(i),d=k(o);return!r&&yo(l)?C.some(Je.remove(l.getNode(!0))):r&&vo(l)?C.some(Je.remove(l.getNode())):!r&&vo(l)&&su(d,l,a)?LN(d,l,a).map(c=>Je.remove(c.getNode())):r&&yo(l)&&ru(d,l,a)?MN(d,l,a).map(c=>Je.remove(c.getNode())):(c=o,p=a,((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return Z(g)&&g.getAttribute("data-mce-caret")===b})(u=r,m=l)?(f=u,h=m.getNode(!u),Gt(h)?C.none():f&&Lt(h.nextSibling)?C.some(Je.moveToElement(h.nextSibling)):!f&&Lt(h.previousSibling)?C.some(Je.moveToElement(h.previousSibling)):C.none()).orThunk(()=>RC(c,u,m,p)):RC(c,u,m,p).bind(f=>((h,g,b)=>b.fold(v=>C.some(Je.remove(v)),v=>C.some(Je.moveToElement(v)),v=>On(g,v,h)?C.none():C.some(Je.moveToPosition(v))))(c,m,f)));var c,u,m,p,f,h})(t.getBody(),e,t.selection.getRng(),t.schema).map(o=>()=>{return o.fold((r=t,s=e,a=>(r._selectionOverrides.hideFakeCaret(),tr(r,s,k(a)),!0)),((r,s)=>a=>{const i=s?L.before(a):L.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>C.some(vt))})(t,e):((n,o)=>{const r=n.selection.getNode();return Lt(r)&&!ai(r)?AC(n,r.parentNode).filter(Lt).fold(()=>C.some(()=>{var s;s=k(n.getBody()),U(ve(s,".mce-offscreen-selection"),Dt),tr(n,o,k(n.selection.getNode())),uu(n)}),()=>C.some(vt)):gm(n)?C.some(()=>{tv(n,n.selection.getRng(),k(n.getBody()))}):C.none()})(t,e),hm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=L.fromRangeStart(n.selection.getRng());return qe(o,n.getBody(),r).filter(s=>o?TN(s):ON(s)).bind(s=>pc(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):C.none(),Xr=j,OC=t=>Xr(t)&&t.data[0]===se,BC=t=>Xr(t)&&t.data[t.data.length-1]===se,PC=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(se)},cl=(t,e)=>t?(n=>{var o;if(Xr(n.previousSibling))return BC(n.previousSibling)||n.previousSibling.appendData(se),n.previousSibling;if(Xr(n))return OC(n)||n.insertData(0,se),n;{const r=PC(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(Xr(n.nextSibling))return OC(n.nextSibling)||n.nextSibling.insertData(0,se),n.nextSibling;if(Xr(n))return BC(n)||n.appendData(se),n;{const s=PC(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),CA=J(cl,!0),wA=J(cl,!1),DC=(t,e)=>j(t.container())?cl(e,t.container()):cl(e,t.getNode()),LC=(t,e)=>{const n=e.get();return n&&t.container()===n&&io(n)},bm=(t,e)=>e.fold(n=>{Ko(t.get());const o=CA(n);return t.set(o),C.some(L(o,o.length-1))},n=>Ce(n).map(o=>{if(LC(o,t)){const r=t.get();return L(r,1)}{Ko(t.get());const r=DC(o,!0);return t.set(r),L(r,1)}}),n=>dn(n).map(o=>{if(LC(o,t)){const r=t.get();return L(r,r.length-1)}{Ko(t.get());const r=DC(o,!1);return t.set(r),L(r,r.length-1)}}),n=>{Ko(t.get());const o=wA(n);return t.set(o),C.some(L(o,1))}),MC=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},_e=Tn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),IC=(t,e)=>go(e,t)||t,xA=(t,e,n)=>{const o=G0(n),r=IC(e,o.container());return Co(t,r,o).fold(()=>Ae(r,o).bind(J(Co,t,r)).map(s=>_e.before(s)),C.none)},EA=(t,e)=>null===Go(t,e),FC=(t,e,n)=>Co(t,e,n).filter(J(EA,e)),_A=(t,e,n)=>{const o=X0(n);return FC(t,e,o).bind(r=>Le(r,o).isNone()?C.some(_e.start(r)):C.none())},kA=(t,e,n)=>{const o=G0(n);return FC(t,e,o).bind(r=>Ae(r,o).isNone()?C.some(_e.end(r)):C.none())},SA=(t,e,n)=>{const o=X0(n),r=IC(e,o.container());return Co(t,r,o).fold(()=>Le(r,o).bind(J(Co,t,r)).map(s=>_e.after(s)),C.none)},UC=t=>!Y0(vm(t)),In=(t,e,n)=>MC([xA,_A,kA,SA],[t,e,n]).filter(UC),vm=t=>t.fold(Ne,Ne,Ne,Ne),zC=t=>t.fold(W("before"),W("start"),W("end"),W("after")),ul=t=>t.fold(_e.before,_e.before,_e.after,_e.after),ym=t=>t.fold(_e.start,_e.start,_e.end,_e.end),NA=(t,e,n,o,r,s)=>be(Co(e,n,o),Co(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=go(d,l),m=go(c,l);return q(u)&&u===m})(n,a,i)?_e.after(t?a:i):s).getOr(s),RA=(t,e)=>t.fold(Kt,n=>{return r=e,!(zC(o=n)===zC(r)&&vm(o)===vm(r));var o,r}),AA=(t,e)=>t?e.fold(En(C.some,_e.start),C.none,En(C.some,_e.after),C.none):e.fold(C.none,En(C.some,_e.before),C.none,En(C.some,_e.end)),jC=(t,e,n)=>{const o=t?1:-1;return e.setRng(L(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Fn;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Fn||(Fn={}));const ml=(t,e)=>t===ie.Backwards?ms(e):e,TA=(t,e,n)=>t===ie.Forwards?e.next(n):e.prev(n),OA=(t,e,n,o)=>Ht(o.getNode(e===ie.Forwards))?Fn.Br:!1===On(n,o)?Fn.Block:Fn.Wrap,HC=(t,e,n,o)=>{const r=Pn(n);let s=o;const a=[];for(;s;){const i=TA(e,r,s);if(!i)break;if(Ht(i.getNode(!1)))return e===ie.Forwards?{positions:ml(e,a).concat([i]),breakType:Fn.Br,breakAt:C.some(i)}:{positions:ml(e,a),breakType:Fn.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(s,i)){const l=OA(0,e,s,i);return{positions:ml(e,a),breakType:l,breakAt:C.some(i)}}a.push(i),s=i}else s=i}return{positions:ml(e,a),breakType:Fn.Eol,breakAt:C.none()}},$C=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===ie.Backwards?s.concat(r):[r].concat(s)}).getOr([]),Cm=(t,e)=>Oe(t,(n,o)=>n.fold(()=>C.some(o),r=>be(Be(r.getClientRects()),Be(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),C.none()),fl=(t,e)=>Be(e.getClientRects()).bind(n=>Cm(t,n.left)),wa=J(HC,L.isAbove,-1),xa=J(HC,L.isBelow,1),qC=J($C,-1,wa),VC=J($C,1,xa),WC=(t,e)=>wa(t,e).breakAt.isNone(),KC=(t,e)=>xa(t,e).breakAt.isNone(),BA=(t,e)=>fl(qC(t,e),e),PA=(t,e)=>fl(VC(t,e),e),DA=Lt,YC=(t,e)=>Math.abs(t.left-e),GC=(t,e)=>Math.abs(t.right-e),XC=(t,e)=>Ya(t,(n,o)=>{const r=Math.min(YC(n,e),GC(n,e)),s=Math.min(YC(o,e),GC(o,e));return s===r&&vr(o,"node")&&DA(o.node)||s<r?o:n}),LA=t=>{const e=n=>Et(n,o=>{const r=Vo(o);return r.node=t,r});if(Z(t))return e(t.getClientRects());if(j(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},QC=t=>rn(t,LA);var Ea;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ea||(Ea={}));const JC=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let m=QC([u]);-1===t&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&e(f,So(i))&&a++,f.line=a,r(f))return!0;i.push(f)}}return!1},d=So(s.getClientRects());if(!d)return i;const c=s.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=Qs(h,u,ep,m);)if(p(h))return})(t,o,l,c)),i},MA=J(JC,Ea.Up,$s,qs),IA=J(JC,Ea.Down,qs,$s),ZC=t=>So(t.getClientRects()),t1=t=>e=>e.line>t,wm=t=>e=>e.line===t,eo=(t,e)=>{t.selection.setRng(e),aa(t,t.selection.getRng())},xm=(t,e,n)=>C.some(um(t,e,n)),e1=(t,e,n,o,r,s)=>{const a=e===ie.Forwards,i=Pn(t.getBody()),l=J(bc,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const f=yi(n);if(s(f))return to(e,t,f,e===ie.Backwards,!1);if(gm(t)){const h=n.cloneRange();return h.collapse(e===ie.Backwards),C.from(h)}}const c=ta(e,t.getBody(),n);if(d(c))return Ca(t,c.getNode(!a));let u=l(c);const m=Jg(n);if(!u)return m?C.some(n):C.none();if(u=Ge(a,u),d(u))return to(e,t,u.getNode(!a),a,!1);const p=l(u);return p&&d(p)&&Ni(u,p)?to(e,t,p.getNode(!a),a,!1):m?xm(t,u.toRange(),!1):C.none()},n1=(t,e,n,o,r,s)=>{const a=ta(e,t.getBody(),n),i=So(a.getClientRects()),l=e===Ea.Down,d=t.getBody();if(!i)return C.none();if(gm(t)){const h=l?L.fromRangeEnd(n):L.fromRangeStart(n);return(l?PA:BA)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?IA:MA)(d,t1(1),a),u=gt(c,wm(1)),m=i.left,p=XC(u,m);if(p&&s(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return to(e,t,p.node,h<g,!1)}let f;if(f=o(a)?a.getNode():r(a)?a.getNode(!0):yi(n),f){const h=((b,v,y,x)=>{const w=Pn(v);let E,N,T,O;const P=[];let _=0;1===b?(E=w.next,N=qs,T=$s,O=L.after(x)):(E=w.prev,N=$s,T=qs,O=L.before(x));const R=ZC(O);do{if(!O.isVisible())continue;const B=ZC(O);if(T(B,R))continue;P.length>0&&N(B,So(P))&&_++;const M=Vo(B);if(M.position=O,M.line=_,y(M))return P;P.push(M)}while(O=E(O));return P})(e,d,t1(1),f);let g=XC(gt(h,wm(1)),m);if(g||(g=So(gt(h,wm(0))),g))return xm(t,g.position.toRange(),!1)}return 0===u.length?Em(t,l).filter(l?r:o).map(h=>um(t,h.toRange(),!1)):C.none()},Em=(t,e)=>{const n=t.selection.getRng(),o=e?L.fromRangeEnd(n):L.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),Wn(k(s),i=>MS(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=xa(r,o);return ko(i.positions)}{const i=wa(r,o);return Be(i.positions)}},o1=(t,e,n)=>Em(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),gl=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},r1=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},s1=(t,e,n)=>bm(e,n).map(o=>(gl(t,o),n)),a1=(t,e,n)=>!!Ys(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,a,i)=>{const l=L.fromRangeStart(s);if(s.collapsed)return l;{const d=L.fromRangeEnd(s);return i?Le(a,d).getOr(d):Ae(a,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,a,i,l)=>{const d=Ge(s,l),c=In(a,i,d);return In(a,i,d).bind(J(AA,s)).orThunk(()=>((u,m,p,f,h)=>{const g=Ge(u,h);return qe(u,p,g).map(J(Ge,u)).fold(()=>f.map(ul),b=>In(m,p,b).map(J(NA,u,m,p,g,b)).filter(J(RA,f))).filter(UC)})(s,a,i,c,l))})(n,J(er,t),o,r).bind(s=>s1(t,e,s))})(t,e,n).isSome(),i1=(t,e,n)=>!!Ys(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?L.fromRangeEnd(s):L.fromRangeStart(s);return!!Nt(r.selection.getSel().modify)&&(o&&Ad(a)?jC(!0,r.selection,a):!(o||!Td(a))&&jC(!1,r.selection,a))})(t,e),zA=J(i1,!0),jA=J(i1,!1),pl=(t,e,n)=>{if(Ys(t)){const o=Em(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?L.fromRangeEnd(r):L.fromRangeStart(r)});return In(J(er,t),t.getBody(),o).exists(r=>{const s=ul(r);return bm(n,s).exists(a=>(gl(t,a),!0))})}return!1},l1=(t,e)=>n=>bm(e,n).map(o=>()=>gl(t,o)),d1=(t,e,n,o)=>{const r=t.getBody(),s=J(er,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),cu(t),In(s,r,L.fromRangeStart(t.selection.getRng())).map(ym).bind(l1(t,e)).each(ds)}),t.nodeChanged()},_m=(t,e,n)=>{if(t.selection.isCollapsed()&&Ys(t)){const o=L.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=(u=r.getBody(),m=i.container(),go(m,u)||u),d=J(er,r),c=In(d,l,i);var u,m;return c.bind(u=>a?u.fold(W(C.some(ym(u))),C.none,W(C.some(ul(u))),C.none):u.fold(C.none,W(C.some(ul(u))),C.none,W(C.some(ym(u))))).map(l1(r,s)).getOrThunk(()=>{const u=Ir(a,l,i),m=u.bind(p=>In(d,l,p));return be(c,m,()=>Co(d,l,i).bind(p=>{return be(Ce(f=p),dn(f),(h,g)=>{const b=Ge(!0,h),v=Ge(!1,g);return Ae(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{tr(r,a,k(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{a?d1(r,s,i,p):d1(r,s,p,i)})))})})(t,e,n,o)}return C.none()},c1=(t,e)=>{const n=k(t.getBody()),o=k(t.selection.getStart()),r=Zn(o,n);return us(r,e).fold(W(r),s=>r.slice(0,s))},HA=t=>1===pd(t),u1=(t,e)=>{const n=J(Nv,t);return rn(e,o=>n(o)?[o.dom]:[])},m1=t=>{const e=c1(n=t,o=>n.schema.isBlock(xt(o)));var n;return u1(t,e)},f1=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Ht(s)&&!Se(a)&&r.dom.isEmpty(a)})(t,n)||Lc(k(n))?Sv(n,e):((r,s)=>{const{caretContainer:a,caretPosition:i}=kv(s);return r.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},g1=t=>j(t.startContainer),km=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=gt(c1(o=t,r=>o.schema.isBlock(xt(r))||pd(r)>1),HA);var o;return ko(n).bind(o=>{const r=L.fromRangeStart(t.selection.getRng());return J0(e,r,o.dom)&&!Lc(o)?C.some(()=>((s,a,i,l)=>{const d=u1(a,l);if(0===d.length)tr(a,s,i);else{const c=Sv(i.dom,d);a.selection.setRng(c.toRange())}})(e,t,o,n)):C.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&g1(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!Se(r)&&Nv(n,k(r))})(t,e)&&(n=>{return(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Se(s)&&!Se(a)&&s.isEqualNode(a)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===(j(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=m1(n);return C.some(()=>{cu(n),((r,s)=>{const a=$a(s,m1(r));a.length>0&&f1(r,a)})(n,o)})}return C.none()})(t),_a=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(g1(n)||e.dom.isEmpty(n.startContainer))&&!((t,e)=>Wn(t,n=>Ve(n.dom),n=>e.isBlock(xt(n))).isSome())(k((o=e).selection.getStart()),o.schema);var o})(t)&&f1(t,[]),!0),Sm=(t,e,n)=>q(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),tr(t,e,k(n))}):C.none(),Nm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?ia:la,a=ta(o?ie.Forwards:ie.Backwards,n.getBody(),n.selection.getRng());return r(a)?Sm(n,o,a.getNode(!o)):C.from(Ge(o,a)).filter(i=>r(i)&&Ni(a,i)).bind(i=>Sm(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return An(r)?Sm(n,o,r):C.none()})(t,e),Rm=t=>Ga(t??"").getOr(0),p1=(t,e)=>(t||"table"===xt(e)?"margin":"padding")+("rtl"===Rn(e,"direction")?"-right":"-left"),h1=t=>{const e=v1(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,zn(e,r=>{const s=p1(Ch(n),r),a=ei(r,s).map(Rm).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},b1=t=>Rd(t)||Ts(t),v1=t=>gt(Cd(t.selection.getSelectedBlocks()),e=>!b1(e)&&!sn(e).exists(b1)&&To(e,n=>an(n.dom)||Lt(n.dom)).exists(n=>an(n.dom))),y1=(t,e)=>{var n,o;const{dom:r}=t,s=Ak(t),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=Rm(s),l=Ch(t);U(v1(t),d=>{((c,u,m,p,f,h)=>{const g=p1(m,k(h)),b=Rm(c.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else c.setStyle(h,g,b+p+f)})(r,e,l,i,a,d.dom)})},C1=t=>y1(t,"outdent"),w1=t=>{if(t.selection.isCollapsed()&&h1(t)){const e=t.dom,n=t.selection.getRng(),o=L.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&ou(k(r),o,t.schema))return C.some(()=>C1(t))}return C.none()},x1=(t,e,n)=>br([w1,pm,mm,(o,r)=>_m(o,e,r),dm,yu,hm,Nm,cm,km],o=>o(t,n)).filter(o=>t.selection.isEditable()),E1=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),Am=(t,e)=>ht(t,e.nodeName),KA=(t,e)=>!!j(e)||!!Z(e)&&!(Am(t.getBlockElements(),e)||We(e)||Fo(t,e)||Pd(e)),YA=(t,e)=>{if(j(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||Am(t,e.nextSibling)||Pd(e.nextSibling)}return!1},_1=t=>t.dom.create(ye(t),Ks(t)),GA=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,d=!1;const c=ye(t);if(!s||!Z(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(y=r,x=a,$t(A0(k(s),k(x)),E=>Am(y,E.dom))))return;var y,x;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:g}=m,b=Zo(t);let v=a.firstChild;for(;v;)if(Z(v)&&I_(o,v),KA(o,v)){if(YA(r,v)){l=v,v=v.nextSibling,e.remove(l);continue}i||(i=_1(t),a.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(p,f),m.setEnd(h,g),n.setRng(m),t.nodeChanged())},k1=(t,e,n)=>{const o=k(_1(t)),r=Bs();Yt(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},S1=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),XA=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},QA=(t,e)=>zn(t,n=>{const o=e.match(n);return null!==o&&o[0].length===e.length}),N1=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Od(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},JA=(t,e)=>{const n=ks(k(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void N1(t,n)):void(Qg(n)&&(N1(t,n),t.undoManager.add()))},R1=Lt,A1=(t,e,n)=>{const o=Pn(t.getBody()),r=J(bc,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(L.fromRangeStart(n))){const a=k((i=>{const l=i.dom.create(ye(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Kn(k(s),a):De(k(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},T1=(t,e)=>((n,o)=>{const r=o?ie.Forwards:ie.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,e1(i,a,l,vo,yo,R1)).orThunk(()=>(A1(n,r,s),C.none()));var a,i,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return Y0(r)?!o:o})(t.selection,e)).exists(n=>(eo(t,n),!0)),O1=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,n1(i,a,l,d=>vo(d)||N0(d),d=>yo(d)||R0(d),R1)).orThunk(()=>(A1(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(eo(t,n),!0)),B1=(t,e)=>o1(t,e,e?yo:vo),hl=(t,e)=>fm(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(eo(t,n),!0)),ZA=t=>Rt(["figcaption"],xt(t)),P1=(t,e)=>!!t.selection.isCollapsed()&&((n,o)=>{const r=k(n.getBody()),s=L.fromRangeStart(n.selection.getRng());return((a,i,l)=>{const d=J(kt,i);return To(k(a.container()),c=>l.isBlock(xt(c)),d).filter(ZA)})(s,r,n.schema).exists(()=>{if(a=r,l=s,o?KC(a.dom,l):WC(a.dom,l)){const a=k1(n,r,o?Yt:yd);return n.selection.setRng(a),!0}var a,l;return!1})})(t,e),D1=(t,e)=>{return n=t,e?C.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,a)=>{const i=s.selection.getRng(),l=L.fromRangeStart(i);return!(s.getBody().lastChild!==a||!KC(a,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):C.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>C.from(n.dom.getParent(r,"details")).map(s=>((a,i,l)=>{const d=a.selection.getRng(),c=L.fromRangeStart(d);return!(a.getBody().firstChild!==i||!WC(l,c)||(a.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1);var n},L1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},M1=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,ct=(t,...e)=>()=>t.apply(null,e),ka=(t,e)=>{return Zt((o=e,rn(Et(t,s=>({...L1,...s})),r=>M1(r,o)?[r]:[])),n=>n.action());var o},I1=(t,e)=>{return br((o=e,rn(Et(t,s=>({...L1,...s})),r=>M1(r,o)?[r]:[])),n=>n.action());var o},F1=(t,e)=>{const n=e?ie.Forwards:ie.Backwards,o=t.selection.getRng();return e1(t,n,o,ia,la,An).exists(r=>(eo(t,r),!0))},U1=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return n1(t,n,o,ia,la,An).exists(r=>(eo(t,r),!0))},z1=(t,e)=>o1(t,e,e?la:ia),j1=Tn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Sa={...j1,none:t=>j1.none(t)},H1=(t,e,n)=>rn(ue(t),o=>gn(o,e)?n(o)?[o]:[]:H1(o,e,n)),$1=(t,e)=>Oo(t,"table",e),Tm=(t,e,n,o,r=Kt)=>{const s=1===o;if(!s&&n<=0)return Sa.first(t[0]);if(s&&n>=t.length-1)return Sa.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?Sa.middle(e,i):Tm(t,e,a,o,r)}},q1=(t,e)=>$1(t,e).bind(n=>{const o=H1(n,"th,td",Kt);return us(o,r=>kt(t,r)).map(r=>({index:r,all:o}))}),V1=(t,e,n,o,r)=>{const s=ve(k(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Oe(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(gt((i=t,rn(s,d=>{const c={left:(u=Vo(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},tT=J(V1,t=>t.bottom,(t,e)=>t.y<e),eT=J(V1,t=>t.top,(t,e)=>t.y>e),W1=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===Fn.Wrap&&0===r.positions.length||!Ht(n.getNode())&&(r=>r.breakType===Fn.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},nT=J(W1,wa),oT=J(W1,xa),rT=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!Lh()||!((a,i,l)=>{const d=L.fromRangeStart(i);return Fr(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(to(s,t,n,!e,!1).each(a=>{eo(t,a)}),0))},K1=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Xn(i)?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>eo(t,n.toRange()),s=>Fr(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>eo(t,n.toRange()),a=>{return i=e,d=s,void(l=t).undoManager.transact(()=>{const c=i?Kn:De,u=k1(l,k(d),c);eo(l,u)});var i,l,d}))},sT=(t,e,n,o)=>{const r=t.selection.getRng(),s=L.fromRangeStart(r),a=t.getBody();if(!e&&nT(o,s)){const i=(l=a,(u=d=n,m=c=s,Be(m.getClientRects()).bind(p=>tT(u,p.left,p.top)).bind(p=>{return fl(dn(f=p).map(h=>wa(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>Be(c.getClientRects()).bind(u=>Cm(qC(l,L.before(d)),u.left))).getOr(L.before(d)));return K1(t,e,i),!0}var l,d,c,u,m;if(e&&oT(o,s)){const i=((l,d,c)=>((u,m)=>ko(m.getClientRects()).bind(p=>eT(u,p.left,p.top)).bind(p=>{return fl(Ce(f=p).map(h=>[h].concat(xa(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>Be(c.getClientRects()).bind(u=>Cm(VC(l,L.after(d)),u.left))).getOr(L.after(d)))(a,n,s);return K1(t,e,i),!0}return!1},Y1=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),G1=(t,e)=>Y1(t,e,rT),Om=(t,e)=>Y1(t,e,sT),X1=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,Bg(s,l0)).map(a=>{return(t=>{const e=$r.getWin(t).dom,n=(r,s,a,i)=>Ic(e,r,s,a,i),o=t.match({domRange:s=>{const a=k(s.startContainer),i=k(s.endContainer);return Lb(a,s.startOffset,i,s.endOffset)},relative:ZS,exact:Lb});return((r,s)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>sa.rtl(k(c.endContainer),c.endOffset,k(c.startContainer),c.startOffset)).getOrThunk(()=>Pb(0,sa.ltr,d)):Pb(0,sa.ltr,d)})(0,(i=r,s.match({domRange:d=>({ltr:W(d),rtl:C.none}),relative:(d,c)=>({ltr:No(()=>Bb(i,d,c)),rtl:No(()=>C.some(Bb(i,c,d)))}),exact:(d,c,u,m)=>({ltr:No(()=>Ic(i,d,c,u,m)),rtl:No(()=>C.some(Ic(i,u,m,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})($r.exact(i=a,0,i,0));var i});var s},o=>(t.execCommand("mceTableInsertRowAfter"),Q1(t,e,o))),Q1=(t,e,n)=>{return X1(t,e,(r=Bo,q1(o=n,void 0).fold(()=>Sa.none(o),s=>Tm(s.all,o,s.index,1,r))));var o,r},aT=(t,e,n)=>{return X1(t,e,(r=Bo,q1(o=n,void 0).fold(()=>Sa.none(),s=>Tm(s.all,o,s.index,-1,r))));var o,r},J1=(t,e)=>{const n=["table","li","dl"],o=k(t.getBody()),r=a=>{const i=xt(a);return kt(a,o)||Rt(n,i)},s=t.selection.getRng();return(a=k(e?s.endContainer:s.startContainer),i=r,((l,d,c=zt)=>c(d)?C.none():Rt(l,xt(d))?C.some(d):_s(d,l.join(","),u=>gn(u,"table")||c(u)))(["td","th"],a,i)).map(a=>($1(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?Q1:aT)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},wn=(t,e)=>({container:t,offset:e}),bl=Ot.DOM,vl=t=>e=>t===e?-1:0,Bm=(t,e,n)=>{if(j(t)&&e>=0)return C.some(wn(t,e));{const o=qo(bl);return C.from(o.backwards(t,e,vl(t),n)).map(r=>wn(r.container,r.container.data.length))}},Pm=(t,e,n)=>{if(!j(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(wn(t,e));{const r=qo(bl);return C.from(r.backwards(t,e,vl(t),n)).bind(s=>Pm(s.container,e+s.container.data.length,n))}},Z1=(t,e,n)=>{if(!j(t))return C.none();const o=t.data;if(e<=o.length)return C.some(wn(t,e));{const r=qo(bl);return C.from(r.forwards(t,e,vl(t),n)).bind(s=>Z1(s.container,e-o.length,n))}},Dm=(t,e,n,o,r)=>{const s=qo(t,(a=t,i=>a.isBlock(i)||Rt(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return C.from(s.backwards(e,n,o,r))},tw=t=>ze(t.toString().replace(/\u00A0/g," ")),ew=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Lm=(t,e)=>t.substring(e.length),nw=(t,e,n,o=0)=>{return(r=k(e.startContainer),Oo(r,d0)).fold(()=>((s,a,i,l=0)=>{if(!(d=a).collapsed||!j(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return Dm(s,a.startContainer,a.startOffset,(m,p,f)=>(c.text=f+c.text,c.offset+=p,((h,g,b)=>{let v;const y=b.charAt(0);for(v=g-1;v>=0;v--){const x=h.charAt(v);if(ew(x))return C.none();if(y===x&&he(h,b,v,g))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(m=>{const p=a.cloneRange();if(p.setStart(m.container,m.offset),p.setEnd(a.endContainer,a.endOffset),p.collapsed)return C.none();const f=tw(p);return 0!==f.lastIndexOf(i)||Lm(f,i).length<l?C.none():C.some({text:Lm(f,i),range:p,trigger:i})})})(t,e,n,o),s=>{const a=t.createRng();a.selectNode(s.dom);const i=tw(a);return C.some({range:a,text:Lm(i,n),trigger:n})});var r},ow=t=>{if(3===t.nodeType)return wn(t,t.data.length);{const e=t.childNodes;return e.length>0?ow(e[e.length-1]):wn(t,e.length)}},rw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?rw(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?ow(n[n.length-1]):wn(t,e)},sw=(t,e,n,o={})=>{var r;const s=e(),a=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=gt(s.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const m=rw(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return Dm(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!ew(v)}).isSome()})(c,m)};var c})(n.range,a,n.text));if(0===i.length)return C.none();const l=Promise.all(Et(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var Un;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Un||(Un={}));const Mm=(t,e,n)=>t.stype===Un.Error?e(t.serror):n(t.svalue),Qr=t=>({stype:Un.Value,svalue:t}),Na=t=>({stype:Un.Error,serror:t}),iT=Mm,Im=t=>we(t)&&Pe(t).length>100?" removed due to size":JSON.stringify(t,null,2),yl=(t,e)=>Na([{path:t,getErrorInfo:e}]),aw=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)ht(r,s)&&(n[s]=t(n[s],r[s]))}return n},Fm=aw((t,e)=>Df(t)&&Df(e)?Fm(t,e):e),iw=(aw((t,e)=>e),t=>({tag:"defaultedThunk",process:W(t)})),lw=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Um=t=>({extract:(e,n)=>{return(o=t(n)).stype===Un.Error?yl(e,W(o.serror)):o;var o},toString:W("val")}),cT=Um(Qr),dw=(t,e,n,o)=>o(Pt(t,e).getOrThunk(()=>n(t))),uT=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>Qr(C.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===Un.Value?{stype:Un.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=s,Pt(l=n,d=o).fold(()=>{return m=d,p=l,yl(i,()=>'Could not find valid *required* value for "'+m+'" in '+Im(p));var m,p},c);case"defaultedThunk":return dw(n,o,t.process,s);case"option":return((i,l,d)=>d(Pt(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(Pt(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return dw(n,o,W({}),i=>{const l=Fm(t.process(n),i);return s(l)})}var i,l,d,c},zm=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)lw(l,(d,c,u,m)=>{const p=uT(u,o,r,d,m);iT(p,f=>{i.push(...f)},f=>{a[c]=f})},(d,c)=>{a[d]=c(r)});return i.length>0?Na(i):Qr(a)})(e,n,t),toString:()=>"obj{\n"+Et(t,n=>lw(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),cw=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return U(o,a=>{Mm(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,En(Na,jf)(n)):Qr(e.values);var n})(Et(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),uw=(t,e)=>((t,e)=>({extract:(n,o)=>Pt(o,t).fold(()=>{return s=t,yl(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,Pt(i=e,l=r).fold(()=>{return c=i,u=l,yl(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Im(c));var c,u},d=>d.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Pe(e)}))(t,Va(e,zm)),fT=W(cT),Cl=(t,e)=>Um(n=>{const o=typeof n;return t(n)?Qr(n):Na(`Expected type: ${e} but got: ${o}`)}),gT=Cl(fn,"number"),wl=Cl(at,"string"),pT=Cl(Eo,"boolean"),jm=Cl(Nt,"function"),Ra=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),mw=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),fw=(t,e)=>Ra(t,t,{tag:"required",process:{}},e),gw=t=>fw(t,wl),pw=t=>fw(t,jm),Hm=(t,e)=>Ra(t,t,{tag:"option",process:{}},e),xl=t=>Hm(t,wl),Jr=(t,e,n)=>Ra(t,t,iw(e),n),hw=(t,e)=>Jr(t,e,gT),bw=(t,e,n)=>{return Jr(t,e,(o=n,r=s=>Rt(o,s)?Re.value(s):Re.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Um(s=>r(s).fold(Na,Qr))));var o,r},$m=(t,e)=>Jr(t,e,pT),qm=(t,e)=>Jr(t,e,jm),hT=gw("type"),bT=pw("fetch"),Vm=pw("onAction"),vT=qm("onSetup",()=>vt),yT=xl("text"),CT=xl("icon"),wT=xl("tooltip"),xT=xl("label"),ET=$m("active",!1),_T=$m("enabled",!0),vw=$m("primary",!1),Aa=t=>Jr("type",t,wl),kT=zm([hT,gw("trigger"),hw("minChars",1),((t,e)=>Ra(t,t,iw(1),fT()))("columns"),hw("maxResults",10),Hm("matches",jm),bT,Vm,(yw=wl,Jr("highlightOn",[],cw(yw)))]);var yw;const Wm=[_T,wT,CT,yT,vT],Cw=[ET].concat(Wm),ST=[qm("predicate",zt),bw("scope","node",["node","editor"]),bw("position","selection",["node","selection","line"])],NT=Wm.concat([Aa("contextformbutton"),vw,Vm,mw("original",Ne)]),RT=Cw.concat([Aa("contextformbutton"),vw,Vm,mw("original",Ne)]),AT=Wm.concat([Aa("contextformbutton")]),TT=Cw.concat([Aa("contextformtogglebutton")]),OT=uw("type",{contextformbutton:NT,contextformtogglebutton:RT});zm([Aa("contextform"),qm("initValue",W("")),xT,((t,e)=>Ra(t,t,{tag:"required",process:{}},cw(e)))("commands",OT),Hm("launch",uw("type",{contextformbutton:AT,contextformtogglebutton:TT}))].concat(ST));const PT=t=>{const e=uo(),n=ae(!1),o=e.isSet,r=()=>{o()&&(Wt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=No(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Va(e,s=>{return(a=s,((t,e,n)=>{return o=(i=e.extract([t],a=n)).stype===Un.Error?{stype:Un.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Mm(o,Re.error,Re.value);var a,i,o})("Autocompleter",kT,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):d;return Et(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+Im(l.input));var l},Ne);var a}),o=$f(Wa(n,s=>s.trigger)),r=od(n);return{dataset:n,triggers:o,lookupByTrigger:s=>gt(r,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(d=>nw(t.dom,t.selection.getRng(),d.trigger).bind(c=>sw(t,s,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),m=d.selection.getRng();return(p=d.dom,f=m,h=u,br(h.triggers,g=>nw(p,f,g))).bind(p=>sw(d,c,p));var p,f,h})(t,s))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,Wt(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?r():(e.set({...c,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=we(l)?l.fetchOptions:{};a(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=Jd(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:a})},DT=kn().browser.isSafari(),ww=t=>ao(k(t)),xw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},El=(t,e)=>C.from(t.getParent(e.container(),"details")),Ew=(t,e)=>El(t,e).isSome(),_w=(t,e)=>{const n=e.getNode();fe(n)||t.selection.setCursorLocation(n,e.offset())},kw=(t,e,n)=>{const o=t.dom.getParent(e.container(),"details");if(o&&!o.open){const r=t.dom.select("summary",o)[0];r&&(n?Ce(r):dn(r)).each(s=>_w(t,s))}else _w(t,e)},Sw=(t,e,n)=>{const{dom:o,selection:r}=t,s=t.getBody();if("character"===n){const a=L.fromRangeStart(r.getRng()),i=o.getParent(a.container(),o.isBlock),l=El(o,a),d=i&&o.isEmpty(i),c=Se(i?.previousSibling),u=Se(i?.nextSibling);return!!(d&&(e?u:c)&&Ir(!e,s,a).exists(m=>Ew(o,m)&&!gg(l,El(o,m))))||Ir(e,s,a).fold(zt,m=>{const p=El(o,m);if(Ew(o,m)&&!gg(l,p)){if(e||kw(t,m,!1),i&&d){if(e&&c||!e&&u)return!0;kw(t,m,e),t.dom.remove(i)}return!0}return!1})}return!1},sr=(t,e,n)=>{return r=e,s=n,((a,i)=>{const l=C.from(a.getParent(i.startContainer,"details")),d=C.from(a.getParent(i.endContainer,"details"));if(l.isSome()||d.isSome()){const c=l.bind(u=>C.from(a.select("summary",u)[0]));return C.some({startSummary:c,startDetails:l,endDetails:d})}return C.none()})((o=t).dom,o.selection.getRng()).fold(()=>Sw(o,r,s),a=>((t,e,n,o)=>{const r=t.selection.getRng(),s=L.fromRangeStart(r),a=t.getBody();return"selection"===o?((i,l)=>{const d=l.startSummary.exists(m=>m.contains(i.startContainer)),c=l.startSummary.exists(m=>m.contains(i.endContainer)),u=l.startDetails.forall(m=>l.endDetails.forall(p=>m!==p));return(d||c)&&!(d&&c)||u})(r,e):n?(i=s,e.startSummary.exists(d=>{return c=i,dn(u=d).exists(m=>Ht(m.getNode())&&Le(u,m).exists(p=>p.isEqual(c))||m.isEqual(c));var c,u})||((i,l,d)=>d.startDetails.exists(c=>Ae(i,l).forall(u=>!c.contains(u.container()))))(a,s,e)):((i,l)=>l.startSummary.exists(d=>{return c=i,Ce(d).exists(m=>m.isEqual(c));var c}))(s,e)||((i,l)=>l.startDetails.exists(d=>Le(d,i).forall(c=>l.startSummary.exists(u=>!u.contains(i.container())&&u.contains(c.container())))))(s,e);var i})(o,a,r,s)||Sw(o,r,s))||DT&&((o,r,s)=>{const a=o.selection,i=a.getNode(),l=a.getRng(),d=L.fromRangeStart(l);return!!C_(i)&&("selection"===s&&xw(l,i)||J0(r,d,i)?ww(i):o.undoManager.transact(()=>{const c=a.getSel();let{anchorNode:u,anchorOffset:m,focusNode:p,focusOffset:f}=c??{};const h=()=>{q(u)&&q(m)&&q(p)&&q(f)&&c?.setBaseAndExtent(u,m,p,f)},g=(v,y)=>{U(v.childNodes,x=>{na(x)&&y.appendChild(x)})},b=o.dom.create("span",{"data-mce-bogus":"1"});g(i,b),i.appendChild(b),h(),"word"!==s&&"line"!==s||null==c||c.modify("extend",r?"right":"left",s),!a.isCollapsed()&&xw(a.getRng(),b)?ww(i):(o.execCommand(r?"ForwardDelete":"Delete"),u=c?.anchorNode,m=c?.anchorOffset,p=c?.focusNode,f=c?.focusOffset,g(b,i),h()),o.dom.remove(b)}),!0)})(t,e,n)?C.some(vt):C.none();var o,r,s},Nw=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:vt,inputType:n},a=_p(new InputEvent(t));return e.dispatch(t,{...a,...s,...o})},Ta=Nw("input"),_l=Nw("beforeinput"),Rw=kn(),Aw=Rw.os,Tw=Aw.isMacOS()||Aw.isiOS(),MT=Rw.browser.isFirefox(),Zr=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(Z(a)||j(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(re),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new te(e,e);let a,i=e;for(;a=s.current();){if(j(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Ht(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),aa(t,r)},Oa=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);){if("true"===t.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},Km=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Ym=t=>{t.innerHTML='<br data-mce-bogus="1">'},Ba=(t,e)=>{ye(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(c=>{const u={...vd(k(o)),...c};s.setStyles(o,u)});const a=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>gt(c.split(/\s+/),u=>""!==u));be(a,i,(c,u)=>{const m=gt(u,f=>!Rt(c,f)),p=[...c,...m];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],d=fs(r,(c,u)=>!Rt(l,u));s.setAttribs(o,d)})(t,e,Ks(t))},Ow=(t,e,n,o,r=!0,s,a)=>{const i=t.dom,l=t.schema,d=ye(t),c=n?n.nodeName.toUpperCase():"";let u=e;const m=l.getTextInlineElements();let p;p=s||"TABLE"===c||"HR"===c?i.create(s||d,a||{}):n.cloneNode(!1);let f=p;if(r){do{if(m[u.nodeName]){if(Ve(u)||We(u))continue;const h=u.cloneNode(!1);i.setAttrib(h,"id",""),p.hasChildNodes()?(h.appendChild(p.firstChild),p.appendChild(h)):(f=h,p.appendChild(h))}}while((u=u.parentNode)&&u!==o)}else i.setAttrib(p,"style",null),i.setAttrib(p,"class",null);return Ba(t,p),Ym(f),p},Bw=(t,e)=>{const n=t?.parentNode;return q(n)&&n.nodeName===e},Pw=t=>q(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Gm=t=>q(t)&&/^(LI|DT|DD)$/.test(t.nodeName),kl=t=>{const e=t.parentNode;return Gm(e)?e:t},Sl=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!Z(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},Dw=t=>Oe(Wa(vd(k(t)),(e,n)=>`${n}: ${e};`),(e,n)=>e+n,""),IT=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Xm=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Qm=(t,e)=>q(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Jm=(t,e,n)=>j(e)?t?1===n&&e.data.charAt(n-1)===se?0:n:n===e.data.length-1&&e.data.charAt(n)===se?e.data.length:n:n,Lw={insert:(t,e)=>{let n,o,r,s,a=!1;const i=t.dom,l=t.schema.getNonEmptyElements(),d=t.selection.getRng(),c=ye(t),u=k(d.startContainer),m=_r(u,d.startOffset),p=m.exists(O=>Qa(O)&&!Bo(O)),f=d.collapsed&&p,h=(O,P)=>Ow(t,n,w,x,yk(t),O,P),g=O=>{const P=Jm(O,n,o);if(j(n)&&(O?P>0:P<n.data.length))return!1;if(n.parentNode===w&&a&&!O||O&&Z(n)&&n===w.firstChild)return!0;if(Xm(n,"TABLE")||Xm(n,"HR"))return a&&!O||!a&&O;const _=new te(n,w);let R;for(j(n)&&(O&&0===P?_.prev():O||P!==n.data.length||_.next());R=_.current();){if(Z(R)){if(!R.getAttribute("data-mce-bogus")){const B=R.nodeName.toLowerCase();if(l[B]&&"br"!==B)return!1}}else if(j(R)&&!lo(R.data))return!1;O?_.prev():_.next()}return!0},b=()=>{let O;return O=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==E?h(c):h(),((P,_)=>{const R=Ck(P);return!Gt(_)&&(at(R)?Rt(H.explode(R),_.nodeName.toLowerCase()):R)})(t,s)&&Qm(i,s)&&i.isEmpty(w,void 0,{includeZwsp:!0})?O=i.split(s,w):i.insertAfter(O,w),Zr(t,O),O};Fi(i,d).each(O=>{d.setStart(O.startContainer,O.startOffset),d.setEnd(O.endContainer,O.endOffset)}),n=d.startContainer,o=d.startOffset;const v=!(!e||!e.shiftKey),y=!(!e||!e.ctrlKey);Z(n)&&n.hasChildNodes()&&!f&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&j(n)?n.data.length:0);const x=Oa(i,n);if(!x||((O,P)=>{const _=O.dom.getParent(P,"ol,ul,dl");return null!==_&&"false"===O.dom.getContentEditableParent(_)})(t,n))return;v||(n=((O,P,_,R,B)=>{var M,V;const $=O.dom,ot=null!==(M=Oa($,R))&&void 0!==M?M:$.getRoot();let et=$.getParent(R,$.isBlock);if(!et||!Qm($,et)){if(et=et||ot,!et.hasChildNodes()){const X=$.create(P);return Ba(O,X),et.appendChild(X),_.setStart(X,0),_.setEnd(X,0),X}let lt,rt=R;for(;rt&&rt.parentNode!==et;)rt=rt.parentNode;for(;rt&&!$.isBlock(rt);)lt=rt,rt=rt.previousSibling;const K=null===(V=lt?.parentElement)||void 0===V?void 0:V.nodeName;if(lt&&K&&O.schema.isValidChild(K,P.toLowerCase())){const X=lt.parentNode,mt=$.create(P);for(Ba(O,mt),X.insertBefore(mt,lt),rt=lt;rt&&!$.isBlock(rt);){const S=rt.nextSibling;mt.appendChild(rt),rt=S}_.setStart(R,B),_.setEnd(R,B)}}return R})(t,c,d,n,o));let w=i.getParent(n,i.isBlock)||i.getRoot();s=q(w?.parentNode)?i.getParent(w.parentNode,i.isBlock):null,r=w?w.nodeName.toUpperCase():"";const E=s?s.nodeName.toUpperCase():"";if("LI"!==E||y||(w=s,s=s.parentNode,r=E),Z(s)&&(O=t,_=w,!v&&_.nodeName.toLowerCase()===ye(O)&&O.dom.isEmpty(_)&&((R,B,M)=>{let V=B;for(;V&&V!==R&&Se(V.nextSibling);){const ot=V.parentElement;if(!ot||($=ot,!ht(O.schema.getTextBlockElements(),$.nodeName.toLowerCase())))return kd(ot);V=ot}var $;return!1})(O.getBody(),_)))return((O,P,_)=>{var R,B,M;const V=P(ye(O)),$=O.dom.getParent(_,kd);$&&(O.dom.insertAfter(V,$),Zr(O,V),(null!==(M=null===(B=null===(R=_.parentElement)||void 0===R?void 0:R.childNodes)||void 0===B?void 0:B.length)&&void 0!==M?M:0)>1&&O.dom.remove(_))})(t,h,w);var O,_;if(/^(LI|DT|DD)$/.test(r)&&Z(s)&&i.isEmpty(w))return void((O,P,_,R,B)=>{const M=O.dom,V=O.selection.getRng(),$=_.parentNode;if(_===O.getBody()||!$)return;var ot;Pw(ot=_)&&Pw(ot.parentNode)&&(B="LI");const et=Gm(R)?Dw(R):void 0;let lt=Gm(R)&&et?P(B,{style:Dw(R)}):P(B);if(Sl(_,R,!0)&&Sl(_,R,!1))if(Bw(_,"LI")){const rt=kl(_);M.insertAfter(lt,rt),(null===(X=(K=_).parentNode)||void 0===X?void 0:X.firstChild)===K?M.remove(rt):M.remove(_)}else M.replace(lt,_);else if(Sl(_,R,!0))Bw(_,"LI")?(M.insertAfter(lt,kl(_)),lt.appendChild(M.doc.createTextNode(" ")),lt.appendChild(_)):$.insertBefore(lt,_),M.remove(R);else if(Sl(_,R,!1))M.insertAfter(lt,kl(_)),M.remove(R);else{_=kl(_);const rt=V.cloneRange();rt.setStartAfter(R),rt.setEndAfter(_);const K=rt.extractContents();if("LI"===B&&((X,mt)=>X.firstChild&&"LI"===X.firstChild.nodeName)(K)){const X=gt(Et(lt.children,k),ls(Ja("br")));lt=K.firstChild,M.insertAfter(K,_),U(X,mt=>yd(k(lt),mt)),et&&lt.setAttribute("style",et)}else M.insertAfter(K,_),M.insertAfter(lt,_);M.remove(R)}var K,X;Zr(O,lt)})(t,h,s,w,c);if(!(f||w!==t.getBody()&&Qm(i,w)))return;const N=w.parentNode;let T;if(f)T=h(c),m.fold(()=>{Yt(u,k(T))},O=>{De(O,k(T))}),t.selection.setCursorLocation(T,0);else if(Tr(w))T=Od(w),i.isEmpty(w)&&Ym(w),Ba(t,T),Zr(t,T);else if(g(!1))T=b();else if(g(!0)&&N){T=N.insertBefore(h(),w);const O=k(d.startContainer).dom.hasChildNodes()&&d.collapsed;Zr(t,Xm(w,"HR")||O?T:w)}else{const O=(_=>{const R=_.cloneRange();return R.setStart(_.startContainer,Jm(!0,_.startContainer,_.startOffset)),R.setEnd(_.endContainer,Jm(!1,_.endContainer,_.endOffset)),R})(d).cloneRange();O.setEndAfter(w);const P=O.extractContents();(_=>{U(qg(k(_),He),R=>{const B=R.dom;B.nodeValue=ze(B.data)})})(P),(_=>{let R=_;do{j(R)&&(R.data=R.data.replace(/^[\r\n]+/,"")),R=R.firstChild}while(R)})(P),T=P.firstChild,i.insertAfter(P,w),((_,R,B)=>{var M;const V=[];if(!B)return;let $=B;for(;$=$.firstChild;){if(_.isBlock($))return;Z($)&&!R[$.nodeName.toLowerCase()]&&V.push($)}let ot=V.length;for(;ot--;)$=V[ot],(!$.hasChildNodes()||$.firstChild===$.lastChild&&""===(null===(M=$.firstChild)||void 0===M?void 0:M.nodeValue)||IT(_,$))&&_.remove($)})(i,l,T),((_,R)=>{R.normalize();const B=R.lastChild;(!B||Z(B)&&/^(left|right)$/gi.test(_.getStyle(B,"float",!0)))&&_.add(R,"br")})(i,w),i.isEmpty(w)&&Ym(w),T.normalize(),i.isEmpty(T)?(i.remove(T),b()):(Ba(t,T),Zr(t,T))}i.setAttrib(T,"id",""),t.dispatch("NewBlock",{newBlock:T})},fakeEventName:"insertParagraph"},Mw=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),aa(t,o)},FT=(t,e)=>{const n=oe("br");De(k(e),n),t.undoManager.add()},UT=(t,e)=>{zT(t.getBody(),e)||Kn(k(e),oe("br"));const n=oe("br");Kn(k(e),n),Mw(t,n.dom,!1),t.undoManager.add()},zT=(t,e)=>{return n=L.after(e),!!Ht(n.getNode())||Ae(t,L.after(e)).map(o=>Ht(o.getNode())).getOr(!1);var n},Iw=t=>t&&"A"===t.nodeName&&"href"in t,jT=t=>t.fold(zt,Iw,Iw,zt),HT=(t,e)=>{e.fold(vt,J(FT,t),J(UT,t),vt)},Fw={insert:(t,e)=>{const n=(o=>{const r=J(er,o),s=L.fromRangeStart(o.selection.getRng());return In(r,o.getBody(),s).filter(jT)})(t);n.isSome()?n.each(J(HT,t)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,d=!1;Fi(a,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(Z(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&j(u)?u.data.length:0}let m=a.getParent(u,a.isBlock);const p=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(m=p),j(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new te(b,v);let x;const w=g.getNonEmptyElements();for(;x=y.next();)if(w[x.nodeName.toLowerCase()]||j(x)&&x.length>0)return!0;return!1})(o.schema,u,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),oc(a,i,l),Mw(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},Uw=(t,e)=>Km(t).filter(n=>e.length>0&&gn(k(n),e)).isSome(),je=Tn([{br:[]},{block:[]},{none:[]}]),$T=(t,e)=>{return Uw(n=t,vk(n));var n},zw=t=>(e,n)=>Km(e).filter(r=>Ts(k(r))).isSome()===t,jw=(t,e)=>(n,o)=>Km(n).fold(W(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,qT=t=>{const e=Oa(t.dom,t.selection.getStart());return Gt(e)},Pa=t=>jw("pre",t),Nl=t=>(e,n)=>pk(e)===t,VT=(t,e)=>{return Uw(n=t,bk(n));var n},Rl=(t,e)=>e,WT=t=>{const e=ye(t),n=Oa(t.dom,t.selection.getStart());return q(n)&&t.schema.isValidChild(n.nodeName,e)},KT=t=>{const e=t.selection.getRng(),n=k(e.startContainer),o=_r(n,e.startOffset).map(r=>Qa(r)&&!Bo(r));return e.collapsed&&o.getOr(!0)},Ze=(t,e)=>(n,o)=>Oe(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),Al=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),q(n)&&_l(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),q(n)&&Ta(e,t.fakeEventName))},Hw=(t,e)=>{const n=()=>Al(Fw,t,e),o=()=>Al(Lw,t,e),r=(s=t,a=e,MC([Ze([$T],je.none()),Ze([Pa(!0),qT],je.none()),Ze([jw("summary",!0)],je.br()),Ze([Pa(!0),Nl(!1),Rl],je.br()),Ze([Pa(!0),Nl(!1)],je.block()),Ze([Pa(!0),Nl(!0),Rl],je.block()),Ze([Pa(!0),Nl(!0)],je.br()),Ze([zw(!0),Rl],je.br()),Ze([zw(!0)],je.block()),Ze([VT],je.br()),Ze([Rl],je.br()),Ze([WT],je.block()),Ze([KT],je.block())],[s,!(!a||!a.shiftKey)]).getOr(je.none()));var s,a;switch(hk(t)){case"linebreak":r.fold(n,n,vt);break;case"block":r.fold(o,o,vt);break;case"invert":r.fold(o,n,vt);break;default:r.fold(n,o,vt)}},$w=kn(),YT=$w.os.isiOS()&&$w.browser.isSafari(),qw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{Hw(t,e)}))},GT=kn(),Vw=t=>t.stopImmediatePropagation(),Ww=t=>t.keyCode===Y.PAGE_UP||t.keyCode===Y.PAGE_DOWN,Kw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Vw,!0):!n&&t.get()&&e.off("NodeChange",Vw),t.set(n)},Yw=(t,e)=>{const n=e.container(),o=e.offset();return j(n)?(n.insertData(o,t),C.some(L(n,o+t.length))):Si(e).map(r=>{const s=Er(t);return e.isAtEnd()?Kn(r,s):De(r,s),L(s.dom,t.length)})},Gw=J(Yw,re),Xw=J(Yw," "),Qw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},XT=t=>{const e=L.fromRangeStart(t.selection.getRng()),n=k(t.getBody());if(t.selection.isCollapsed()){const o=J(er,t),r=L.fromRangeStart(t.selection.getRng());return In(o,t.getBody(),r).bind((s=n,a=>a.fold(i=>Le(s.dom,L.before(i)),i=>Ce(i),i=>dn(i),i=>Ae(s.dom,L.after(i))))).map(s=>()=>{return(a=n,i=e,l=t.schema,d=>U0(a,d,l)?Gw(i):Xw(i))(s).each(Qw(t));var a,i,l})}var s;return C.none()},QT=t=>{return wr(_t.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=k(t.getBody());var r,s,a;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,s=L.fromRangeStart(t.selection.getRng()),a=t.schema,U0(r,s,a)?Gw(s):Xw(s)).each(Qw(t))});var e,n},JT=t=>SS(t)?[{keyCode:Y.TAB,action:ct(J1,t,!0)},{keyCode:Y.TAB,shiftKey:!0,action:ct(J1,t,!1)}]:[],ZT=t=>{if(t.addShortcut("Meta+P","","mcePrint"),PT(t),Mn(t))return ae(null);{const e=(t=>{const e=ae(null),n=J(er,t);return t.on("NodeChange",o=>{Ys(t)&&(((r,s,a)=>{const i=Et(ve(k(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=gt(i,r),d=gt(a,r);U($a(l,d),J(r1,!1)),U($a(d,l),J(r1,!0))})(n,t.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=L.fromRangeStart(r.selection.getRng());L.isTextPosition(i)&&!Ad(l=i)&&!Td(l)&&(gl(r,((t,e)=>{return L.isTextPosition(e)?(o=e,Ah(n=t)&&o.container()===n?((r,s)=>{const a=Oh(r.data.substr(0,s.offset())),i=Oh(r.data.substr(s.offset()));return(a.text+i.text).length>0?(Bh(r),L(r,s.offset()-a.count)):s})(n,o):Ph(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=Ff(l,d);return-1===c?C.none():C.some(c)})(Ie(a.childNodes),r).map(l=>l<s.offset()?L(a,s.offset()-1):s).getOr(s);return Ko(r),i})(n,o):Ph(n,o))(t,e);var n,o})(a,i)),s.set(null))}var l})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=gt(i,r);U(l,d=>{const c=L.fromRangeStart(s.selection.getRng());In(r,s.getBody(),c).bind(u=>s1(s,a,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("beforeinput",o=>{n.selection.isEditable()&&!$t(o.getTargetRanges(),r=>!o0(n.dom,r))||o.preventDefault()}),(n=>{n.on("keyup compositionstart",J(JA,n))})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=_t.os.isMacOS()||_t.os.isiOS();ka([{keyCode:Y.RIGHT,action:ct(T1,s,!0)},{keyCode:Y.LEFT,action:ct(T1,s,!1)},{keyCode:Y.UP,action:ct(O1,s,!1)},{keyCode:Y.DOWN,action:ct(O1,s,!0)},...l?[{keyCode:Y.UP,action:ct(hl,s,!1),metaKey:!0,shiftKey:!0},{keyCode:Y.DOWN,action:ct(hl,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Y.RIGHT,action:ct(G1,s,!0)},{keyCode:Y.LEFT,action:ct(G1,s,!1)},{keyCode:Y.UP,action:ct(Om,s,!1)},{keyCode:Y.DOWN,action:ct(Om,s,!0)},{keyCode:Y.UP,action:ct(Om,s,!1)},{keyCode:Y.UP,action:ct(D1,s,!1)},{keyCode:Y.DOWN,action:ct(D1,s,!0)},{keyCode:Y.RIGHT,action:ct(F1,s,!0)},{keyCode:Y.LEFT,action:ct(F1,s,!1)},{keyCode:Y.UP,action:ct(U1,s,!1)},{keyCode:Y.DOWN,action:ct(U1,s,!0)},{keyCode:Y.RIGHT,action:ct(a1,s,a,!0)},{keyCode:Y.LEFT,action:ct(a1,s,a,!1)},{keyCode:Y.RIGHT,ctrlKey:!l,altKey:l,action:ct(zA,s,a)},{keyCode:Y.LEFT,ctrlKey:!l,altKey:l,action:ct(jA,s,a)},{keyCode:Y.UP,action:ct(P1,s,!1)},{keyCode:Y.DOWN,action:ct(P1,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===Y.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const d=l.keyCode===Y.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=a.selection.isCollapsed(),u=c?"character":"selection",m=p=>c?p?"word":"line":"selection";I1([{keyCode:Y.BACKSPACE,action:ct(w1,a)},{keyCode:Y.BACKSPACE,action:ct(pm,a,!1)},{keyCode:Y.DELETE,action:ct(pm,a,!0)},{keyCode:Y.BACKSPACE,action:ct(mm,a,!1)},{keyCode:Y.DELETE,action:ct(mm,a,!0)},{keyCode:Y.BACKSPACE,action:ct(_m,a,i,!1)},{keyCode:Y.DELETE,action:ct(_m,a,i,!0)},{keyCode:Y.BACKSPACE,action:ct(yu,a,!1)},{keyCode:Y.DELETE,action:ct(yu,a,!0)},{keyCode:Y.BACKSPACE,action:ct(sr,a,!1,u)},{keyCode:Y.DELETE,action:ct(sr,a,!0,u)},...Tw?[{keyCode:Y.BACKSPACE,altKey:!0,action:ct(sr,a,!1,m(!0))},{keyCode:Y.DELETE,altKey:!0,action:ct(sr,a,!0,m(!0))},{keyCode:Y.BACKSPACE,metaKey:!0,action:ct(sr,a,!1,m(!1))}]:[{keyCode:Y.BACKSPACE,ctrlKey:!0,action:ct(sr,a,!1,m(!0))},{keyCode:Y.DELETE,ctrlKey:!0,action:ct(sr,a,!0,m(!0))}],{keyCode:Y.BACKSPACE,action:ct(hm,a,!1)},{keyCode:Y.DELETE,action:ct(hm,a,!0)},{keyCode:Y.BACKSPACE,action:ct(Nm,a,!1)},{keyCode:Y.DELETE,action:ct(Nm,a,!0)},{keyCode:Y.BACKSPACE,action:ct(cm,a,!1)},{keyCode:Y.DELETE,action:ct(cm,a,!0)},{keyCode:Y.BACKSPACE,action:ct(dm,a,!1)},{keyCode:Y.DELETE,action:ct(dm,a,!0)},{keyCode:Y.BACKSPACE,action:ct(km,a,!1)},{keyCode:Y.DELETE,action:ct(km,a,!0)}],l).filter(p=>a.selection.isEditable()).each(p=>{l.preventDefault(),_l(a,d).isDefaultPrevented()||(p(),Ta(a,d))})})(n,o,s)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(i=s,l=r,ka([{keyCode:Y.BACKSPACE,action:ct(TC,a=n)},{keyCode:Y.DELETE,action:ct(TC,a)},...Tw?[{keyCode:Y.BACKSPACE,altKey:!0,action:ct(_a,a)},{keyCode:Y.DELETE,altKey:!0,action:ct(_a,a)},...l?[{keyCode:MT?224:91,action:ct(_a,a)}]:[]]:[{keyCode:Y.BACKSPACE,ctrlKey:!0,action:ct(_a,a)},{keyCode:Y.DELETE,ctrlKey:!0,action:ct(_a,a)}]],i)),r=!1})})(t,e),(n=>{let o=C.none();n.on("keydown",r=>{var s;r.keyCode===Y.ENTER&&(YT&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if(j(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(o=C.some((s=n).selection.getBookmark()),s.undoManager.add()):qw(n,r))}),n.on("keyup",r=>{r.keyCode===Y.ENTER&&o.each(()=>{return a=r,(s=n).undoManager.undo(),o.fold(vt,i=>s.selection.moveToBookmark(i)),qw(s,a),void(o=C.none());var s,a})})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,I1([{keyCode:Y.SPACEBAR,action:ct(XT,r=n)},{keyCode:Y.SPACEBAR,action:ct(QT,r)}],s).each(a=>{s.preventDefault(),_l(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),Ta(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=k(r.getBody());r.selection.isCollapsed()&&((t,e,n)=>{const o=e.container();if(!j(o))return C.none();if((r=>{const s=r.container();return j(s)&&he(s.data,re)})(e)){const r=H0(t,o,!1,n)||(s=>{const a=s.data,i=(l=>{const d=l.split("");return Et(d,(c,u)=>Ti(c)&&u>0&&u<d.length-1&&xc(d[u-1])&&xc(d[u+1])?" ":c).join("")})(a);return i!==a&&(s.data=i,!0)})(o)||$0(t,o,!1,n);return wr(r,e)}if(iu(t,e,n)){const r=H0(t,o,!0,n)||$0(t,o,!0,n);return wr(r,e)}return C.none()})(s,L.fromRangeStart(r.selection.getRng()),r.schema).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,ka([...JT(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=_t.os.isMacOS()||_t.os.isiOS();ka([{keyCode:Y.END,action:ct(B1,s,!0)},{keyCode:Y.HOME,action:ct(B1,s,!1)},...l?[]:[{keyCode:Y.HOME,action:ct(hl,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Y.END,action:ct(hl,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Y.END,action:ct(z1,s,!0)},{keyCode:Y.HOME,action:ct(z1,s,!1)},{keyCode:Y.END,action:ct(pl,s,!0,a)},{keyCode:Y.HOME,action:ct(pl,s,!1,a)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(GT.os.isMacOS())return;const r=ae(!1);n.on("keydown",s=>{Ww(s)&&Kw(r,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,ka([{keyCode:Y.PAGE_UP,action:ct(pl,a=n,!1,i=o)},{keyCode:Y.PAGE_DOWN,action:ct(pl,a,!0,i)}],l)),Ww(s)&&r.get()&&(Kw(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class tO{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&zc(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&Oi(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Oi(e)&&("IMG"===e.selection.getNode().nodeName?Ye.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!Gk(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,a=>a===r||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=ms(o.dom.getParents(e,Kt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const Jw=Hs("image"),Zm=Hs("event"),Tl=t=>e=>{e[Zm]=t},Zw=Tl(0),eO=Tl(2),nO=Tl(1),tf=Hs("mode"),Ol=t=>e=>{e[tf]=t},tx=(t,e)=>Ol(e)(t),ex=Ol(0),ef=Ol(2),rO=Ol(1),nx=t=>e=>C.from(e[tf]).exists(o=>o===t),ts=nx(0),ox=nx(1),sO=["none","copy","link","move"],aO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],nf=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){Rt(sO,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>C.from(t[Zm]).exists(n=>0===n))(o)&&Rt(aO,r)&&(n=r)},get items(){return r=o,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(ts(r)){if(!at(a))return s.add(a);if(!fe(i))return s.add(a,i)}return null},remove:a=>{ts(r)&&s.remove(a)},clear:()=>{ts(r)&&s.clear()}};var r,s},get files(){return ox(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,s,a)=>{ts(o)&&(o[Jw]={image:r,x:s,y:a},t.setDragImage(r,s,a))},getData:r=>ox(o)?"":t.getData(r),setData:(r,s)=>{ts(o)&&t.setData(r,s)},clearData:r=>{ts(o)&&t.clearData(r)}};return ex(o),o},rx=(t,e)=>t.setData("text/html",e),sx="x-tinymce/html",Bl=W(sx),of="\x3c!-- "+sx+" --\x3e",iO=t=>of+t,ax=t=>-1!==t.indexOf(of),ix="%MCEPASTEBIN%",rf=t=>t.dom.get("mcepastebin"),lO=t=>q(t)&&"mcepastebin"===t.id,lx=t=>t===ix,dx=(t,e)=>(H.each(e,n=>{t=Ha(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),cx=t=>dx(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?re:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),ux=(t,e)=>({content:t,cancelled:e}),sf=(t,e)=>(t.insertContent(e,{merge:gS(t),paste:!0}),!0),af=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),dO=(t,e,n)=>{return!(t.selection.isCollapsed()||!af(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},cO=(t,e,n)=>{return o=t,!(!af(r=e)||!$t(Rh(o),s=>id(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},uO=(t=>{let e=0;return()=>"mceclip"+e++})(),mO=t=>{const e=nf();return rx(e,t),ef(e),e},mx=(t,e,n,o,r)=>{const s=((d,c,u)=>{const m=d.dispatch("PastePreProcess",{content:c,internal:u}),p=((f,h)=>{const g=Wr({sanitize:mc(f),sandbox_iframes:fc(f)},f.schema);g.addNodeFilter("meta",v=>{H.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return ho({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return ux(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):ux(p,m.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,d=a,void(o||!pS(l)?sf(l,d):(u=l,m=d,H.each([dO,cO,sf],p=>!p(u,m,sf))));var l,d,u,m};r?_l(t,"insertFromPaste",{dataTransfer:mO(a)}).isDefaultPrevented()||(i(),Ta(t,"insertFromPaste")):i()}},Pl=(t,e,n,o)=>{const r=n||ax(e);mx(t,e.replace(of,""),r,!1,o)},lf=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((s,a,i)=>{const l=s.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=Wa(p,(g,b)=>b+'="'+zo.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(a,i),c="</"+a+">",u=Et(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:Et(u,m=>d+m+c).join("")})(op(o,bS(t)),ye(t),Ks(t));mx(t,r,!1,!0,n)},fx=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},wo=(t,e)=>e in t&&t[e].length>0,gx=t=>wo(t,"text/html")||wo(t,"text/plain"),px=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(_i(t)&&o){const s=((a,i)=>{const l=i.items?rn(Ie(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?Ie(i.files):[];return gt(l.length>0?l:d,(c=>{const u=Rh(c);return m=>le(m.type,"image/")&&$t(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return H.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(Et(r,a=>ly(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),U(a,i=>{var l,d;l=t,ju((d=i).uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,b=h.getByData(p,u)??((v,y,x,w)=>{const E=uO(),N=bh(v)&&q(x.name),T=N?((_,R)=>{const B=R.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return q(B)?_.dom.encode(B[1]):void 0})(v,x.name):E,P=y.create(E,x,w,T,N?x.name:void 0);return y.add(P),P})(l,h,f,p);Pl(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},df=(t,e,n,o,r)=>{let s=cx(n);const a=wo(e,Bl())||ax(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=af(s);(lx(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=wo(e,"text/plain")&&i?e["text/plain"]:(d=>{const c=co(),u=Wr({},c);let m="";const p=c.getVoidElements(),f=H.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in c.getVoidElements())){let x=b.firstChild;if(x)do{g(x)}while(x=x.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return d=dx(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(s)),lx(s)||(o?lf(t,s,r):Pl(t,s,a,r))},hx=(t,e,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Bl(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},bx=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Ye.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},vx=t=>({html:iO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),yx=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},Cx=(t,e)=>{var n,o;return Jo.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},wx=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},gO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,xx=t=>H.trim(t).replace(gO,Ds).toLowerCase(),pO=(t,e,n)=>{const o=mS(t);if(n||"all"===o||!fS(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),m={};for(let f=0;f<r.length;f++){const h=u[r[f]];let g=h,b=s.getStyle(a,r[f],!0);/color/.test(r[f])&&(g=xx(g),b=xx(b)),b!==g&&(m[r[f]]=h)}const p=s.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},bO=Ht,Ex=j,vO=t=>Lt(t.dom),_x=t=>e=>kt(k(t),e),kx=(t,e)=>To(k(t),vO,_x(e)),Sx=(t,e,n)=>{const o=new te(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let a=n?t:r();a&&!bO(a);a=r())ln(a)&&(s=a);return s};var es;!function(t){t.Before="before",t.After="after"}(es||(es={}));const CO=(t,e)=>Math.abs(t.left-e),wO=(t,e)=>Math.abs(t.right-e),EO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),cf=(t,e,n,o)=>{const r=c=>ln(c.node)?C.some(c):Z(c.node)?cf(Ie(c.node.childNodes),e,n,!1):C.none(),s=(c,u)=>{const m=_o(c,(p,f)=>u(p,e,n)-u(f,e,n));return br(m,r).map(p=>{return o&&!j(p.node)&&m.length>1?(f=p,h=m[1],g=u,r(h).filter(b=>Math.abs(g(f,e,n)-g(b,e,n))<2&&j(b.node))).getOr(p):p;var f,h,g})},[a,i]=((t,e)=>{return(n=gt(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Oe(n,(o,r)=>o.fold(()=>C.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return C.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=hr(t,s=>((a,i)=>{const l=(d=a,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(a.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(QC(t),n),{pass:l,fail:d}=hr(i,c=>c.top<n);return s(a,EO).orThunk(()=>s(d,zp)).orThunk(()=>s(l,zp))},Nx=(t,e,n)=>((o,r,s)=>{const a=k(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(Cs))(Vn(a),r,s).filter(d=>qn(a,d)).getOr(a);return((d,c,u,m)=>{const p=(f,h)=>{const g=gt(f.dom.childNodes,ls(b=>Z(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>cf(g,u,m,!0),b=>{const v=gt(g,y=>y!==b.dom);return cf(v,u,m,!0)}).orThunk(()=>(kt(f,d)?C.none():Za(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(a,l,r,s)})(t,e,n).filter(o=>Xs(o.node)).map(o=>{return{node:(r=o).node,position:CO(r,s=e)<wO(r,s)?es.Before:es.After};var r,s}),Rx=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Ax=t=>({target:t,srcElement:t}),Tx=Lt,kO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Tx,an),SO=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Dl=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},Ox=Dl("left",-32),Bx=Dl("left",32),Px=Dl("top",-32),Dx=Dl("top",32),Lx=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Da=(t,e,n,o,r)=>{"dragstart"===e&&rx(o,t.dom.getOuterHTML(n));const s=((t,e,n,o)=>{const r=((s,a)=>{const i=(l=>{const d=nf(),c=C.from(l[tf]);return ef(l),Zw(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=l,C.from(u[Jw])).each(u=>d.setDragImage(u.image,u.x,u.y)),U(l.types,u=>{"Files"!==u&&d.setData(u,l.getData(u))}),U(l.files,u=>d.items.add(u)),(u=>C.from(u[Zm]))(l).each(u=>{var m;m=d,Tl(u)(m)}),c.each(u=>{tx(l,u),tx(d,u)}),d;var u})(s);return"dragstart"===a?(Zw(i),ex(i)):"drop"===a?(eO(i),ef(i)):(nO(i),rO(i)),i})(n,t);return fe(o)?((s,a,i)=>{const l=If("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:vt,stopImmediatePropagation:vt,stopPropagation:vt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Ax(a)}})(t,e,r):(s=t,a=o,i=e,l=r,{...a,dataTransfer:l,type:s,...Ax(i)});var s,a,i,l})(e,n,o,r);return t.dispatch(e,s)},Mx=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>Da(e,"dragend",o.element,o.dataTransfer),r=>Da(e,"dragend",o.element,o.dataTransfer,r))}),Ix(t)},Ix=t=>{t.on(e=>{e.intervalId.clear(),Lx(e.ghost)}),t.clear()},La=Lt,Fx=(t,e)=>nr(t.getBody(),e),AO=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=uo();let s,a;const i=ye(t),l=t.dom,d=()=>{(c=>{var u,m;const p=ve(k(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(ui(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,ci(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(e),a&&(Ko(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let m;if(d(),DS(u))return null;if(!n(u))return a=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(se),b=p.parentNode;if(f){const v=p.previousSibling;if(Ar(v)){if($e(v))return v;if(ui(v))return v.splitText(v.data.length-1)}b?.insertBefore(g,p)}else{const v=p.nextSibling;if(Ar(v)){if($e(v))return v;if(ci(v))return v.splitText(1),v}p.nextSibling?b?.insertBefore(g,p.nextSibling):b?.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),Gs(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const p=((g,b,v)=>{var y;const x=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);x.setAttribute("data-mce-caret",v?"before":"after"),x.setAttribute("data-mce-bogus","all"),x.appendChild(Bs().dom);const w=b.parentNode;return v?w?.insertBefore(x,b):b.nextSibling?w?.insertBefore(x,b.nextSibling):w?.appendChild(x),x})(i,u,c),f=Dh(e,u,c);l.setStyle(p,"top",f.top),a=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),s=setInterval(()=>{r.on(g=>{o()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=Dh(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>Zo(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=g=>g!==o&&(La(g)||An(g))&&n.isChildOf(g,o)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===g),r.show(v,b)),c=g=>$e(g)||ci(g)||ui(g),u=g=>c(g.startContainer)||c(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const w=b?1:-1,E=ta(w,o,g),N=E.getNode(!b);if(q(N)){if(Xs(N))return d(w,N,!!b&&!E.isAtEnd(),!1);if(io(N)&&Lt(N.nextSibling)){const O=n.createRng();return O.setStart(N,0),O.setEnd(N,0),O}}const T=E.getNode(b);if(q(T)){if(Xs(T))return d(w,T,!b&&!E.isAtEnd(),!1);if(io(T)&&Lt(T.previousSibling)){const O=n.createRng();return O.setStart(T,1),O.setEnd(T,1),O}}}return null}let v=g.startContainer,y=g.startOffset;const x=g.endOffset;if(j(v)&&0===y&&La(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!Z(v))return null;if(x===y+1&&v===g.endContainer){const w=v.childNodes[y];if(l(w))return(E=>{const N=E.cloneNode(!0),T=t.dispatch("ObjectSelected",{target:E,targetClone:N});if(T.isDefaultPrevented())return null;const O=((_,R)=>{const B=k(t.getBody()),M=t.getDoc(),V=ks(B,"#"+s).getOrThunk(()=>{const et=ws('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',M);return de(et,"id",s),Yt(B,et),et}),$=n.createRng();Sr(V),Po(V,[Er(re,M),k(R),Er(re,M)]),$.setStart(V.dom.firstChild,1),$.setEnd(V.dom.lastChild,0),ti(V,{top:n.getPos(_,t.getBody()).y+"px"}),Gb(V);const ot=e.getSel();return ot&&(ot.removeAllRanges(),ot.addRange($)),$})(E,T.targetClone),P=k(E);return U(ve(k(t.getBody()),`*[${a}]`),_=>{kt(P,_)||ce(_,a)}),n.getAttrib(E,a)||E.setAttribute(a,"1"),i=E,h(),O})(w)}return null},f=()=>{i&&i.removeAttribute(a),ks(k(t.getBody()),"#"+s).each(Dt),i=null},h=()=>{r.hide()};return Mn(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",g=>{const b=g.target,v=Fx(t,b);La(v)?(g.preventDefault(),Ca(t,v).each(p)):l(b)&&Ca(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==o&&"HTML"!==b.nodeName&&!n.isChildOf(b,o)||!((y,x,w)=>{const E=k(y.getBody()),N=y.inline?E:k(Vn(E).dom.documentElement),T=((O,P,_,R)=>{const B=P.dom.getBoundingClientRect();return{x:_-(O?B.left+P.dom.clientLeft+oA(P):0),y:R-(O?B.top+P.dom.clientTop+nA(P):0)}})(y.inline,N,x,w);return((O,P,_)=>{const R=tA(O),B=eA(O);return P>=0&&_>=0&&P<=R&&_<=B})(N,T.x,T.y)})(t,g.clientX,g.clientY))return;f(),h();const v=Fx(t,b);La(v)?(g.preventDefault(),Ca(t,v).each(p)):Nx(o,g.clientX,g.clientY).each(y=>{var x;g.preventDefault(),(x=d(1,y.node,y.position===es.Before,!1))&&e.setRng(x),Gn(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{Y.modifierPressed(g)||La(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,x=g.startOffset,w=g.endContainer,E=g.endOffset;return ht(b,y.nodeName.toLowerCase())?0===x?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,x),ht(b,w.nodeName.toLowerCase())?0===E?v.setEndBefore(w):v.setEndAfter(w):v.setEnd(w,E),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,x;u(b)||Z(y=v)&&"mcepastebin"===y.id||h(),q(x=v)&&n.hasClass(x,"mce-offscreen-selection")||f()}),(t=>{const e=uo(),n=Ot.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const u=Zt(d.dom.getParents(c.target),kO).getOr(null);if(q(u)&&(m=d.dom,p=d.getBody(),Tx(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:nf(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:SO(d,u,u.offsetWidth,u.offsetHeight),intervalId:ek(100)})}}var m,p,f}),s=((t,e)=>{const n=vi((r,s)=>{return i=r,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void Nx(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),d=>{const c=a._selectionOverrides.showCaret(1,d.node,d.position===es.Before,!1);c?a.selection.setRng(c):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const d=Da(e,"dragstart",s.element,s.dataTransfer,r);if(q(d.dataTransfer)&&(s.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const d=r.currentTarget===e.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(s,(m=r,p=(g=u=e).inline?Rx(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=Rx(g.getContentAreaContainer()),y=(x=>{const w=x.getBody(),E=x.getDoc().documentElement;return x.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||E.scrollLeft,top:w.scrollTop||E.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,x,w,E)=>{let N=0,T=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(N=m.pageX+p-h),m.pageY+f>g&&(T=m.pageY+f-g),u.style.width=p-N+"px",u.style.height=f-T+"px";const O=y.clientHeight,P=y.clientWidth,_=b+y.getBoundingClientRect().top,R=v+y.getBoundingClientRect().left;w.on(B=>{B.intervalId.clear(),B.dragging&&E&&(b+8>=O?B.intervalId.set(Dx(x)):b-8<=0?B.intervalId.set(Px(x)):v+8>=P?B.intervalId.set(Bx(x)):v-8<=0?B.intervalId.set(Ox(x)):_+16>=window.innerHeight?B.intervalId.set(Dx(window)):_-16<=0?B.intervalId.set(Px(window)):R+16>=window.innerWidth?B.intervalId.set(Bx(window)):R-16<=0&&B.intervalId.set(Ox(window)))})})(s.ghost,c,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,d),n.throttle(r.clientX,r.clientY)}var u,m,g,p,f,h,i,l})})(e,t),a=((l,d)=>c=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(q(f)){const h=f.getRangeAt(0).startContainer;return j(h)?h.parentNode:h}return null})(d.selection),h=u.element,!Gt(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==m?m:d.getBody();Da(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);Lx(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&ao(k(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}Da(d,"dragend",d.getBody(),u.dataTransfer,c)}}),Ix(l)})(e,t),i=((l,d)=>c=>Mx(l,d,C.some(c)))(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===Y.ESC&&Mx(e,t,C.none())})})(g=t),Jk(g)&&(b=>{const v=w=>{if(!w.isDefaultPrevented()){const E=w.dataTransfer;E&&(Rt(E.types,"Files")||E.files.length>0)&&(w.preventDefault(),"drop"===w.type&&il(b,"Dropped file type is not supported"))}},y=w=>{ji(b,w.target)&&v(w)},x=()=>{const w=Ot.DOM,E=b.dom,N=document,T=b.inline?b.getBody():b.getDoc(),O=["drop","dragover"];U(O,P=>{w.bind(N,P,y),E.bind(T,P,v)}),b.on("remove",()=>{U(O,P=>{w.unbind(N,P,y),E.unbind(T,P,v)})})};b.on("init",()=>{Ye.setEditorTimeout(b,x,0)})})(g),(g=>{const b=vi(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=um(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(An(v)){const y=nr(g.getBody(),v),x=Lt(y)?y:v;g.selection.getNode()!==x&&Ca(g,x).each(w=>g.selection.setRng(w))}})})})(t)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Od(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var g},TO=(t,e)=>{let n=e;for(let o=t.previousSibling;j(o);o=o.previousSibling)n+=o.data.length;return n},Ux=(t,e,n,o,r)=>{if(j(n)&&(o<0||o>n.data.length))return[];const s=r&&j(n)?[TO(n,o)]:[o];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?s.reverse():[]},uf=(t,e,n,o,r,s,a=!1)=>({start:Ux(t,e,n,o,a),end:Ux(t,e,r,s,a)}),zx=(t,e)=>{const n=e.slice(),o=n.pop();return fn(o)?Oe(n,(r,s)=>r.bind(a=>C.from(a.childNodes[s])),C.some(t)).bind(r=>j(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},jx=(t,e)=>zx(t,e.start).bind(({node:n,offset:o})=>zx(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),ns=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e,j(e.firstChild)&&lo(e.firstChild.data)),ns(t,o,n)}},Ll=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(j(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),j(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),ns(t,r,n),r!==s&&ns(t,s,n))},mf=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Hx=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:dh(o).concat(t.blockPatterns),inlinePatterns:ch(o).concat(t.inlinePatterns)}},$x=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},qx=(t,e,n)=>{((o,r,s)=>{if(j(o)&&0>=o.length)return C.some(wn(o,0));{const a=qo(bl);return C.from(a.forwards(o,0,vl(o),s)).map(i=>wn(i.container,0))}})(e,0,e).each(o=>{const r=o.container;Z1(r,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(r,0),l.setEnd(i.container,i.offset),Ll(t,l,d=>d===e)});const s=k(r),a=ii(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),Nd.set(i,l))})},Vx=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Ml=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Wx=(t,e,n)=>{const o=jx(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(Vx(t,e+"-end"),a),start:l.insertBefore(Vx(t,e+"-start"),i)}},Kx=(t,e,n)=>{ns(t,t.get(e.prefix+"-end"),n),ns(t,t.get(e.prefix+"-start"),n)},ff=t=>0===t.start.length,Yx=(t,e,n,o)=>{const r=e.start;var s;return Dm(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return-1!==c?c+s.length:-1!==d?d+1:-1}),n).bind(a=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==d&&a.offset>=d+r.length){const c=t.createRng();return c.setStart(a.container,a.offset-r.length),c.setEnd(a.container,a.offset),C.some(c)}return Pm(a.container,a.offset-r.length,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(a.container,a.offset),m}).filter(u=>u.toString()===r).orThunk(()=>Yx(t,e,n,wn(a.container,0)))})},OO=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Pm(i,l-n.pattern.end.length,e).bind(d=>{const c=uf(r,s,d.container,d.offset,i,l,o);if(ff(a))return C.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{const u=Il(t,n.remainingPatterns,d.container,d.offset,e,o),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,x=!1)=>{if(0===g.start.length&&!x){const w=h.createRng();return w.setStart(b,v),w.setEnd(b,v),C.some(w)}return Bm(b,v,y).bind(w=>Yx(h,g,y,w).bind(E=>{var N;return x&&(E.endContainer===w.container&&E.endOffset===w.offset||0===w.offset&&(null===(N=E.endContainer.textContent)||void 0===N?void 0:N.length)===E.endOffset)?C.none():C.some(E)}))})(r,a,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,x=!1)=>uf(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,x))(r,s,h,o);return{matches:m.matches.concat([{pattern:a,startRng:g,endRng:c}]),position:wn(h.startContainer,h.startOffset)}})}})},Il=(t,e,n,o,r,s)=>{const a=t.dom;return Bm(n,o,a.getRoot()).bind(i=>{const l=$x(a,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!id(l,c.end))continue;const u=e.slice();u.splice(d,1);const m=OO(t,r,{pattern:c,remainingPatterns:u,position:i},s);if(m.isNone()&&o>0)return Il(t,e,n,o-1,r,s);if(m.isSome())return m}return C.none()})},Gx=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?U(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},Xx=(t,e,n,o,r,s)=>{var a;return((i,l)=>{const d=zn(i,c=>$t(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(Il(t,r.inlinePatterns,n,o,e,s).fold(()=>[],i=>i.matches),Il(t,(a=r.inlinePatterns,_o(a,(i,l)=>l.end.length-i.end.length)),n,o,e,s).fold(()=>[],i=>i.matches))},Qx=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=Hs("mce_textpattern"),l=cs(a,(d,c)=>{const u=Wx(s,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return cs(l,(d,c)=>{const u=l.length-d.length-1,m=ff(c.pattern)?c.endMarker:Wx(s,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,e);U(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;ff(s.pattern)?((l,d,c,u)=>{const m=Ml(l.dom,c);Ll(l.dom,m,u),Gx(l,d,m)})(t,s.pattern,s.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=Ml(p,u),h=Ml(p,c);Ll(p,h,m),Ll(p,f,m);const b=Ml(p,{prefix:c.prefix,start:c.end,end:u.start});Gx(l,d,b)})(t,s.pattern,s.startMarker,s.endMarker,i),Kx(n,s.endMarker,i),Kx(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},Jx=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},gf=Ot.DOM,DO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,pf=t=>fs(t,e=>!1===fe(e)),Zx=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return pf({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:DO(t),sandbox_iframes:e("sandbox_iframes"),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},tE=t=>{const e=t.options.get;return pf({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},hf=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,eE=t=>{const e=hf(t),n=wh(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";H.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const{pass:u,fail:m}=hr(d,h=>tinymce.Resource.has(am(h))),f=[...u.map(h=>{const g=tinymce.Resource.get(am(h));return at(g)?Promise.resolve(hf(l).loadRawCss(h,g)):Promise.resolve()}),hf(l).loadAll(m)];return l.inline?f:f.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=Ok(t);return i&&((l,d)=>{const c=k(l.getBody()),u=bd(ro(c)),m=oe("style");de(m,"type","text/css"),Yt(m,Er(d)),Yt(u,m),l.on("remove",()=>{Dt(m)})})(t,i),a},bf=t=>{var e;!0!==t.removed&&(Mn(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Oi(o)&&o.selection.getStart(!0)!==r||Ce(r).each(s=>{const a=s.getNode(),i=Xn(a)?Ce(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=oS(e);Nt(n)&&n.call(e,e),(o=>{const r=sS(o);r&&Ye.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},nE=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(gf.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var a,i;o.disabled=!0,t.readonly=_h(t),t._editableRoot=Xk(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===gf.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const x=y.id||"blobid"+sA+++(()=>{const T=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+T()+T()+T()})(),w=y.name||x,E=y.blob;var N;return{id:W(x),name:W(w),filename:W(y.filename||w+"."+(N=E.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[N.toLowerCase()]||"dat")),blob:W(E),base64:W(y.base64),blobUri:W(y.blobUri||URL.createObjectURL(E)),uri:W(y.uri)}},b=y=>Zt(h,y).getOrUndefined(),v=y=>b(x=>x.id()===y);return{create:(y,x,w,E,N)=>{if(at(y))return g({id:y,name:E,filename:N,blob:x,base64:w});if(we(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(x=>x.blobUri()===y),getByData:(y,x)=>b(w=>w.base64()===y&&w.blob().type===x),findFirst:b,removeByUri:y=>{h=gt(h,x=>x.blobUri()!==y||(URL.revokeObjectURL(x.blobUri()),!1))},destroy:()=>{U(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=dC(),s=[],a=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===_t.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),d=(h,g)=>{U(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=Et(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=uC(t,r)),p().then(a(h=>{const g=Et(h,b=>b.blobInfo);return n.upload(g,cC(t)).then(a(b=>{const v=[];let y=!1;const x=Et(b,(w,E)=>{const{blobInfo:N,image:T}=h[E];let O=!1;return w.status&&wk(t)?(w.url&&!he(T.src,w.url)&&(y=!0),e.removeByUri(T.src),Mn(t)||((P,_)=>{const R=t.convertURL(_,"src");var B;d(P.src,_),Hn(k(P),{src:bh(t)?(B=_,B+(-1===B.indexOf("?")?"?":"&")+(new Date).getTime()):_,"data-mce-src":R})})(T,w.url)):w.error&&(w.error.remove&&(d(T.src,_t.transparentSrc),v.push(T),O=!0),il(t,bn.translate(["Failed to upload image: {0}",w.error.message]))),{element:T,status:w.status,uploadUri:w.url,blobInfo:N,removed:O}});return v.length>0&&!Mn(t)?t.undoManager.transact(()=>{U(Cd(v),w=>{const E=sn(w);var N;Dt(w),E.each((N=t,T=>{var O,P;(O=N).dom.isEmpty((P=T).dom)&&q(O.schema.getTextBlockElements()[xt(P)])&&Yt(T,ws('<br data-mce-bogus="1" />'))})),e.removeByUri(w.dom.src)})}):y&&t.undoManager.dispatchChange(),x}))}))),u=()=>hh(t)?c():Promise.resolve([]),m=h=>zn(s,g=>g(h)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=Kt)=>{const s=gt((i=o)?Ie(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===_t.transparentSrc)&&(le(l,"blob:")?!t.isUploaded(l)&&r(i):!!le(l,"data:")&&r(i))}),a=Et(s,i=>{const l=i.src;if(ht(n,l))return n[l].then(d=>at(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(le(u,"blob:")){const h=c.getByUri(u);return q(h)?Promise.resolve(h):(p=u,le(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):le(p,"data:")?(f=p,new Promise((g,b)=>{ju(f).bind(({type:v,data:y,base64Encoded:x})=>iy(v,y,x)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>ly(g).then(b=>dy(b,!1,v=>C.some(cy(c,g,v))).getOrThunk(m)))}var g,p,f;return le(u,"data:")?uy(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(a)}}})(r,e)),o.findAll(t.getBody(),m).then(a(h=>{const g=gt(h,b=>at(b)?(il(t,b),!1):"blob"!==b.uriType);return Mn(t)||U(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Oe(t.editorManager.get(),(x,w)=>x||w.editorUpload&&w.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{hh(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{U(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{s.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=co(tE(t)),t.dom=Ot(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Nk(t),referrerPolicy:dc(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)},force_hex_color:AS(t)}),t.parser=(a=>{const i=Wr(Zx(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=a.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,a.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),ES(a)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+a.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new Ee("br",1))}}),i})(t),t.serializer=Zy((a=>{const i=a.options.get;return{...Zx(a),...tE(a),...pf({remove_trailing_brs:i("remove_trailing_brs"),pad_empty_with_br:i("pad_empty_with_br"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=Jy(t.dom,t.getWin(),t.serializer,t),t.annotator=xb(t),t.formatter=gC(t),t.undoManager=hC(t),t._nodeChangeDispatcher=new tO(t),t._selectionOverrides=AO(t),(a=>{const i=uo(),l=ae(!1),d=Jd(c=>{a.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);a.on("touchstart",c=>{E1(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),a.on("touchmove",c=>{d.cancel(),E1(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{const d=NS(i);U(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})}),i.serializer.addNodeFilter("details",l=>{const d=RS(i);U(l,c=>{"expanded"===d?c.attr("open","open"):"collapsed"===d&&c.attr("open",null)})})})(a),(a=>{const i="contenteditable",l=" "+H.trim(wS(a))+" ",d=" "+H.trim(Nh(a))+" ",c=S1(l),u=S1(d),m=xS(a);m.length>0&&a.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],XA(f,v,Nh(f)));g.content=v}})(a,m,p)}),a.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),a.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];if(!c(h)&&!u(h))continue;const g=h.attr("data-mce-content");m.length>0&&g?QA(m,g)?(h.name="#text",h.type=3,h.raw=!0,h.value=g):h.remove():h.attr(i,null)}})})(t),Mn(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o,r)=>{const s=L.fromRangeStart(n).getNode(),a=(u=o,m=r,To(k(s),p=>an(p.dom)||m.isBlock(xt(p)),_x(u)).getOr(k(u)).dom),i=Sx(s,a,!1),l=Sx(s,a,!0),d=document.createRange();var u,m;return kx(i,a).fold(()=>{Ex(i)?d.setStart(i,0):d.setStartBefore(i)},c=>d.setStartBefore(c.dom)),kx(l,a).fold(()=>{Ex(l)?d.setEnd(l,l.data.length):d.setEndAfter(l)},c=>d.setEndAfter(c.dom)),d})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(ku(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=yS(i),f=CS(i),{inlinePatterns:ch(p),blockPatterns:dh(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!Y.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return mf(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),a=Hx(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=Xx(t,o,n.startContainer,s,a,!0),l=((d,c,u,m)=>{var p;const f=d.dom,h=ye(d);if(!f.is(c,h))return[];const g=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=_o(b,(E,N)=>N.start.length-E.start.length),x=v.replace(re," ");return Zt(y,w=>0===v.indexOf(w.start)||0===x.indexOf(w.start))})(u.blockPatterns,g).map(b=>H.trim(g).length===b.start.length?[]:[{pattern:b,range:uf(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,o,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(se,{preserve_zwsp:!0}),Qx(t,i),((u,m)=>{if(0===m.length)return;const p=u.selection.getBookmark();U(m,f=>((h,g)=>{const v=g.pattern,y=jx(h.dom.getRoot(),g.range).getOrDie("Unable to resolve path range");return mf(h,y).each(x=>{"block-format"===v.type?((w,E)=>{const N=E.get(w);return Jt(N)&&Be(N).exists(T=>ht(T,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{qx(h.dom,x,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{qx(h.dom,x,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(t,l);const d=t.selection.getRng(),c=Bm(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const m=u.container;"\ufeff"===m.data.charAt(u.offset-1)&&(m.deleteData(u.offset-1,1),ns(t.dom,m.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const g=f.selection.getRng();mf(f,g).map(b=>{const v=Math.max(0,g.startOffset-1),y=$x(f.dom,b,g.startContainer,v),x=Hx(h,b,y),w=Xx(f,b,g.startContainer,v,x,!1);w.length>0&&f.undoManager.transact(()=>{Qx(f,w)})})})(i,p)}};i.on("keyup",p=>{Jx(d,p,(f,h)=>f===h.keyCode&&!Y.modifierPressed(h))&&m()}),i.on("keypress",p=>{Jx(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&Ye.setEditorTimeout(i,m)})})(a)})(t));const r=ZT(t);((t,e)=>{t.addCommand("delete",()=>{var n;x1(n=t,e,!1).fold(()=>{n.selection.isEditable()&&(cu(n),uu(n))},ds)}),t.addCommand("forwardDelete",()=>{var n;x1(n=t,e,!0).fold(()=>{n.selection.isEditable()&&Q0(n,"ForwardDelete")},ds)})})(t,r),(a=>{a.on("NodeChange",J(GA,a))})(t),(a=>{var i;const l=a.dom,d=ye(a),c=null!==(i=Lk(a))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(vC(g)){const b=g.keyCode;return!yC(g)&&(Y.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||Rt(mA,b))}return!1})(m))return;const f=a.getBody(),h=!(vC(g=m)&&!(yC(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(Vt(k(b),!1)){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var g;(""!==l.getAttrib(f,bC)!==h||p)&&(l.setAttrib(f,bC,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(a,h),a.on(h?"keydown":"keyup",u),a.off(h?"keyup":"keydown",u))};_n(c)&&a.on("init",m=>{u(m,!0),a.on("change SetContent ExecCommand",u),a.on("paste",p=>Ye.setEditorTimeout(a,()=>u(p)))})})(t),(t=>{const e=ae(!1),n=ae(hS(t)?"text":"html"),o=(r=>{const s=ae(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ix);_t.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(rf(a)){let d;const c=i.get();for(;d=rf(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>rf(r),getHtml:()=>(a=>{const i=a.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=gt(a.getBody().childNodes,lO);U(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,a;r=t,(_t.browser.isChromium()||_t.browser.isSafari())&&(a=pO,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),Ab(a,!1)):(i.set("text"),Ab(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Pl(r,i.html,i.internal,!1),i.text&&lf(r,i.text,!1)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=dS(r);Nt(a)&&r.on("PastePreProcess",s(a));const i=cS(r);Nt(i)&&r.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&yx(s)&&s.selection.isEditable()&&hx(a,vx(s),bx(s),()=>{if(_t.browser.isChromium()||_t.browser.isFirefox()){const i=s.selection.getRng();Ye.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&yx(s)&&hx(a,vx(s),bx(s),vt)})(r))})(t),((r,s)=>{lS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),_i(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&$t(i.files,d=>/^image\//.test(d.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=Cx(r,a);if(Gt(i))return;const l=fx(a.dataTransfer),d=wo(l,Bl());if((!gx(l)||(f=>{const h=f["text/plain"];return!!h&&0===h.indexOf("file://")})(l))&&px(r,a,i))return;const c=l[Bl()],u=c||l["text/html"]||l["text/plain"],m=((f,h,g,b)=>{const v=f.getParent(g,y=>Fo(h,y));if(!Se(f.getParent(g,"summary")))return!0;if(v&&ht(b,"text/html")){const y=(new DOMParser).parseFromString(b["text/html"],"text/html").body;return!Se(y.querySelector(v.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l),p=s.get();p&&!m||u&&(a.preventDefault(),Ye.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(c||p&&m)&&r.execCommand("Delete"),wx(r,i);const f=cx(u);l["text/html"]?Pl(r,f,d,!0):lf(r,f,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{_i(r)&&!s.get()&&(a.preventDefault(),wx(r,Cx(r,a))),"dragend"===a.type&&s.set(!1)}),(a=>{a.on("input",i=>{const l=d=>Se(d.querySelector("summary"));if("deleteByDrag"===i.inputType){const d=gt(a.dom.select("details"),l);U(d,c=>{Ht(c.firstChild)&&c.firstChild.remove();const u=a.dom.create("summary");u.appendChild(Bs().dom),c.prepend(u)})}})})(r)})(t,e),((t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(Y.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,_t.os.isAndroid()&&0===(null===(m=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var c,u,m;const l="text"===s.get()||a;a=!1;const d=fx(i.clipboardData);!gx(d)&&px(o,i,r.getLastRng()||o.selection.getRng())||(wo(d,"text/html")?(i.preventDefault(),df(o,d,d["text/html"],l,!0)):wo(d,"text/plain")&&wo(d,"text/uri-list")?(i.preventDefault(),df(o,d,d["text/plain"],l,!0)):(r.create(),Ye.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),df(o,d,c,l,!1)},0)))})})(t,e,n),(o=>{const r=a=>le(a,"webkit-fake-url"),s=a=>le(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!_i(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of a){const c=d.attr("src");at(c)&&!d.attr("data-mce-object")&&c!==_t.transparentSrc&&(r(c)||!vS(o)&&s(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const s=(a=>{const i=a;return(l=a,Pt(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=Wy(a),C.none()),l=>(i.rtcInstance=(()=>{const d=W(null),c=W("");return{init:{bindEvents:vt},undoManager:{beforeChange:vt,add:d,undo:d,redo:d,clear:vt,reset:vt,hasUndo:zt,hasRedo:zt,transact:d,ignore:vt,extra:vt},formatter:{match:zt,matchAll:W([]),matchNode:W(void 0),canApply:zt,closest:c,apply:vt,remove:vt,toggle:vt,formatChanged:W({unbind:vt})},editor:{getContent:c,setContent:W({content:"",html:""}),insertContent:W(""),addVisual:vt},selection:{getContent:c},autocompleter:{addDecoration:vt,removeDecoration:vt},raw:{getModel:W(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>we(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,x,w)=>p.transact(w),ignore:(y,x)=>p.ignore(x),extra:(y,x,w,E)=>p.extra(w,E)},formatter:{match:(y,x,w,E)=>f.match(y,u(x),E),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,x,w)=>f.apply(y,u(x)),remove:(y,x,w,E)=>f.remove(y,u(x)),toggle:(y,x,w)=>f.toggle(y,u(x)),formatChanged:(y,x,w,E,N)=>f.formatChanged(x,w,E,N)},editor:{getContent:y=>h.getContent(y),setContent:(y,x)=>({content:h.setContent(y,x),html:""}),insertContent:(y,x)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,x)=>g.getContent(x)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),aS(a)||(i.body.spellcheck=!1,gf.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=H.each,n=Y.BACKSPACE,o=Y.DELETE,r=t.dom,s=t.selection,a=t.parser,i=_t.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=_t.deviceType.isiPhone()||_t.deviceType.isiPad(),u=_t.os.isMacOS()||_t.os.isiOS(),m=(_,R)=>{try{t.getDoc().execCommand(_,!1,String(R))}catch{}},p=_=>_.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",_=>{let R;if(_.target===t.getDoc().documentElement)if(R=s.getRng(),t.getBody().focus(),"mousedown"===_.type){if($e(R.startContainer))return;s.placeCaretAt(_.clientX,_.clientY)}else s.setRng(R)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",_=>{if(!p(_)&&"HTML"===_.target.nodeName){const R=t.getBody();R.blur(),Ye.setEditorTimeout(t,()=>{R.focus()})}})},b=()=>{const _=Sh(t);t.on("click",R=>{const B=R.target;/^(IMG|HR)$/.test(B.nodeName)&&r.isEditable(B)&&(R.preventDefault(),t.selection.select(B),t.nodeChanged()),"A"===B.nodeName&&r.hasClass(B,_)&&0===B.childNodes.length&&r.isEditable(B.parentNode)&&(R.preventDefault(),s.select(B))})},v=()=>{t.on("keydown",_=>{if(!p(_)&&_.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const R=s.getNode().previousSibling;if(R&&R.nodeName&&"table"===R.nodeName.toLowerCase())return _.preventDefault(),!1}return!0})},y=()=>{_h(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),xh(t)||m("enableObjectResizing",!1)})},x=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},E=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",_=>{let R;"HTML"===_.target.nodeName&&(R=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(R),t.selection.normalize(),t.nodeChanged())}))},N=()=>{u&&t.on("keydown",_=>{!Y.metaKeyPressed(_)||_.shiftKey||37!==_.keyCode&&39!==_.keyCode||(_.preventDefault(),t.selection.getSel().modify("move",37===_.keyCode?"backward":"forward","lineboundary"))})},T=()=>{t.on("click",_=>{let R=_.target;do{if("A"===R.tagName)return void _.preventDefault()}while(R=R.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",_=>{_.preventDefault()})})},P=vt;return Mn(t)?(d&&(h(),b(),O(),f(),c&&(w(),E(),T())),l&&(g(),y(),x(),N())):(t.on("keydown",_=>{if(p(_)||_.keyCode!==Y.BACKSPACE)return;let R=s.getRng();const B=R.startContainer,M=R.startOffset,V=r.getRoot();let $=B;if(R.collapsed&&0===M){for(;$.parentNode&&$.parentNode.firstChild===$&&$.parentNode!==V;)$=$.parentNode;"BLOCKQUOTE"===$.nodeName&&(t.formatter.toggle("blockquote",void 0,$),R=r.createRng(),R.setStart(B,0),R.setEnd(B,0),s.setRng(R))}}),(()=>{const _=R=>{const B=r.create("body"),M=R.cloneContents();return B.appendChild(M),s.serializer.serialize(B,{format:"html"})};t.on("keydown",R=>{const B=R.keyCode;if(!p(R)&&(B===o||B===n)&&t.selection.isEditable()){const M=t.selection.isCollapsed(),V=t.getBody();if(M&&!Vt(k(V))||!M&&!($=>{const ot=_($),et=r.createRng();return et.selectNode(t.getBody()),ot===_(et)})(t.selection.getRng()))return;R.preventDefault(),t.setContent(""),V.firstChild&&r.isBlock(V.firstChild)?t.selection.setCursorLocation(V.firstChild,0):t.selection.setCursorLocation(V,0),t.nodeChanged()}})})(),_t.windowsPhone||t.on("keyup focusin mouseup",_=>{Y.modifierPressed(_)||(R=>{const B=R.getBody(),M=R.selection.getRng();return M.startContainer===M.endContainer&&M.startContainer===B&&0===M.startOffset&&M.endOffset===B.childNodes.length})(t)||s.normalize()},!0),d&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",ye(t))}),O(),v(),a.addNodeFilter("br",_=>{let R=_.length;for(;R--;)"Apple-interchange-newline"===_[R].attr("class")&&_[R].remove()}),c?(w(),E(),T()):f()),l&&(t.on("keydown",_=>{if(!p(_)&&_.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const R=s.getNode(),B=R.previousSibling;if("HR"===R.nodeName)return r.remove(R),void _.preventDefault();B&&B.nodeName&&"hr"===B.nodeName.toLowerCase()&&(r.remove(B),_.preventDefault())}}}),g(),(()=>{const _=()=>{const B=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const M=s.getStart();M!==t.getBody()&&(r.setAttrib(M,"style",null),e(B,V=>{M.setAttributeNode(V.cloneNode(!0))}))}},R=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",B=>{let M;return!(!(p(B)||8!==B.keyCode&&46!==B.keyCode)&&R()&&(M=_(),t.getDoc().execCommand("delete",!1),M(),B.preventDefault(),1))}),r.bind(t.getDoc(),"cut",B=>{if(!p(B)&&R()){const M=_();Ye.setEditorTimeout(t,()=>{M()})}})})(),y(),t.on("SetContent ExecCommand",_=>{"setcontent"!==_.type&&"mceInsertLink"!==_.command||e(r.select("a:not([data-mce-block])"),R=>{var B;let M=R.parentNode;const V=r.getRoot();if(M?.lastChild===R){for(;M&&!r.isBlock(M);){if((null===(B=M.parentNode)||void 0===B?void 0:B.lastChild)!==M||M===V)return;M=M.parentNode}r.add(M,"br",{"data-mce-bogus":1})}})}),x(),N(),v(),t.on("drop",_=>{var R;const B=null===(R=_.dataTransfer)||void 0===R?void 0:R.getData("text/html");at(B)&&/^<img[^>]*>$/.test(B)&&t.dispatch("dragend",new window.DragEvent("dragend",_))}))),{refreshContentEditable:P,isHidden:()=>{if(!l||t.removed)return!1;const _=t.selection.getSel();return!_||!_.rangeCount||0===_.rangeCount}}})(a),a.dispatch("PostRender");const d=Bk(a);void 0!==d&&(l.dir=d);const c=iS(a);c&&a.on("BeforeSetContent",u=>{H.each(c,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing="compositionstart"===u.type})})(t),s.fold(()=>{const a=(i=>{let l=!1;const d=setTimeout(()=>{l||i.setProgressState(!0)},500);return()=>{clearTimeout(d),l=!0,i.setProgressState(!1)}})(t);eE(t).then(()=>{bf(t),a()})},a=>{t.setProgressState(!0),eE(t).then(()=>{a().then(i=>{t.setProgressState(!1),bf(t),Ky(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),bf(t),Ky(t)})})})},LO=Kt,vf=Ot.DOM,oE=Ot.DOM,rE=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),sE=t=>{const e=t.getElement();return t.inline?rE(null):(n=>{const o=oE.create("div");return oE.insertAfter(o,n),rE(o,o)})(e)},MO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=H.trim(vh(n)),r=n.ui.registry.getAll().icons,s={...al.get("default").icons,...al.get(o).icons};Bt(s,(a,i)=>{ht(r,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const o=Dr(n);if(at(o)){const r=rr.get(o);n.theme=r(n,rr.urls[o])||{},Nt(n.theme.init)&&n.theme.init(n,rr.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=cc(n),r=Kr.get(o);n.model=r(n,Kr.urls[o])})(t),(n=>{const o=[];U(Ei(n),r=>{((s,a,i)=>{const l=Yr.get(i),d=Yr.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=H.trim(i),l&&-1===H.inArray(a,i)){if(s.plugins[i])return;try{const c=l(s,d)||{};s.plugins[i]=c,Nt(c.init)&&(c.init(s,d),a.push(i))}catch(c){((u,m,p)=>{const f=bn.translate(["Failed to initialize plugin: {0}",m]);_b(u,"PluginLoadError",{message:f}),ll(f,p),il(u,f)})(s,i,c)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,at(Dr(n))?(r=>{const s=r.theme.renderUI;return s?s():sE(r)})(n):Nt(Dr(n))?(r=>{const s=r.getElement(),a=Dr(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):sE(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(vt),hide:C.from(o.hide).getOr(vt),isEnabled:C.from(o.isEnabled).getOr(Kt),setEnabled:s=>{n.mode.isReadOnly()||C.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(lC(o=n,Tk(o)),(o=>lC(o,wh(o)))(n)),t.inline?nE(t):((n,o)=>{((r,s)=>{const a=r.translate("Rich Text Area"),i=$n(k(r.getElement()),"tabindex").bind(Ga),l=((d,c,u,m)=>{const p=oe("iframe");return m.each(f=>de(p,"tabindex",f)),Hn(p,u),Hn(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),xr(p,"tox-edit-area__iframe"),p})(r.id,a,uk(r),i).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(d=>{let c=mk(d)+"<html><head>";gh(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=fk(d),m=gk(d),p=d.translate(eS(d));return ph(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+ph(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${m}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(r),vf.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=vf.isHidden(o.editorContainer)),n.getElement().style.display="none",vf.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,nE(r)};if(kS(r)||_t.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=((t,e,n,o)=>((r,s,a,i,l)=>{const d=(c=a,u=i,m=>{c(m)&&u((p=>{const f=k(Tg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=En(g,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:g,kill:b,raw:p}})(m))});var c,u;return r.dom.addEventListener(s,d,!1),{unbind:J(p_,r,s,d,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(k(s),0,LO);s.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ar=Ot.DOM,aE=t=>"-"===t.charAt(0),iE=(t,e,n)=>C.from(e).filter(o=>_n(o)&&!al.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),lE=kn().deviceType,dE=lE.isPhone(),FO=lE.isTablet(),Ma=t=>{if(Gt(t))return[];{const e=Jt(t)?t:t.split(/[ ,]/),n=Et(e,yr);return gt(n,_n)}},yf=(t,e)=>ht(t.sections(),e),zO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Pt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),jO=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?H.extend({},t.external_plugins,o):o},qO=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a,i)=>{const l=k(r.getRoot());return a=da(l,L.fromRangeStart(s),i)?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),ca(l,L.fromRangeEnd(s),i)?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e,t.schema):e},Fl=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=H.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Qu(t,{...o,content:qO(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(i=r.content,l=o,rm(t).editor.insertContent(i,l));var i,l;Ju(t,s,r),t.addVisual()})}},VO={"font-size":"size","font-family":"face"},WO=Ja("font"),cE=t=>(e,n)=>C.from(n).map(k).filter(Fe).bind(o=>{return(r=t,s=e,a=o.dom,Au(k(a),i=>{return ei(l=i,r).orThunk(()=>WO(l)?Pt(VO,r).bind(d=>$n(l,d)):C.none());var l},i=>kt(k(s),i))).or(((r,s)=>C.from(Ot.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,a}).getOr(""),KO=cE("font-size"),YO=En(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),cE("font-family")),GO=t=>Ce(t.getBody()).bind(e=>{const n=e.container();return C.from(j(n)?n.parentNode:n)}),Cf=(t,e)=>{return n=t,o=Lf(C.some,e),(r=n,C.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(J(GO,n)).map(k).filter(Fe).bind(o);var n,o,r},uE=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=H.explode(t.options.get("font_size_style_values")),r=H.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},XO=t=>{const e=t.split(/\s*,\s*/);return Et(e,n=>-1===n.indexOf(" ")||le(n,'"')||le(n,"'")?n:`'${n}'`).join(",")},mE=(t,e)=>{const n=t.dom,o=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),s=e?o.startContainer:o.endContainer,a=Oa(n,s);if(!a||!a.isContentEditable)return;const i=e?De:Kn,l=ye(t);((d,c,u,m)=>{const p=d.dom,f=g=>p.isBlock(g)&&g.parentElement===u,h=f(c)?c:p.getParent(m,f,u);return C.from(h).map(k)})(t,r,a,s).each(d=>{const c=Ow(t,s,d.dom,a,!1,l);i(d,k(c)),t.selection.setCursorLocation(c,0),t.dispatch("NewBlock",{newBlock:c}),Ta(t,"insertParagraph")})},JO=["toggleview"],fE=t=>Rt(JO,t.toLowerCase());class gE{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,a=e.toLowerCase(),i=r?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Wc(d=s).each(c=>d.selection.setRng(c)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[a];return!!Nt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!fE(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Nt(o)&&o(n)}queryCommandValue(e){if(!fE(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Nt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Bt(e,(r,s)=>{U(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const ir="data-mce-contenteditable",wf=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Ul=(t,e)=>{t.dom.contentEditable=e?"true":"false"},lr=t=>t.readonly,pE=t=>{t.parser.addAttributeFilter("contenteditable",e=>{lr(t)&&U(e,n=>{n.attr(ir,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(ir,e=>{lr(t)&&U(e,n=>{n.attr("contenteditable",n.attr(ir))})}),t.serializer.addTempAttr(ir)},ZO=["copy"],tB=H.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class xf{static isNative(e){return!!tB[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||zt}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=Kd(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=zt),n){const s={func:n,removed:!1};r&&H.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return Bt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=hr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,U(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Bt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Ia=t=>(t._eventDispatcher||(t._eventDispatcher=new xf({scope:t,toggleEvent:(e,n)=>{xf.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Ef={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return Kd(t.toLowerCase(),e??{},o);const r=Ia(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return Ia(this).on(t,e,n)},off(t,e){return Ia(this).off(t,e)},once(t,e){return Ia(this).once(t,e)},hasEventListeners(t){return Ia(this).has(t)}},zl=Ot.DOM;let dr;const jl=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Eh(t);return n?(t.eventRoot||(t.eventRoot=zl.select(n)[0]),t.eventRoot):t.getBody()},hE=(t,e,n)=>{var o;(o=t).hidden||lr(o)?lr(t)&&((o,r)=>{if("click"!==r.type||Y.metaKeyPressed(r))Rt(ZO,r.type)&&o.dispatch(r.type,r);else{const s=k(r.target);(a=o,i=s,Oo(i,"a",l=>kt(l,k(a.getBody()))).bind(l=>$n(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${Gf(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},bE=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=jl(t,e);if(Eh(t)){if(dr||(dr={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||dr&&(Bt(dr,(r,s)=>{t.dom.unbind(jl(t,s))}),dr=null)})),dr[e])return;const o=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||zl.isChildOf(s,l))&&hE(a[i],e,r)}};dr[e]=o,zl.bind(n,e,o)}else{const o=r=>{hE(t,e,r)};zl.bind(n,e,o),t.delegates[e]=o}},vE={...Ef,bindPendingEventDelegates(){const t=this;H.each(t._pendingNativeEvents,e=>{bE(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?bE(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(jl(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Bt(t.delegates,(o,r)=>{t.dom.unbind(jl(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},eB=t=>at(t)?{value:t.split(/[ ,]/),valid:!0}:pr(t,at)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},yE=(t,e)=>t+(hs(e.message)?"":`. ${e.message}`),CE=t=>t.valid,_f=(t,e,n="")=>{const o=e(t);return Eo(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},nB=["design","readonly"],wE=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((a,i)=>{const l=k(a.getBody());var d,c,u;u=i,md(d=l,c="mce-content-readonly")&&!u?ys(d,c):u&&xr(d,c),i?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),(d=>{C.from(d.selection.getNode()).each(c=>{c.removeAttribute("data-mce-selected")})})(a),a.readonly=!0,Ul(l,!1),U(ve(l,'*[contenteditable="true"]'),d=>{de(d,ir,"true"),Ul(d,!1)})):(a.readonly=!1,a.hasEditableRoot()&&Ul(l,!0),U(ve(l,`*[${ir}="true"]`),d=>{ce(d,ir),Ul(d,!0)}),wf(a,"StyleWithCSS",!1),wf(a,"enableInlineTableEditing",!1),wf(a,"enableObjectResizing",!1),n0(a)&&a.focus(),(d=>{d.selection.setRng(d.selection.getRng())})(a),a.nodeChanged())})(t,s.editorReadOnly),e.set(o),(a=t).dispatch("SwitchMode",{mode:o})},kf=H.each,Sf=H.explode,oB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},xE=H.makeMap("alt,ctrl,shift,meta,access"),rB=t=>{const e={},n=_t.os.isMacOS()||_t.os.isiOS();kf(Sf(t.toLowerCase(),"+"),s=>{s in xE?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=oB[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in xE)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class EE{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(kf(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return kf(Sf(H.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:H.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=H.map(Sf(e,">"),rB);return s[s.length-1]=H.extend(s[s.length-1],{func:o,scope:r||this.editor}),H.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const sB=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l={},d=(c,u)=>(m,p)=>{c[m.toLowerCase()]={...p,type:u}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:d(a,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>r[c.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},cr=Ot.DOM,_E=H.extend,aB=H.each;class Hl{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,_E(this,vE);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const a=t?{mobile:zO(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Hf(s,(d,c)=>Rt(t,c),nd(i),nd(l)),{t:i,f:l}})(e);return r=n.f,{sections:W(n.t),options:W(r)};var r})(["mobile"],Fm(a,r)),l=H.extend(n,o,i.options(),t&&yf(i,"mobile")?((d,c,u={})=>{const m=d.sections(),p=Pt(m,c).getOr({});return H.extend({},u,p)})(i,"mobile"):{},{external_plugins:jO(o,i.options())});return((d,c,u,m)=>{const p=Ma(u.forced_plugins),f=Ma(m.plugins),h=yf(v=c,"mobile")?v.sections().mobile:{},g=((v,y,x,w)=>v&&yf(y,"mobile")?w:x)(d,c,f,h.plugins?Ma(h.plugins):f),b=((v,y)=>[...Ma(v),...Ma(y)])(p,g);var v;return H.extend(m,{forced_plugins:p,plugins:b})})(t,i,o,l)})(dE||FO,dE,f=n,o.defaultOptions,f);var f;this.options=((p,f)=>{const h={},g={},b=(y,x,w)=>{const E=_f(x,w);return CE(E)?(g[y]=E.value,!0):(console.warn(yE(`Invalid value passed for the ${y} option`,E)),!1)},v=y=>ht(h,y);return{register:(y,x)=>{const w=at(x.processor)?(N=>{const T=(()=>{switch(N){case"array":return Jt;case"boolean":return Eo;case"function":return Nt;case"number":return fn;case"object":return we;case"string":return at;case"string[]":return eB;case"object[]":return O=>pr(O,we);case"regexp":return O=>Ha(O,RegExp);default:return Kt}})();return O=>_f(O,T,`The value must be a ${N}.`)})(x.processor):x.processor,E=((N,T,O)=>{if(!fe(T)){const P=_f(T,O);if(CE(P))return P.value;console.error(yE(`Invalid default value passed for the "${N}" option`,P))}})(y,x.default,w);h[y]={...x,default:E,processor:w},Pt(g,y).orThunk(()=>Pt(f,y)).each(N=>b(y,N,w))},isRegistered:v,get:y=>Pt(g,y).orThunk(()=>Pt(h,y).map(x=>x.default)).getOrUndefined(),set:(y,x)=>{if(v(y)){const w=h[y];return w.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,x,w.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const x=v(y);return x&&delete g[y],x},isSet:y=>ht(g,y)}})(0,s),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:fh(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:fh(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=at(h)&&_n(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=Rt(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>Eo(h)||at(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||at(h)||pr(h,at);return g?at(h)?{value:Et(h.split(","),yr),valid:g}:Jt(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:uc(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=at(h)||pr(h,at);return g?{value:Jt(h)?h:Et(h.split(","),yr),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=Eo(h)||at(h);return g?!1===h||ic.isiPhone()||ic.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!dk}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||at(h)||Nt(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||at(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("pad_empty_with_br",{processor:"boolean",default:!1}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:lc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:lc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:lc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>at(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>pr(h,we)||!1===h?{value:uh(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return Nt(h)?{value:(g=h,b=>{const v=g(b);return uh(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>pr(h,mh)?{value:h,valid:!0}:mh(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=Rt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=Rt(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),f("force_hex_color",{processor:h=>{const g=["always","rgb_only","off"],b=Rt(g,h);return b?{value:h,valid:b}:{valid:!1,message:`Must be one of: ${g.join(", ")}.`}},default:"off"}),f("sandbox_iframes",{processor:"boolean",default:!1}),f("convert_unsafe_embeds",{processor:"boolean",default:!1}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:bn.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:ck.getAttrib(p.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=(t=>{const e=eC(t,WR),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),_o(e)})(h),v=(t=>nC(t,YR))(g),y=v.length>0,x=b.length>0,w="mobile"===g.theme;if(y||x||w){const E="\n- ",N=w?`\n\nThemes:${E}mobile`:"",T=y?`\n\nPlugins:${E}${v.join(E)}`:"",O=x?`\n\nOptions:${E}${b.join(E)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+N+T+O)}})(p,f),((h,g)=>{const b=(t=>eC(t,KR))(h),v=(t=>nC(t,tC.map(e=>e.name)))(g),y=v.length>0,x=b.length>0;if(y||x){const w="\n- ",E=y?`\n\nPlugins:${w}${v.map(ZR).join(w)}`:"",N=x?`\n\nOptions:${w}${b.join(w)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+E+N)}})(p,f)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=dc(r);d&&(Qn.ScriptLoader._setReferrerPolicy(d),Ot.DOM.styleSheetLoader._setReferrerPolicy(d));const c=kh(r);q(c)&&Ot.DOM.styleSheetLoader._setContentCssCors(c),xe.languageLoad=a("language_load"),xe.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new un(gh(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=uc(r),this.hasVisual=Zk(r),this.shortcuts=new EE(this),this.editorCommands=new gE(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{U("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return $t(s,a=>q(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(_t.os.isMacOS()||_t.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!Z(a)||s++!==r||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),an);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Fl(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Fl(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Fl(e,r)},mceInsertContent:(n,o,r)=>{Fl(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(uS(e))}})})(t),(e=>{const n=(o,r,s)=>{const a=at(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");we(a)&&at(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{y1(e,"indent")},Outdent:()=>{C1(e)}}),e.editorCommands.addCommands({Outdent:()=>h1(e)},"state")})(t),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{mE(e,!0)},InsertNewBlockAfter:()=>{mE(e,!1)}})})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{Al(Lw,e)},mceInsertNewLine:(n,o,r)=>{Hw(e,r)},InsertLineBreak:(n,o,r)=>{Al(Fw,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=uE(i,l);i.formatter.toggle("fontname",{value:XO(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:uE(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(at(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Cf(r=n,s=>YO(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Cf(r=n,s=>KO(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Cf(r=n,s=>{const a=k(r.getBody());return Au(s,l=>ei(l,"line-height"),J(kt,a)).getOrThunk(()=>{const l=parseFloat(Rn(s,"line-height")),d=parseFloat(Rn(s,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?Qc(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),q(i.bookmark)&&!Zo(i)&&Wc(i).each(m=>{i.selection.setRng(m),c=m});const u=(m=i,p=l.getNode(),m.dom.getParent(p,f=>"true"===m.dom.getContentEditable(f)));var m,p;if(u&&i.dom.isChildOf(u,d))return Xc(u),e0(i,c),void Qc(i);i.inline||(_t.browser.isOpera()||Xc(d),i.getWin().focus()),(_t.browser.isFirefox()||i.inline)&&(Xc(d),e0(i,c)),Qc(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=a("cache_suffix");u&&(_t.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:sB(),styleSheetLoader:void 0,show:vt,hide:vt,setEnabled:vt,isEnabled:Kt},this.mode=(p=>{const f=ae("design"),h=ae({design:{activate:vt,deactivate:vt,editorReadOnly:!1},readonly:{activate:vt,deactivate:vt,editorReadOnly:!0}});return(g=p).serializer?pE(g):g.on("PreInit",()=>{pE(g)}),(g=>{g.on("ShowCaret",b=>{lr(g)&&b.preventDefault()}),g.on("ObjectSelected",b=>{lr(g)&&b.preventDefault()})})(p),{isReadOnly:()=>lr(p),set:g=>((b,v,y,x)=>{if(x!==y.get()){if(!ht(v,x))throw new Error(`Editor mode '${x}' is invalid`);b.initialized?wE(b,y,v,x):b.on("init",()=>wE(b,y,v,x))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,x)=>{if(Rt(nB,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...x,deactivate:()=>{try{x.deactivate()}catch(w){console.error(`problem while deactivating editor mode ${y}:`,w)}}}}})(h.get(),g,b))}};var g})(r),o.dispatch("SetupEditor",{editor:this});const m=nS(r);Nt(m)&&m.call(r,r)}render(){(e=>{const n=e.id;bn.setCode(yh(e));const o=()=>{ar.unbind(window,"ready",o),e.render()};if(!jo.Event.domLoaded)return void ar.bind(window,"ready",o);if(!e.getElement())return;const r=k(e.getElement()),s=vg(r);var l;e.on("remove",()=>{Uf(r.dom.attributes,i=>ce(r,i.name)),Hn(r,s)}),e.ui.styleSheetLoader=up.forElement(r,{contentCssCors:kh(l=e),referrerPolicy:dc(l)}),uc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ar.getParent(n,"form");a&&(e.formElement=a,qk(e)&&!Ed(e.getElement())&&(ar.insertAfter(ar.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ar.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Vk(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=aC(e),e.notificationManager=sC(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ar.encode(i.content))}),Wk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Kk(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Qn.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=Dr(r);return!at(s)||q(rr.get(s))})(t)&&(r=>{const s=cc(r);return q(Kr.get(s))})(t)&&MO(t)};((r,s)=>{const a=Dr(r);if(at(a)&&!aE(a)&&!ht(rr.urls,a)){const i=Ik(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;rr.load(a,l).catch(()=>{va(r,"ThemeLoadError",ya("theme",l,a))})}})(t,e),((r,s)=>{const a=cc(r);if("plugin"!==a&&!ht(Kr.urls,a)){const i=Fk(r),l=at(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Kr.load(a,l).catch(()=>{va(r,"ModelLoadError",ya("model",l,a))})}})(t,e),((r,s)=>{const a=yh(s),i=Rk(s);if(!bn.hasCode(a)&&"en"!==a){const l=_n(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{va(s,"LanguageLoadError",ya("language",l,a))})}})(n,t),((r,s,a)=>{const i=iE(s,"default",a),l=(d=s,C.from(xk(d)).filter(_n).map(c=>({url:c,name:C.none()}))).orThunk(()=>iE(s,vh(s),""));var d;U((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,m;c=s,u=d.url,m=d.name.getOrUndefined(),va(c,"IconsLoadError",ya("icons",u,m))})})})(n,t,e),((r,s)=>{const a=(i,l)=>{Yr.load(i,l).catch(()=>{va(r,"PluginLoadError",ya("plugin",l,i))})};Bt(Qk(r),(i,l)=>{a(l,i),r.options.set("plugins",Ei(r).concat(l))}),U(Ei(r),i=>{!(i=H.trim(i))||Yr.urls[i]||aE(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Zo(this)}translate(e){return bn.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(q(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Kt,default:n})),r.isSet(e)||fe(n)?r.get(e):n}hasPlugin(e,n){return!(!Rt(Ei(this),e)||n&&void 0===Yr.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(cr.show(e.getContainer()),cr.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(cr.hide(e.getContainer()),cr.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=Ed(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,Ed(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const i=cr.getParent(n.id,"form");i&&aB(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return sm(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,a=o.format?o.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return Dy(n,r).fold(Ne,s=>{const a=(l=s,rm(n).editor.getContent(l));var l;return Ly(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=_E({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?sm(this,this.startContent,{format:"raw"}):sm(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||cr.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=cr.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,a=rS(r);if(Nt(a))return a.call(r,e,o,!0,n);if(!s("convert_urls")||"link"===o||we(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length)return e;const i=new un(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Wt(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&q(s?.nextSibling)&&rl.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&rl.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),rl.remove(e.getContainer()),sl(n),sl(o),e.destroy()}var a})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),sl(r),sl(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),rl.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const os=Ot.DOM,$l=H.each;let ql,kE=!1,Te=[];const Vl=t=>{const e=t.type;$l(xo.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},SE=t=>{if(t!==kE){const e=Ot.DOM;t?(e.bind(window,"resize",Vl),e.bind(window,"scroll",Vl)):(e.unbind(window,"resize",Vl),e.unbind(window,"scroll",Vl)),kE=t}},NE=t=>{const e=Te;return Te=gt(Te,n=>t!==n),xo.activeEditor===t&&(xo.activeEditor=Te.length>0?Te[0]:null),xo.focusedEditor===t&&(xo.focusedEditor=null),e.length!==Te.length},iB="CSS1Compat"!==document.compatMode,xo={...Ef,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.4",releaseDate:"2024-06-19",i18n:bn,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=un.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new un(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new un(t.baseURL),t.suffix=n,(s=t).on("AddEditor",J(gN,s)),s.on("RemoveEditor",J(pN,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Bt(o,(r,s)=>{xe.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=H.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var d;os.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],m=Nt(c)?p=>$t(u,f=>c(f,p)):p=>Rt(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];m(h)||u.push(h)}return u})((d=t,_t.browser.isIE()||_t.browser.isEdge()?(ll("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):iB?(ll("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):at(d.selector)?os.select(d.selector):q(d.target)?[d.target]:[])),H.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(NE(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=H.grep(l,d=>!e.get(d.id)),0===l.length?r([]):$l(l,d=>{t.inline&&d.tagName.toLowerCase()in o?ll("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new Hl(c,u,e);i.push(p),p.on("init",()=>{++a===l.length&&r(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=Pt(c,"name").filter(m=>!os.get(m)).getOrThunk(os.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return os.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return 0===arguments.length?Te.slice(0):at(t)?Zt(Te,e=>e.id===t).getOr(null):fn(t)&&Te[t]?Te[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Te.push(t),SE(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),ql||(ql=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",ql))),t},createEditor(t,e){return this.add(new Hl(t,e,this))},remove(t){const e=this;let n;if(t){if(!at(t))return n=t,Se(e.get(n.id))?null:(NE(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Te.length&&window.removeEventListener("beforeunload",ql),n.remove(),SE(Te.length>0),n);$l(os.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=Te.length-1;o>=0;o--)e.remove(Te[o])},execCommand(t,e,n){var o;const r=this,s=we(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Hl(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{$l(Te,t=>{t.save()})},addI18n:(t,e)=>{bn.add(t,e)},translate:t=>bn.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new un(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new un(this.baseURL)}};xo.setup();const lB=(()=>{const t=uo();return{FakeClipboardItem:e=>({items:e,types:Pe(e),getType:n=>Pt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),RE=Math.min,rs=Math.max,Wl=Math.round,AE=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=Wl(l/2)),"c"===d[1]&&(o+=Wl(i/2)),"b"===d[3]&&(r-=a),"r"===d[4]&&(o-=s),"c"===d[3]&&(r-=Wl(a/2)),"c"===d[4]&&(o-=Wl(s/2)),ss(o,r,s,a)},ss=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),dB={inflate:(t,e,n)=>ss(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:AE,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=AE(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=rs(t.x,e.x),o=rs(t.y,e.y),r=RE(t.x+t.w,e.x+e.w),s=RE(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:ss(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=rs(0,e.x-o),c=rs(0,e.y-r),u=rs(0,s-i),m=rs(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=m),s-=u,a-=m,ss(o,r,s-o,a-r)},create:ss,fromClientRect:t=>ss(t.left,t.top,t.width,t.height)},cB=(()=>{const t={},e={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,a=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(void 0!==t[o])return t[o];{const i=new Promise((l,d)=>{const c=((u,m,p=1e3)=>{let f=!1,h=null;const g=y=>(...x)=>{f||(f=!0,null!==h&&(clearTimeout(h),h=null),y.apply(null,x))},b=g(u),v=g(m);return{start:(...y)=>{f||null!==h||(h=setTimeout(()=>v.apply(null,y),p))},resolve:b,reject:v}})(l,d);e[o]=c.resolve,Qn.ScriptLoader.loadScript(r).then(()=>c.start(a),()=>c.reject(s))});return t[o]=i,i}},add:(o,r)=>{void 0!==e[o]&&(e[o](r),delete e[o]),t[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete t[o]}}})();let Fa;try{const t="__storage_test__";Fa=window.localStorage,Fa.setItem(t,t),Fa.removeItem(t)}catch{Fa=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const uB={geom:{Rect:dB},util:{Delay:Ye,Tools:H,VK:Y,URI:un,EventDispatcher:xf,Observable:Ef,I18n:bn,LocalStorage:Fa,ImageUploader:t=>{const e=dC(),n=uC(t,e);return{upload:(o,r=!0)=>n.upload(o,r?cC(t):void 0)}}},dom:{EventUtils:jo,TreeWalker:te,TextSeeker:qo,DOMUtils:Ot,ScriptLoader:Qn,RangeUtils:Jo,Serializer:Zy,StyleSheetLoader:cp,ControlSelection:Ob,BookmarkManager:ra,Selection:Jy,Event:jo.Event},html:{Styles:Wd,Entities:zo,Node:Ee,Schema:co,DomParser:Wr,Writer:w0,Serializer:ho},Env:_t,AddOnManager:xe,Annotator:xb,Formatter:gC,UndoManager:hC,EditorCommands:gE,WindowManager:aC,NotificationManager:sC,EditorObservable:vE,Shortcuts:EE,Editor:Hl,FocusManager:t0,EditorManager:xo,DOM:Ot.DOM,ScriptLoader:Qn.ScriptLoader,PluginManager:Yr,ThemeManager:rr,ModelManager:Kr,IconManager:al,Resource:cB,FakeClipboard:lB,trim:H.trim,isArray:H.isArray,is:H.is,toArray:H.toArray,makeMap:H.makeMap,each:H.each,map:H.map,grep:H.grep,inArray:H.inArray,extend:H.extend,walk:H.walk,resolve:H.resolve,explode:H.explode,_addCacheSuffix:H._addCacheSuffix},TE=H.extend(xo,uB);(t=>{window.tinymce=t,window.tinyMCE=t})(TE),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(TE)}();